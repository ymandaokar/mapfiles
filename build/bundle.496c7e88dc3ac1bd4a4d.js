webpackJsonp([3],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["new","save","edit","test","changeLanguage","changeQuestionMode"]);t.default=s},129:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),s=i(r),u=n(9),a=i(u),o=n(100),l=i(o),d=n(8),c=i(d),f=n(206),h=(i(f),n(30)),g=i(h),p=n(40),v=i(p),y=a.default.Map({editMode:!0,language:"en-US",footer:"block",questionMode:!1}),m=(0,s.default)({listenables:[l.default,g.default],_currentProfile:null,_preferenceProvider:null,init:function(){this.data=y},userChanged:function(e,t){var n=this;return this._currentProfile=t,this._preferenceProvider=v.default.get("PreferenceProvider"),this._preferenceProvider.getPreference("language").then(function(e){return n.data=n.data.set("language",e),c.default.setLanguage(e)}).then(function(){return n._preferenceProvider.getPreference("questionMode")}).then(function(e){n.data=n.data.set("questionMode",e),n.updateState()})},getInitialState:function(){return this.data},updateState:function(){this.trigger(this.data)},test:function(e){this.data=this.data.set("editMode",e),this.updateState()},changeQuestionMode:function(e){var t=this;e!=this.data.get("questionMode")&&this._preferenceProvider&&this._preferenceProvider.setPreference("questionMode",e).then(function(n){n.ok&&(t.data=t.data.set("questionMode",e),t.updateState())})},changeLanguage:function(e){var t=this;e!=this.data.get("language")&&this._preferenceProvider&&this._preferenceProvider.setPreference("language",e).then(function(n){if(n.ok)return t.data=t.data.set("language",e),c.default.setLanguage(e)}).then(function(){return t.updateState()})}});t.default=m},130:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(56),a=i(u),o=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),l=n(17),d=i(l),c=n(9),f=i(c),h=n(54),g=i(h),p=n(81),v=i(p),y=n(82),m=i(y),S=n(655),_=(i(S),function(){var e=["1.0"];return e["1.0"]=function(e){var t={schema:{_id:"",_rev:"",docType:"publishedsurvey",surveyId:null,survey:{},commonLink:"",contacts:f.default.Map(),providers:f.default.Set(),askLocation:!1,locationRestrict:!1,locationRequired:!1,isSurveyAvailabilitySet:!1,surveyStartDateTime:null,surveyEndDateTime:null,selectedLocations:[],notification:!1,recipientsForNotification:f.default.Set()},methods:{validateSurvey:function(e,t){var n=this.getSurvey(),i=(0,a.default)(e,function(e){return n.getPageItem(e).validate(t[e])});return Promise.all(i)},revivers:{publishedSurvey:function(e){var t=e._id,n=e._rev,i=e.surveyId,r=e.survey,s=e.contacts,u=e.date,a=e.commonLink,o=e.providers,l=e.askLocation,d=e.locationRestrict,c=e.isSurveyAvailabilitySet,f=e.locationRequired,h=e.surveyStartDateTime,p=e.surveyEndDateTime,v=e.selectedLocations,y=e.notification,m=e.recipientsForNotification,S=this;return r=(0,g.default)(r._schemaVersion).fromModel(r),S.setId(t).setRev(n).setSurveyId(i).setSurvey(r).setContacts(s).setCreated(u.created).setUpdated(u.updated).setCommonLink(a).setProviders(o).setAskLocation(l).setLocationRestrict(d).setIsSurveyAvailabilitySet(c).setLocationRequired(f).setSelectedLocations(v).setNotification(y).setSurveyStartDateTime(h).setSurveyEndDateTime(p).setRecipientsForNotification(m)}},getId:function(){return this.get("_id")},setId:function(e){return this.setIn(["_id"],e)},getRev:function(){return this.get("_rev")},setRev:function(e){return this.setIn(["_rev"],e)},getSurveyId:function(){return this.get("surveyId")},setSurveyId:function(e){return this.setIn(["surveyId"],e)},getSurvey:function(){return this.get("survey")},setSurvey:function(e){return this.setIn(["survey"],e)},getCommonLink:function(){return this.get("commonLink")},setCommonLink:function(e){return this.setIn(["commonLink"],e)},getContacts:function(){return this.get("contacts")},setContacts:function(e){return this.setIn(["contacts"],f.default.Map(e))},getContact:function(e){return this.getIn(["contacts",e])},setCompleted:function(e,t){var n=this.get("contacts").filter(function(t){if(t.responseId==e)return!0}),i=o(n,1),r=i[0],s=o(r,2),u=s[0],a=s[1];return a.completed=t,this.setIn(["contacts",u],a)},isUserCompleted:function(e){return this.get("contacts").filter(function(t){if(t.responseId==e)return t.completed}).toArray().length},validResponseId:function(e){return this.get("contacts").filter(function(t){if(t.responseId==e)return!0}).toArray().length},getProviders:function(){return this.get("providers")},setProviders:function(e){return e?this.set("providers",f.default.Set(e)):this},getAskLocation:function(){return this.get("askLocation")},setAskLocation:function(e){return e?this.set("askLocation",e):this},getLocationRestrict:function(){return this.get("locationRestrict")},setLocationRestrict:function(e){return e?this.set("locationRestrict",e):this},getIsSurveyAvailabilitySet:function(){return this.get("isSurveyAvailabilitySet")},setIsSurveyAvailabilitySet:function(e){return e?this.set("isSurveyAvailabilitySet",e):this},getSurveyStartDateTime:function(){return this.get("surveyStartDateTime")},setSurveyStartDateTime:function(e){return e?this.set("surveyStartDateTime",e):this},getSurveyEndDateTime:function(){return this.get("surveyEndDateTime")},setSurveyEndDateTime:function(e){return e?this.set("surveyEndDateTime",e):this},getLocationRequired:function(){return this.get("locationRequired")},setLocationRequired:function(e){return e?this.set("locationRequired",e):this},getSelectedLocations:function(){return this.get("selectedLocations")},setSelectedLocations:function(e){return e?this.set("selectedLocations",e):this},getNotification:function(){return this.get("notification")},setNotification:function(e){return this.setIn(["notification"],e)},getRecipientsForNotification:function(){return this.get("recipientsForNotification")},setRecipientsForNotification:function(e){return e?this.set("recipientsForNotification",f.default.Set(e)):this}}};t.Date={schema:{date:{created:new Date,updated:new Date}},methods:{revivers:{date:function(e){var t=e.created,n=e.updated;return this.setCreated(t).setUpdated(n)}},getDate:function(){return this.get("date")},getCreated:function(){return this.getIn(["date","created"])},setCreated:function(e){if(!e)return this;var t=new Date(e);return this.setIn(["date","created"],t)},getUpdated:function(){return this.getIn(["date","updated"])},setUpdated:function(e){if(!e)return this;var t=new Date(e);return this.setIn(["date","updated"],t)}}},t.Attachments={schema:{thumbnail:""},methods:{revivers:{attachments:function(e){var t=e.thumbnail;return this.setThumbnail(t)}},getThumbnail:function(){return this.getIn(["thumbnail"])},setThumbnail:function(e){return this.setIn(["thumbnail"],e)}}},t.PublishedSurvey=(0,s.default)(t,t.Date,t.Attachments);var n={PublishedSurvey:(0,v.default)(t.PublishedSurvey)},i=function(e){var t=new n.PublishedSurvey;return(0,m.default)(t,e)};return function(e){if(!e.docType){var t=(0,g.default)(e._schemaVersion),r={_id:(0,d.default)().str,surveyId:e.surveyId,survey:t.fromModel(e.survey),contacts:e.contacts,providers:e.providers,askLocation:e.askLocation,locationRestrict:e.locationRestrict,locationRequired:e.locationRequired,isSurveyAvailabilitySet:e.isSurveyAvailabilitySet,surveyStartDateTime:e.surveyStartDateTime,surveyEndDateTime:e.surveyEndDateTime,selectedLocations:e.selectedLocations,recipientsForNotification:e.recipientsForNotification,notification:e.notification};return new n.PublishedSurvey(r)}return i(e)}(e)},{getPublishedSurveyModel:function(t){var n="1.0";return t.survey._schemaVersion&&(n=t.survey._schemaVersion),e[n](t)},fromModel:function(t){var n="1.0";return t._schemaVersion&&(n=t._schemaVersion),e[n](t)}}}),b=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return _()};t.default=b},141:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["addNewSurvey","deleteSurvey","undo","dialogOpen","cloneSurvey","undoSurvey","optionsSurveyHeaderOpen","optionsSurveyHeaderDone","optionPageOpen","optionPageDone","optionsPageItemOpen","optionsPageItemDone","addQuestionDone","addDecoratorDone","addPageDone","deleteQuestion","deletePage","moveQuestion","movePage","loadSurvey","addDefaultPage","addDefaultQuestion","shuffleQuestions","startTest","stopTest","changeQuestion","setSurveyTitle","setSectionTitleDescription","movePageItem","randomizePageItems","setQuestionDisplay","exportToJSON","uploadSurvey","undoSurvey","reset","setUpdatedSurvey"]);t.default=s},143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["cancel","next","prev","finish","startPublish","setSurveyId","addContact","removeContact","addGroup","addContactsByGroup","deletePublishedSurvey","tabChanged","searchContacts","nextContactsPage","prevContactsPage","jumpToContactsPage","nextSelectedContactsPage","prevSelectedContactsPage","jumpToSelectedContactsPage","nextPublishedSurveysPage","prevPublishedSurveysPage","jumpToPublishedSurveysPage","updateProviders","updateAskLocation","updateSurveyAvailability","updateLocationRestrict","updateLocationRequired","updateSurveyStartDateTime","updateSurveyEndDateTime","initializeSurveysResponses","jumpToResponses","nextResponses","previousResponses","resetResponses","optionsInvitationOpen","optionsInvitationDone","getCurrentLocation","onSelectedMarkerDelete","onSuggestSelect","oncurrentLocationDragEnd","onCurrentLocMarkerClick","setMapCenterLocation","onDistanceChange","onSelectedLocMarkerClick","onLocationCardClick","setMailsForNotification","initCurrentPublishedSurvey","reset","enableNotifications","setRecipientsForNotifications","updateCurrentPublishedSurvey"]);t.default=s},153:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["open","update","done","cancel","close"]);t.default=s},155:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(12),a=i(u),o=n(24),l=i(o),d=n(56),c=i(d),f=n(9),h=i(f),g=n(54),p=i(g),v=n(81),y=i(v),m=n(82),S=i(m),_=n(794),b=(i(_),function(){var e=["1.0"];return e["1.0"]=function(e){var t={timeTracker:function(e){if(!e)throw"Empty.";return new i.TimeTracker(e)},fromModel:function(e){return(0,S.default)(new i.TimeTracker(e),e)}},n={schema:{_id:"",_rev:"",docType:"surveyresponse",publishedInstanceId:"",survey:{},responses:h.default.Map(),sharedInformation:h.default.Map({link:"",id:""}),session:h.default.Map({startTime:"",endTime:""}),client:h.default.Map({startTime:"",endTime:"",surveyArriveTime:"",tracker:h.default.Map()}),code:h.default.Map({total:0,success:0}),totalMarks:0,obtainedMarks:0,userLocations:[],selectedLocations:[]},methods:{validateSurvey:function(e,t){var n=this.getSurvey(),i=(0,c.default)(e,function(e){return n.getPageItem(e).validate(t[e])});return Promise.all(i)},revivers:{clientSurveyResponse:function(e){var t=e._id,n=e._rev,i=e.publishedInstanceId,r=e.survey,s=e.responses,u=(e.code,e.totalMarks),a=e.obtainedMarks,o=e.session,l=e.client,d=e.userLocations,c=e.selectedLocations,f=e.sharedInformation,h=this;return r=(0,p.default)(r._schemaVersion).fromModel(r),h.setId(t).setRevision(n).setPublishedInstanceId(i).setSurvey(r).setSharedInformation(f).setResponses(s).setTotalMarks(u).setObtainedMarks(a).setSurveyArriveTime(l.surveyArriveTime).setSession(o).setClientStartTime(l.startTime).setClientEndTime(l.endTime).setClientTracker(l.tracker).setUserLocations(d).setSelectedLocations(c)}},getId:function(){return this.get("_id")},setId:function(e){return this.setIn(["_id"],e)},getRevision:function(){return this.get("_rev")},setRevision:function(e){return this.setIn(["_rev"],e)},getPublishedInstanceId:function(){return this.get("publishedInstanceId")},setPublishedInstanceId:function(e){return this.setIn(["publishedInstanceId"],e)},getSurvey:function(){return this.get("survey")},setSurvey:function(e){return this.setIn(["survey"],e)},setSharedInformation:function(e){return e?this.setIn(["sharedInformation"],h.default.Map(e)):this},getSharedInformation:function(){return this.get("sharedInformation")},getSharedLink:function(){return this.getIn(["sharedInformation","link"])},getSharedId:function(){return this.getIn(["sharedInformation","id"])},getResponses:function(){return this.get("responses")},setResponses:function(e){return this.setIn(["responses"],h.default.Map(e))},getResponse:function(e){return this.getIn(["responses",e])},setResponse:function(e,t){return this.setIn(["responses",e],t)},getCode:function(){return this.getIn(["code"])},setCode:function(e){return e?this.setIn(["code"],h.default.Map(e)):this},getTotalCodeQuestions:function(){return this.getIn(["code","total"])},setTotalCodeQuestions:function(e){return this.setIn(["code","total"],e)},getTotalSuccessCodeQuestions:function(){return this.getIn(["code","success"])},setTotalSuccessCodeQuestions:function(e){return this.setIn(["code","success"],e)},getSession:function(){return this.get("session")},setSession:function(e){return this.set("session",h.default.Map(e))},getClient:function(){return this.get("client")},setClient:function(e){return this.set("client",h.default.Map(e))},getSessionStartTime:function(){return this.getIn(["session","startTime"])},setSessionStartTime:function(e){return this.setIn(["session","startTime"],e)},getSessionEndTime:function(){return this.getIn(["session","endTime"])},setSessionEndTime:function(e){return this.setIn(["session","endTime"],e)},getClientStartTime:function(){return this.getIn(["client","startTime"])},setClientStartTime:function(e){return this.setIn(["client","startTime"],e)},getClientEndTime:function(){return this.getIn(["client","endTime"])},setClientEndTime:function(e){return this.setIn(["client","endTime"],e)},getTotalMarks:function(){return this.get("totalMarks")},setTotalMarks:function(e){return this.set("totalMarks",e)},getObtainedMarks:function(){return this.get("obtainedMarks")},setObtainedMarks:function(e){return this.set("obtainedMarks",e)},getUserLocations:function(){return this.get("userLocations")},setUserLocations:function(e){return this.set("userLocations",e)},getSelectedLocations:function(){return this.get("selectedLocations")},setSelectedLocations:function(e){return this.set("selectedLocations",e)},getClientTracker:function(e){return this.getIn(["client","tracker",e])},getClientTrackers:function(){return this.getIn(["client","tracker"])},addClientTracker:function(e,t){return this.setIn(["client","tracker",e],t)},setClientTracker:function(e){var n=this;return(0,l.default)(e,function(e,i){n=n.addClientTracker(i,t.fromModel(e))}),n},getSurveyArriveTime:function(){return this.getIn(["client","surveyArriveTime"])},setSurveyArriveTime:function(e){return this.setIn(["client","surveyArriveTime"],e)}}};n.UserInfo={schema:{userInfo:{general:{name:"",email:""},device:{id:"",screenResolution:"",timeZoneOffset:""},os:"",browser:{name:"",version:""}}},methods:{revivers:{userInfo:function(e){var t=e.userInfo;return t?this.setGeneral(t.general).setDeviceId(t.device.id).setDeviceScreenResolution(t.device.screenResolution).setDeviceTimeZoneOffset(t.device.timeZoneOffset).setOS(t.os).setBrowserName(t.browser.name).setBrowserVersion(t.browser.version):this}},getUserInfo:function(){return this.get("userInfo")},setUserInfo:function(e){return this.set("userInfo",h.default.Map(e))},getGeneral:function(){return this.getIn(["userInfo","general"])},setGeneral:function(e){return e?this.setIn(["userInfo","general"],e):this},getName:function(){return this.getIn(["userInfo","general","name"])},setName:function(e){return this.setIn(["userInfo","general","name"],e)},getEmail:function(){return this.getIn(["userInfo","general","email"])},setEmail:function(e){return this.setIn(["userInfo","general","email"],e)},getDevice:function(){return this.getIn(["userInfo","device"])},setDevice:function(e){return this.setIn(["userInfo","device"],e)},getDeviceId:function(){return this.getIn(["userInfo","device","id"])},setDeviceId:function(e){return this.setIn(["userInfo","device","id"],e)},setDeviceName:function(e){return this.setIn(["userInfo","device","name"],e)},getDeviceScreenResolution:function(){return this.getIn(["userInfo","device","screenResolution"])},setDeviceScreenResolution:function(e){return this.setIn(["userInfo","device","screenResolution"],e)},getDeviceTimeZoneOffset:function(){return this.getIn(["userInfo","device","timeZoneOffset"])},setDeviceTimeZoneOffset:function(e){return this.setIn(["userInfo","device","timeZoneOffset"],e)},getOS:function(){return this.getIn(["userInfo","os"])},setOS:function(e){return this.setIn(["userInfo","os"],e)},getBrowser:function(){return this.getIn(["userInfo","browser"])},setBrowser:function(e){return this.setIn(["userInfo","browser"],e)},getBrowserName:function(){return this.getIn(["userInfo","browser","name"])},setBrowserName:function(e){return this.setIn(["userInfo","browser","name"],e)},getBrowserVersion:function(){return this.getIn(["userInfo","browser","version"])},setBrowserVersion:function(e){return this.setIn(["userInfo","browser","version"],e)}}},n.TimeTracker={schema:{timeTrail:[],switchTrail:[],finalResponseTime:""},methods:{revivers:{timeTracker:function(e){var t=e.timeTrail,n=e.finalResponseTime,i=e.switchTrail;return this.setTimeTrail(t).setSwitchTrail(i).setFinalResponseTime(n)}},getTimeTrail:function(){return this.get("timeTrail")},setTimeTrail:function(e){return(0,a.default)(e)?this.set("timeTrail",e):this},getSwitchTrail:function(){return this.get("switchTrail")},setSwitchTrail:function(e){return(0,a.default)(e)?this.set("switchTrail",e):this},getFinalResponseTime:function(){return this.get("finalResponseTime")},setFinalResponseTime:function(e){return this.set("finalResponseTime",e)}}},n.ClientSurveyResponse=(0,s.default)(n,n.UserInfo);var i={ClientSurveyResponse:(0,y.default)(n.ClientSurveyResponse),TimeTracker:(0,y.default)(n.TimeTracker)},r=function(e){var t=new i.ClientSurveyResponse;return(0,S.default)(t,e)};return function(e){if(!e.docType){var t=(0,p.default)(e._schemaVersion),n={_id:e.responseId,survey:t.fromModel(e.survey)};return new i.ClientSurveyResponse(n)}return r(e)}(e)},{getClientSurveyResponseModel:function(t){var n="1.0";return t.survey._schemaVersion&&(n=t.survey._schemaVersion),e[n](t)},fromModel:function(t){var n="1.0";return t._schemaVersion&&(n=t._schemaVersion),e[n](t)}}}),P=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return b()};t.default=P},156:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={email:/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/}},157:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(63),a=i(u),o=n(27),l=i(o),d=n(102),c=i(d),f=n(400),h=i(f),g=n(377),p=i(g),v=n(140),y=i(v),m=n(51),S=i(m),_=n(103),b=i(_),P=n(420),I=i(P),T=n(48),w=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(T),k=n(8),M=i(k),D=n(30),C=i(D),R=n(231),O=i(R),x=n(28),E=s.default.createClass({displayName:"UserProfile",mixins:[l.default,(0,a.default)(O.default,"Auth")],handleLogout:function(){C.default.logout()},handleLogin:function(e){C.default.login(e)},handleChildLogOut:function(){this.props.onLogOut()},getUserIcon:function(e){var t=e.authState,n=e.AuthStates,i=e.error,r=e.userProfile,u=this.context.customTheme.isMobile;if(t==n.SIGNED_IN){var a=r.name,o=r.thumbnail;return s.default.createElement(y.default,{className:"iconButton",tooltip:!u&&a,tooltipPosition:"bottom-left",touch:!0},s.default.createElement(p.default,{src:o,size:40,className:"userAvatar"}))}return t==n.SIGNED_OUT?s.default.createElement(y.default,{className:"iconButton",iconClassName:"icon-person icon_medium",tooltipPosition:"bottom-left",tooltip:!u&&M.default.t("Sign-in"),touch:!0}):t==n.ERROR?s.default.createElement(y.default,{className:"iconButton",iconClassName:"material-icons icon_medium",tooltipPosition:"bottom-left",tooltip:!u&&i.message||i,iconStyle:{color:w.red,textShadow:x.Emboss},touch:!0},"error_outline"):s.default.createElement(h.default,{size:.4,color:w.lightBlue800,style:{height:40,width:40,margin:"-5px 5px 0px -5px"}})},getAuthMenu:function(e){var t=e.authState,n=e.AuthStates,i=(e.provider,e.AuthProviders);if(t==n.SIGNED_IN){var r=s.default.createElement(c.default,{className:"icon-logout",color:w.blue500});return s.default.createElement(I.default,{iconButtonElement:this.getUserIcon(e),anchorOrigin:{horizontal:"left",vertical:"bottom"},targetOrigin:{horizontal:"left",vertical:"top"}},s.default.createElement(b.default,{style:this.context.customTheme.menuItem,leftIcon:r,primaryText:M.default.t("Sign-out"),onTouchTap:this.handleLogout}))}if(t==n.SIGNED_OUT){var u=[],a=!0,o=!1,l=void 0;try{for(var d,f=i[Symbol.iterator]();!(a=(d=f.next()).done);a=!0){var h=d.value,g=h.name,p=h.title,v=h.logo,y=s.default.createElement(c.default,{className:v,color:w.blue500});u.push(s.default.createElement(b.default,{style:this.context.customTheme.menuItem,key:g,primaryText:M.default.t(p),leftIcon:y,onTouchTap:this.handleLogin.bind(this,g)}))}}catch(e){o=!0,l=e}finally{try{!a&&f.return&&f.return()}finally{if(o)throw l}}return s.default.createElement(I.default,{iconButtonElement:this.getUserIcon(e),anchorOrigin:{horizontal:"right",vertical:"bottom"},targetOrigin:{horizontal:"right",vertical:"top"}},u)}return this.getUserIcon(e)},render:function(){var e=this.state.Auth.toJSON(),t=this.getAuthMenu(e),n=this.props;n.signoutCaption,n.cancelCaption;return s.default.createElement(S.default,{zDepth:1,style:{height:40,width:40,display:"inline-block"},circle:!0},t)}});E.contextTypes={customTheme:s.default.PropTypes.object},t.default=E},163:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["recordTime","updateTimerInformation"]);t.default=s},165:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(318),a=i(u),o=n(32),l=i(o),d=n(9),c=i(d),f=n(156),h=i(f),g=n(81),p=i(g),v=n(82),y=i(v),m=n(765),S=i(m),_=function(){var e=function(e){var t={schema:{_id:"",_rev:"",_deleted:!1,groups:c.default.Set()},methods:{revivers:{contact:function(e){var t=e._id,n=e._rev,i=e.groups;return this.setId(t).setRev(n).setGroups(i)}},getId:function(){return this.get("_id")},setId:function(e){return this.set("_id",e)},getRev:function(){return this.get("_rev")},setRev:function(e){return this.set("_rev",e)},getDeleted:function(){return this.get("_deleted")},setDeleted:function(e){return(0,a.default)(e)?this.set("_deleted",e):this},hasGroup:function(e){return this.get("groups").includes(e)},getGroups:function(){return this.get("groups").toSeq()},setGroup:function(e){return this.set("groups",this.get("groups").add(e))},setGroups:function(e){return e=c.default.Set(e),this.set("groups",e)},removeGroup:function(e){return this.set("groups",this.get("groups").remove(e))},validate:function(){for(var e=[],t=Object.keys(this.validators),n=0;n<t.length;n++){var i=t[n];e.push(this.validators[i].call(this))}return l.default.all(e.map(function(e){return e.reflect()})).each(function(e){return e.isFulfilled()?e.value():e.reason()})}}};t.Email={schema:{email:""},methods:{revivers:{email:function(e){var t=e.email;return this.setEmail(t)}},getEmail:function(){return this.get("email")},setEmail:function(e){return S.default.validEmail(e),this.set("email",e)},validators:{validEmail:function(){var e=this.getEmail();return e?h.default.email.test(e)?l.default.resolve():l.default.reject({email:"Email is not valid."}):l.default.reject({email:"Email is required."})}}}},t.FullName={schema:{fullName:""},methods:{revivers:{fullName:function(e){var t=e.fullName;return this.setFullName(t)}},getFullName:function(){return this.get("fullName")},setFullName:function(e){return S.default.validFullName(e),this.set("fullName",e)},validators:{validFullName:function(){return this.getFullName()?l.default.resolve():l.default.reject({fullName:"Full name is required."})}}}},t.Contact=(0,s.default)(t,t.FullName,t.Email);var n={Contact:(0,p.default)(t.Contact)},i=function(e){var t=new n.Contact;return(0,y.default)(t,e)};return function(e){if(!e._id){var e={_id:e.email,email:e.email,fullName:e.fullName,groups:e.groups||c.default.Set()};return new n.Contact(e)}return i(e)}(e)};return{createContact:function(t){return e(t)},fromModel:function(t){return e(t)}}};t.default=_},166:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(56),o=i(a),l=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(33),f=i(c),h=n(6),g=i(h),p=n(353),v=i(p),y=n(41),m=i(y),S=n(72),_=i(S),b=n(32),P=i(b),I=function(e){function t(e,n){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.CouchDBSurveyProvider=new v.default(n),i}return u(t,e),d(t,[{key:"getUserSurvey",value:function(e){var t=this;return this.getUserContext().then(function(t){return t.DB.allDocs({key:e,include_docs:!0})}).then(function(e){var n=l(e.rows,1),i=n[0];return t.CouchDBSurveyProvider.toSurveyModel(i.doc)})}},{key:"getSurveysBykeys",value:function(e){var t=this;return this.getUserContext().then(function(t){return t.DB.allDocs({keys:e,include_docs:!0})}).then(function(e){var n={};return e.rows.forEach(function(e){var i=t.CouchDBSurveyProvider.toSurveyModel(e.doc);n[i.getId()]=i}),n})}},{key:"getUserSurveysIdWithTitle",value:function(){return this.getUserContext().then(function(e){return e.DB.find({selector:{docType:"surveytemplate"},fields:["_id","header"]})}).then(function(e){return(0,o.default)(e.docs,function(e){return{id:e._id,title:e.header.title}})})}},{key:"getThumbnail",value:function(e,t){return t?P.default.resolve():(0,m.default)({url:"/thumbnail",method:"POST",data:e})}},{key:"addUserSurvey",value:function(e,t){var n=this;e||(e=this.CouchDBSurveyProvider.toSurveyModel()),e=e.setCreated((new Date).toISOString()).setUpdated((new Date).toISOString());var i=null,r={survey:e.toJSON(),modified:e.getId()};return this.getThumbnail(r,t).then(function(t){var i=t||{},r=i.data;return e=e.setThumbnail(r&&r.data),n.getUserContext()}).then(function(t){return i=t,i.save("surveytemplate",n.CouchDBSurveyProvider.fromSurveyModel(e))}).then(function(e){return i.DB.allDocs({key:e.id,include_docs:!0})}).then(function(e){var t=l(e.rows,1),r=t[0].doc;return i.triggerListener(r,"add"),n.CouchDBSurveyProvider.toSurveyModel(r)})}},{key:"addSurveys",value:function(e){var t=this,n=e.map(function(e){return e=t.CouchDBSurveyProvider.toSurveyModel(e),P.default.try(function(){return t.addUserSurvey(e)})});return(0,_.default)(n)}},{key:"updateUserSurvey",value:function(e,t){var n=this;e=e.setUpdated((new Date).toISOString());var i=null,r={survey:e.toJSON(),modified:e.getRevision()};return this.getThumbnail(r,t).then(function(t){var i=t||{},r=i.data;return e=e.setThumbnail(r&&r.data),n.getUserContext()}).then(function(t){return i=t,i.save("surveytemplate",n.CouchDBSurveyProvider.fromSurveyModel(e))}).then(function(t){return g.default.debug("Survey updated.",t),i.triggerListener(n.CouchDBSurveyProvider.fromSurveyModel(e.setRevision(t.rev)),"update"),t})}},{key:"undoSurvey",value:function(e){var t=this,n=null;return this.getUserContext().then(function(i){return n=i,n.save("surveytemplate",t.CouchDBSurveyProvider.fromSurveyModel(e))}).then(function(i){return n.triggerListener(t.CouchDBSurveyProvider.fromSurveyModel(e.setRevision(i.rev)),"update"),i})}},{key:"undoUserSurveys",value:function(e){var t=this,n=[];e=e.map(function(e){return n.push(e.getId()),t.CouchDBSurveyProvider.fromSurveyModel(e)});var i=null;return this.getUserContext().then(function(t){return i=t,i.DB.bulkDocs(e)}).then(function(e){return g.default.debug("undo surveys",e),t.getSurveysBykeys(n)})}},{key:"deleteUserSurvey",value:function(e){e=this.CouchDBSurveyProvider.fromSurveyModel(e),e._deleted=!0;var t=null;return this.getUserContext().then(function(n){return t=n,t.save("surveytemplate",e)}).then(function(n){return e._rev=n.rev,t.triggerListener(e,"delete"),n})}},{key:"destroy",value:function(){g.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncFailed")}}]),t}(f.default);t.default=I},167:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(e,t,n,i){this.key=e,this.type=t,this.title=n,this.options=i,this.toString=function(){return JSON.stringify(this.toJSON())},this.toJSON=function(){return{key:this.key,type:this.type,title:this.title,options:this.options}}},r=function(e,t){this.title=e,this.options=t,this.settings={},this.addSetting=function(e,t,n,r){return this.settings[e]=new i(e,t,n,r||{}),this},this.getSettings=function(e){return this.settings[e].toJSON()},this.toJSON=function(){var e={};for(var t in this.settings)this.settings[t].toJSON&&(e[t]=this.settings[t].toJSON());return{title:this.title,settings:e}},this.toString=function(){return JSON.stringify(this.toJSON())}},s=function(){return new function(){var e=[];this.getSettingsDefinition=function(){return e.map(function(e){return e.toJSON()})},this.addSettingsGroup=function(t,n){var i=new r(t,n);return e.push(i),i}}};t.default=s},168:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function s(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),s=2;s<n;s++)i[s-2]=arguments[s];e=a.default.apply(void 0,[{zIndex:c.default,isRtl:!1,userAgent:void 0},l.default,e].concat(i));var u=e,o=u.spacing,d=u.fontFamily,f=u.palette,g={spacing:o,fontFamily:d,palette:f};e=(0,a.default)(P.default,e,{baseTheme:g,rawTheme:g},{isMobile:t});var v=[h.default,y.default,p.default].map(function(t){return t(e)}).filter(function(e){return e});return e.prepareStyles=S.default.apply(void 0,r(v)),e}Object.defineProperty(t,"__esModule",{value:!0});var u=n(15),a=i(u);t.default=s;var o=(n(366),n(882)),l=i(o),d=n(884),c=i(d),f=n(885),h=i(f),g=n(886),p=i(g),v=n(887),y=i(v),m=n(442),S=i(m),_=n(888),b=(i(_),n(223),n(889)),P=i(b)},206:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(15),l=i(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(17),f=(i(c),n(33)),h=i(f),g=n(6),p=i(g),v={language:"en-US",questionMode:!1},y=function(e){function t(e){s(this,t);var n=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._preferences=null,n}return a(t,e),d(t,[{key:"_fetchSavedPreferences",value:function(){return this.getUserContext().then(function(e){return e.DB.query("getByDocType/typed",{key:"preferences",include_docs:!0})}).then(function(e){return e.rows[0].doc})}},{key:"_ensurePreferences",value:function(){var e=this;return this._preferences?Promise.resolve(this._preferences):this._fetchSavedPreferences().then(function(t){return e._preferences=(0,l.default)({},v),e._preferences=(0,l.default)(e._preferences,t)}).catch(function(t){return e._preferences=(0,l.default)({},v)})}},{key:"getPreference",value:function(e){return this._ensurePreferences().then(function(t){if(t.hasOwnProperty(e))return Promise.resolve(t[e]);throw TypeError("Invalid key.")})}},{key:"setPreference",value:function(e,t){var n=this;return this._ensurePreferences().then(function(i){return n._preferences=(0,l.default)(i,r({},e,t)),n._preferences.hasOwnProperty("_id")||(n._preferences._id="preferences"),n.getUserContext()}).then(function(e){return e.save("preferences",n._preferences)}).then(function(e){return n._preferences._rev=e.rev,{ok:!0}}).catch(function(e){if(409===e.status)return n._fetchSavedPreferences().then(function(){return{ok:!0}});throw e})}},{key:"destroy",value:function(){p.default.debug("[PreferencesProvider]: destroy")}},{key:"initialSyncCompleted",value:function(){p.default.debug("[PreferencesProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){p.default.debug("[PreferencesProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){p.default.debug("[PreferencesProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){p.default.debug("[PreferencesProvider]: deltaSyncFailed")}}]),t}(h.default);t.default=y},208:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),l=i(o),d=n(6),c=i(d),f=function(e){function t(e){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"reportTrackerInfo",value:function(e){return this.getUserContext().then(function(t){return t.save("surveytracker_info",e)})}},{key:"destroy",value:function(){c.default.debug("[ErrorProvider]: destroy")}},{key:"initialSyncCompleted",value:function(){c.default.debug("[ErrorProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){c.default.debug("[ErrorProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){c.default.debug("[ErrorProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){c.default.debug("[ErrorProvider]: deltaSyncFailed")}}]),t}(l.default);t.default=f},209:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(656),l=i(o),d=n(658),c=i(d),f=n(387),h=i(f),g=n(56),p=i(g),v=n(249),y=i(v),m=n(324),S=i(m),_=n(248),b=i(_),P=n(15),I=i(P),T=n(325),w=i(T),k=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),D=n(9),C=i(D),R=n(672),O=i(R),x=n(33),E=i(x),L=n(6),A=i(L),N=n(8),q=i(N),K=n(32),j=i(K),Q=n(72),B=i(Q),F=function(e){function t(e,n){s(this,t);var i=u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.CouchDBRecipientAdapter=new O.default(n),i._groups={},i}return a(t,e),M(t,[{key:"addRecipient",value:function(e){var t=this,n=this.CouchDBRecipientAdapter.toRecipientModel(e);return this.add(e.groups),this.getUserContext().then(function(e){return e.save("contact",t.CouchDBRecipientAdapter.fromRecipientModel(n)).then(function(i){return e.triggerListener(t.CouchDBRecipientAdapter.fromRecipientModel(n.setRev(i.rev)),"add"),n})})}},{key:"getRecipient",value:function(e){var t=this;return this.getUserContext().then(function(n){return n.DB.allDocs({key:e,include_docs:!0}).then(function(e){var n=k(e.rows,1),i=n[0];return i&&t.CouchDBRecipientAdapter.toRecipientModel(i.doc)})})}},{key:"ensureEmail",value:function(e){return this.getUserContext().then(function(t){return t.DB.find({selector:{docType:"contact",email:{$eq:e}},fields:["_id"]})}).then(function(e){return e.docs.length?j.default.reject(q.default.t("This email is already present")):j.default.resolve()})}},{key:"updateRecipient",value:function(e){var t=this,n=e.getGroups().toArray();return this.add(n).then(function(){return t.getUserContext()}).then(function(n){return n.save("contact",t.CouchDBRecipientAdapter.fromRecipientModel(e)).then(function(i){return t.removeUnwantedGroups(null,!0),n.triggerListener(t.CouchDBRecipientAdapter.fromRecipientModel(e.setRev(i.rev)),"update"),e})})}},{key:"deleteRecipient",value:function(e){var t=this,n={};return this.getUserContext().then(function(i){return i.DB.allDocs({key:e,include_docs:!0}).then(function(e){var t=k(e.rows,1),r=t[0].doc;return n=(0,w.default)(r),r._deleted=!0,i.save("contact",r)}).then(function(e){return n._rev=e.rev,t.removeUnwantedGroups(n.groups),i.triggerListener(n,"delete"),t.CouchDBRecipientAdapter.toRecipientModel(n)})})}},{key:"undo",value:function(e){return this.getUserContext().then(function(t){return t.DB.put(e).then(function(n){return e._rev=n.rev,t.triggerListener(e,"update"),e})})}},{key:"undoRecipent",value:function(e){var t=this;return this.add(e.groups).then(function(){return t.getUserContext()}).then(function(n){return n.save("contact",e).then(function(i){return e._rev=i.rev,t.removeUnwantedGroups(e.group),n.triggerListener(e,"update"),e})})}},{key:"_fetchSavedGroups",value:function(){return this.getUserContext().then(function(e){return e.DB.find({selector:{docType:"groups"}})}).then(function(e){return e.docs[0]})}},{key:"_ensureGroups",value:function(){var e=this;return this._groups&&this._groups.groups&&this._groups.groups.length?j.default.resolve(this._groups):this._fetchSavedGroups().then(function(t){return e._groups=(0,I.default)({},t)}).catch(function(e){return{}})}},{key:"get",value:function(){var e=this;return this._ensureGroups().then(function(t){return e._groups=t,e._groups.hasOwnProperty("groups")||(e._groups.groups=[]),e._groups.groups})}},{key:"getRecipientsByGroup",value:function(e){return this.getUserContext().then(function(t){return t.DB.find({selector:{docType:"contact",groups:{$elemMatch:{$eq:e}}}})})}},{key:"removeUnwantedGroups",value:function(e,t){var n=this;if(t&&this._groups.groups&&(e=(0,b.default)((0,S.default)((0,y.default)(this._groups.groups,e)))),!e||!e.length)return j.default.resolve();var i=e.map(function(e){return j.default.try(function(){return n.getRecipientsByGroup(e).then(function(t){return{group:e,count:t.docs.length}})})});return(0,B.default)(i).then(function(e){var t=e.reduce(function(e,t){if(!t.isRejected()){var i=t.value();i.count||e.push(n.remove(i.group))}return e},[]);return j.default.all(t)})}},{key:"add",value:function(e){var t=this;if(!e||!e.length)return j.default.resolve();var n=void 0;return this._ensureGroups().then(function(n){return t._groups=n,t._groups.hasOwnProperty("groups")||(t._groups.groups=[]),t._groups.groups=(0,S.default)((0,y.default)(t._groups.groups,e)),t._groups.hasOwnProperty("_id")||(t._groups._id="groups"),t.getUserContext()}).then(function(e){return n=e,e.save("groups",t._groups)}).then(function(e){return t._groups._rev=e.rev,n.triggerListener(t._groups,"add"),C.default.Set(t._groups.groups)}).catch(function(e){if(409===e.status)return t._fetchSavedGroups().then(function(){return C.default.Set(t._groups.groups)});throw e})}},{key:"remove",value:function(e){var t=this;if(!e)return C.default.Set(this._groups.groups);var n=void 0;return this.getRecipientsByGroup(e).then(function(n){return n.docs.length?(t.lastRecipients=r({},e,{}),t.newRecipients=(0,p.default)(n.docs,function(n){var i=t.CouchDBRecipientAdapter.toRecipientModel(n);return t.lastRecipients[e][i.getId()]=i,i=i.removeGroup(e),t.CouchDBRecipientAdapter.fromRecipientModel(i)}),t.getUserContext()):t.getUserContext()}).then(function(e){return n=e,t.newRecipients&&t.newRecipients.length?e.saveDocs(t.newRecipients):j.default.resolve()}).then(function(n){return(0,p.default)(n,function(n){t.lastRecipients[e][n.id]&&(t.lastRecipients[e][n.id]=t.CouchDBRecipientAdapter.fromRecipientModel(t.lastRecipients[e][n.id].setRev(n.rev)))}),t._ensureGroups()}).then(function(i){return t._groups=i,t._groups.hasOwnProperty("groups")||(t._groups.groups=[]),t._groups.hasOwnProperty("_id")||(t._groups._id="groups"),t._groups.groups=(0,h.default)(t._groups.groups,function(t){return t!=e}),t._groups.groups=(0,b.default)(t._groups.groups),n.save("groups",t._groups)}).then(function(e){return t._groups._rev=e.rev,n.triggerListener(t._groups,"delete"),C.default.Set(t._groups.groups)})}},{key:"renameGroup",value:function(e,t){var n=this,i=void 0;return this.getRecipientsByGroup(e).then(function(i){return i.docs.length?(n.newRecipients=(0,p.default)(i.docs,function(i){var r=n.CouchDBRecipientAdapter.toRecipientModel(i);return r=r.removeGroup(e).setGroup(t),n.CouchDBRecipientAdapter.fromRecipientModel(r)}),n.getUserContext()):n.getUserContext()}).then(function(e){return i=e,n.newRecipients&&n.newRecipients.length?i.saveDocs(n.newRecipients):j.default.resolve()}).then(function(){return n._ensureGroups()}).then(function(r){return n._groups=r,n._groups.hasOwnProperty("groups")||(n._groups.groups=[]),n._groups.hasOwnProperty("_id")||(n._groups._id="groups"),n._groups.groups=(0,h.default)(n._groups.groups,function(t){return t!=e}),n._groups.groups.push(t),n._groups.groups=(0,b.default)(n._groups.groups),i.save("groups",n._groups)}).then(function(e){return n._groups._rev=e.rev,i.triggerListener(n._groups,"update"),C.default.Set(n._groups.groups)}).catch(function(e){throw e})}},{key:"undoGroups",value:function(e){var t=this,n=void 0;return this._ensureGroups().then(function(n){return t._groups=n,t._groups.hasOwnProperty("groups")||(t._groups.groups=[]),t.groupDifference=(0,c.default)(e,t._groups.groups),t._groups.groups=e,t._groups.hasOwnProperty("_id")||(t._groups._id="groups"),t.getUserContext()}).then(function(e){return n=e,e.save("groups",t._groups)}).then(function(e){t._groups._rev=e.rev,n.triggerListener(t._groups,"update");var i=(0,p.default)(t.groupDifference,function(e){if(t.lastRecipients[e])return t.getUserContext().then(function(n){return n.DB.bulkDocs((0,l.default)(t.lastRecipients[e]))})});return j.default.all(i)}).then(function(){return C.default.Set(t._groups.groups)})}},{key:"destroy",value:function(){A.default.debug("[GroupsAndRecipientsProvider]: destroy")}},{key:"initialSyncCompleted",value:function(){A.default.debug("[GroupsAndRecipientsProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){A.default.debug("[GroupsAndRecipientsProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){A.default.debug("[GroupsAndRecipientsProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){A.default.debug("[GroupsAndRecipientsProvider]: deltaSyncFailed")}}]),t}(E.default);t.default=F},223:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.red50="#ffebee",t.red100="#ffcdd2",t.red200="#ef9a9a",t.red300="#e57373",t.red400="#ef5350",t.red500="#f44336",t.red600="#e53935",t.red700="#d32f2f",t.red800="#c62828",t.red900="#b71c1c",t.redA100="#ff8a80",t.redA200="#ff5252",t.redA400="#ff1744",t.redA700="#d50000",t.pink50="#fce4ec",t.pink100="#f8bbd0",t.pink200="#f48fb1",t.pink300="#f06292",t.pink400="#ec407a",t.pink500="#e91e63",t.pink600="#d81b60",t.pink700="#c2185b",t.pink800="#ad1457",t.pink900="#880e4f",t.pinkA100="#ff80ab",t.pinkA200="#ff4081",t.pinkA400="#f50057",t.pinkA700="#c51162",t.purple50="#f3e5f5",t.purple100="#e1bee7",t.purple200="#ce93d8",t.purple300="#ba68c8",t.purple400="#ab47bc",t.purple500="#9c27b0",t.purple600="#8e24aa",t.purple700="#7b1fa2",t.purple800="#6a1b9a",t.purple900="#4a148c",t.purpleA100="#ea80fc",t.purpleA200="#e040fb",t.purpleA400="#d500f9",t.purpleA700="#aa00ff",t.deepPurple50="#ede7f6",t.deepPurple100="#d1c4e9",t.deepPurple200="#b39ddb",t.deepPurple300="#9575cd",t.deepPurple400="#7e57c2",t.deepPurple500="#673ab7",t.deepPurple600="#5e35b1",t.deepPurple700="#512da8",t.deepPurple800="#4527a0",t.deepPurple900="#311b92",t.deepPurpleA100="#b388ff",t.deepPurpleA200="#7c4dff",t.deepPurpleA400="#651fff",t.deepPurpleA700="#6200ea",t.indigo50="#e8eaf6",t.indigo100="#c5cae9",t.indigo200="#9fa8da",t.indigo300="#7986cb",t.indigo400="#5c6bc0",t.indigo500="#3f51b5",t.indigo600="#3949ab",t.indigo700="#303f9f",t.indigo800="#283593",t.indigo900="#1a237e",t.indigoA100="#8c9eff",t.indigoA200="#536dfe",t.indigoA400="#3d5afe",t.indigoA700="#304ffe",t.blue50="#e3f2fd",t.blue100="#bbdefb",t.blue200="#90caf9",t.blue300="#64b5f6",t.blue400="#42a5f5",t.blue500="#2196f3",t.blue600="#1e88e5",t.blue700="#1976d2",t.blue800="#1565c0",t.blue900="#0d47a1",t.blueA100="#82b1ff",t.blueA200="#448aff",t.blueA400="#2979ff",t.blueA700="#2962ff",t.lightBlue50="#e1f5fe",t.lightBlue100="#b3e5fc",t.lightBlue200="#81d4fa",t.lightBlue300="#4fc3f7",t.lightBlue400="#29b6f6",t.lightBlue500="#03a9f4",t.lightBlue600="#039be5",t.lightBlue700="#0288d1",t.lightBlue800="#0277bd",t.lightBlue900="#01579b",t.lightBlueA100="#80d8ff",t.lightBlueA200="#40c4ff",t.lightBlueA400="#00b0ff",t.lightBlueA700="#0091ea",t.cyan50="#e0f7fa",t.cyan100="#b2ebf2",t.cyan200="#80deea",t.cyan300="#4dd0e1",t.cyan400="#26c6da",t.cyan500="#00bcd4",t.cyan600="#00acc1",t.cyan700="#0097a7",t.cyan800="#00838f",t.cyan900="#006064",t.cyanA100="#84ffff",t.cyanA200="#18ffff",t.cyanA400="#00e5ff",t.cyanA700="#00b8d4",t.teal50="#e0f2f1",t.teal100="#b2dfdb",t.teal200="#80cbc4",t.teal300="#4db6ac",t.teal400="#26a69a",t.teal500="#009688",t.teal600="#00897b",t.teal700="#00796b",t.teal800="#00695c",t.teal900="#004d40",t.tealA100="#a7ffeb",t.tealA200="#64ffda",t.tealA400="#1de9b6",t.tealA700="#00bfa5",t.green50="#e8f5e9",t.green100="#c8e6c9",t.green200="#a5d6a7",t.green300="#81c784",t.green400="#66bb6a",t.green500="#4caf50",t.green600="#43a047",t.green700="#388e3c",t.green800="#2e7d32",t.green900="#1b5e20",t.greenA100="#b9f6ca",t.greenA200="#69f0ae",t.greenA400="#00e676",t.greenA700="#00c853",t.lightGreen50="#f1f8e9",t.lightGreen100="#dcedc8",t.lightGreen200="#c5e1a5",t.lightGreen300="#aed581",t.lightGreen400="#9ccc65",t.lightGreen500="#8bc34a",t.lightGreen600="#7cb342",t.lightGreen700="#689f38",t.lightGreen800="#558b2f",t.lightGreen900="#33691e",t.lightGreenA100="#ccff90",t.lightGreenA200="#b2ff59",t.lightGreenA400="#76ff03",t.lightGreenA700="#64dd17",t.lime50="#f9fbe7",t.lime100="#f0f4c3",t.lime200="#e6ee9c",t.lime300="#dce775",t.lime400="#d4e157",t.lime500="#cddc39",t.lime600="#c0ca33",t.lime700="#afb42b",t.lime800="#9e9d24",t.lime900="#827717",t.limeA100="#f4ff81",t.limeA200="#eeff41",t.limeA400="#c6ff00",t.limeA700="#aeea00",t.yellow50="#fffde7",t.yellow100="#fff9c4",t.yellow200="#fff59d",t.yellow300="#fff176",t.yellow400="#ffee58",t.yellow500="#ffeb3b",t.yellow600="#fdd835",t.yellow700="#fbc02d",t.yellow800="#f9a825",t.yellow900="#f57f17",t.yellowA100="#ffff8d",t.yellowA200="#ffff00",t.yellowA400="#ffea00",t.yellowA700="#ffd600",t.amber50="#fff8e1",t.amber100="#ffecb3",t.amber200="#ffe082",t.amber300="#ffd54f",t.amber400="#ffca28",t.amber500="#ffc107",t.amber600="#ffb300",t.amber700="#ffa000",t.amber800="#ff8f00",t.amber900="#ff6f00",t.amberA100="#ffe57f",t.amberA200="#ffd740",t.amberA400="#ffc400",t.amberA700="#ffab00",t.orange50="#fff3e0",t.orange100="#ffe0b2",t.orange200="#ffcc80",t.orange300="#ffb74d",t.orange400="#ffa726",t.orange500="#ff9800",t.orange600="#fb8c00",t.orange700="#f57c00",t.orange800="#ef6c00",t.orange900="#e65100",t.orangeA100="#ffd180",t.orangeA200="#ffab40",t.orangeA400="#ff9100",t.orangeA700="#ff6d00",t.deepOrange50="#fbe9e7",t.deepOrange100="#ffccbc",t.deepOrange200="#ffab91",t.deepOrange300="#ff8a65",t.deepOrange400="#ff7043",t.deepOrange500="#ff5722",t.deepOrange600="#f4511e",t.deepOrange700="#e64a19",t.deepOrange800="#d84315",t.deepOrange900="#bf360c",t.deepOrangeA100="#ff9e80",t.deepOrangeA200="#ff6e40",t.deepOrangeA400="#ff3d00",t.deepOrangeA700="#dd2c00",t.brown50="#efebe9",t.brown100="#d7ccc8",t.brown200="#bcaaa4",t.brown300="#a1887f",t.brown400="#8d6e63",t.brown500="#795548",t.brown600="#6d4c41",t.brown700="#5d4037",t.brown800="#4e342e",t.brown900="#3e2723",t.blueGrey50="#eceff1",t.blueGrey100="#cfd8dc",t.blueGrey200="#b0bec5",t.blueGrey300="#90a4ae",t.blueGrey400="#78909c",t.blueGrey500="#607d8b",t.blueGrey600="#546e7a",t.blueGrey700="#455a64",t.blueGrey800="#37474f",t.blueGrey900="#263238",t.grey50="#fafafa",t.grey100="#f5f5f5",t.grey200="#eeeeee",t.grey300="#e0e0e0",t.grey400="#bdbdbd",t.grey500="#9e9e9e",t.grey600="#757575",t.grey700="#616161",t.grey800="#424242",t.grey900="#212121",t.black="#000000",t.white="#ffffff",t.transparent="rgba(0, 0, 0, 0)",t.fullBlack="rgba(0, 0, 0, 1)",t.darkBlack="rgba(0, 0, 0, 0.87)",t.lightBlack="rgba(0, 0, 0, 0.54)",t.minBlack="rgba(0, 0, 0, 0.26)",t.faintBlack="rgba(0, 0, 0, 0.12)",t.fullWhite="rgba(255, 255, 255, 1)",t.darkWhite="rgba(255, 255, 255, 0.87)",t.lightWhite="rgba(255, 255, 255, 0.54)"},231:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),s=i(r),u=n(858),a=i(u),o=n(359),l=i(o),d=n(860),c=i(d),f=n(39),h=i(f),g=n(22),p=i(g),v=n(328),y=i(v),m=n(206),S=i(m),_=n(322),b=i(_),P=n(208),I=i(P),T=n(209),w=i(T),k=n(354),M=i(k),D=n(166),C=i(D),R=n(355),O=i(R),x=n(352),E=i(x),L=n(314),A=i(L),N=n(315),q=i(N),K=n(316),j=i(K),Q=n(165),B=i(Q),F=n(54),U=i(F),G=n(130),z=i(G),V=n(356),H=i(V),J=n(9),W=i(J),Y=n(100),Z=(i(Y),n(329)),$=(i(Z),n(8)),X=i($),ee=n(6),te=i(ee),ne=n(40),ie=i(ne),re=n(302),se=(i(re),n(28)),ue=n(30),ae=i(ue),oe=n(865),le=i(oe),de=n(64),ce=i(de),fe=(0,B.default)(),he=(0,U.default)(),ge=(0,z.default)(),pe={SIGNED_IN:"signed-in",SIGNING_IN:"signing-in",SIGNED_OUT:"signed-out",SIGNING_OUT:"signing-out",ERROR:"error"},ve=[{name:"google",title:"Google",logo:"icon-google"},{name:"facebook",title:"Facebook",logo:"icon-facebook"}],ye=W.default.fromJS({AuthStates:pe,AuthProviders:function(e){return(0,l.default)(e,function(e){return void 0!=(0,a.default)(se.OAuth,function(t){return t.name==e.name})})}(ve),authState:pe.SIGNED_OUT,provider:null,error:null,userProfile:H.default}),me=(0,p.default)({listenables:ae.default,state:ye,provider:null,_subscribers:W.default.Map({onbeforelogout:[],onafterlogout:[]}),onLogout:!1,updateState:function(e,t){this.state=e,t&&this.trigger(this.state)},getInitialState:function(){return this.state},subscribe:function(e,t){-1==this._subscribers.get(e).indexOf(t)&&this._subscribers.get(e).push(t)},unsubscribe:function(e,t){var n=this._subscribers.get(e).indexOf(t);n>-1&&this._subscribers.get(e).splice(n,1)},triggerEvent:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return this._subscribers.get(e).reduce(function(e,t){return t.apply(void 0,n)||(e=!1),e},!0)},routeToSurveys:function(){var e=window.location.href.split("/");if(!se.skipSignOutRoutes.reduce(function(t,n){return-1!=(0,s.default)(e,n)&&(t=!0),t},!1)){var t=(0,h.default)({queryKey:!1}),n=t.createLocation("/surveys");t.push(n)}},init:function(){var e=this;c.default.configure(se.clientConfig),c.default.authenticated()?this._getProfile().then(function(t){e.updateState(e.state.mergeDeep({authState:pe.SIGNED_IN,userProfile:t}),!0),e.registerContextAndProviders(t),ae.default.userChanged(H.default,t,!0)}).catch(function(e){return te.default.log}):(this.registerContextAndProviders(H.default),ae.default.userChanged(null,H.default))},getProperDBURL:function(e){var t=le.default.parse(e);return t.protocol=window.location.protocol,t.host=window.location.host,t.port=window.location.port||443,t.pathname="db"+t.pathname,le.default.format(t)},_getProfile:function(){var e=this;return c.default.getHttp().get("user/profile").then(function(t){var n=t.data,i=c.default.getDbUrl(se.userDb);return n.userDbUrl=e.getProperDBURL(i),n.isGuest=!1,n})},login:function(e){var t=this;this.updateState(this.state.setIn(["authState"],pe.SIGNING_IN),!0),c.default.socialAuth(e).then(function(){return t._getProfile()}).then(function(e){t.updateState(t.state.mergeDeep({authState:pe.SIGNED_IN,userProfile:e}),!0),t.registerContextAndProviders(e),ae.default.userChanged(H.default,e),ce.default.notify(se.Notifications.INFO,X.default.t("You are successfully logged in")),te.default.log("logged-in")}).catch(function(e){te.default.error(e),ce.default.notify(se.Notifications.ERROR,X.default.t("The Login wasn't completed")),t.updateState(t.state.mergeDeep({authState:pe.SIGNED_OUT,userProfile:H.default}),!0)})},logout:function(){for(var e=this,t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];if(this.updateState(this.state.setIn(["authState"],pe.SIGNING_IN),!0),!this.onLogout){if(this.onLogout=!0,!this.triggerEvent.apply(this,["onbeforelogout"].concat(n)))return void(this.onLogout=!1);ie.default.get("UserContext").then(function(e){return e.destroy()}).then(function(){return c.default.logout("logout")}).then(function(){e.registerContextAndProviders(H.default),ae.default.userChanged(e.state.getIn(["userProfile"]).toJSON(),H.default),e.updateState(e.state.mergeDeep({authState:pe.SIGNED_OUT,userProfile:H.default}),!0),e.onLogout=!1,e.triggerEvent.apply(e,["onafterlogout"].concat(n)),e.routeToSurveys(),ce.default.notify(se.Notifications.INFO,X.default.t("You have successfully logged out")),e.updateState(e.state.setIn(["authState"],pe.SIGNED_OUT),!0)}).catch(function(t){e.onLogout=!1,te.default.error(t),e.updateState(e.state.mergeDeep({authState:pe.ERROR,error:{message:"An error occurred during logout"}}),!0),e.updateState(e.state.setIn(["authState"],pe.SIGNED_IN),!0)})}},registerContextAndProviders:function(e){ie.default.register("UserContext",y.default.getUserContext(e)),ie.default.register("GroupsAndRecipientsProvider",new w.default(ie.default,fe)),ie.default.register("SurveyDataProvider",new C.default(ie.default,he)),ie.default.register("PublishedSurveyProvider",new E.default(ie.default,ge)),ie.default.register("PreferenceProvider",new S.default(ie.default)),ie.default.register("PublishedSurveyResponeseProvider",new O.default(ie.default)),ie.default.register("ImageProvider",new M.default(ie.default)),ie.default.register("DefaultPaginatorProvider",new A.default(ie.default)),ie.default.register("GroupsPaginatorProvider",new q.default(ie.default)),ie.default.register("ResponsesPaginatorProvider",new j.default(ie.default)),ie.default.register("ErrorProvider",new b.default(ie.default)),ie.default.register("TimeTrackerProvider",new I.default(ie.default))}});t.default=me},245:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["setResponse","startTest","stopTest","next","previous","finish","setDisable"]);t.default=s},252:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),a=n(0),o=n(168),l=function(e){return e&&e.__esModule?e:{default:e}}(o),d=function(e){function t(){return i(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,e),u(t,[{key:"getChildContext",value:function(){return{customTheme:this.props.customTheme||(0,l.default)()}}},{key:"render",value:function(){return this.props.children}}]),t}(a.Component);d.propTypes={children:a.PropTypes.element,customTheme:a.PropTypes.object},d.childContextTypes={customTheme:a.PropTypes.object.isRequired},t.default=d},255:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(63),a=(i(u),n(27)),o=i(a),l=n(227),d=i(l),c=s.default.createClass({displayName:"DetectDevice",mixins:[o.default],childContextTypes:{location:s.default.PropTypes.object,history:s.default.PropTypes.object},getChildContext:function(){return{location:this.props.location,history:this.props.history}},getChildWithProps:function(e,t){return s.default.Children.map(this.props.children,function(n){return s.default.cloneElement(n,{isMobile:e,isShort:t})})},render:function(){return s.default.createElement("div",null,s.default.createElement(d.default,{query:"(min-device-width: 1224px)"},s.default.createElement(d.default,{query:"(min-width: 808px)"},this.getChildWithProps(!1)),s.default.createElement(d.default,{query:"(max-width: 807px) and (min-width: 471px)"},this.getChildWithProps(!0)),s.default.createElement(d.default,{query:"(max-width: 470px)"},this.getChildWithProps(!0,!0))),s.default.createElement(d.default,{query:"(max-device-width: 1224px)"},s.default.createElement(d.default,{query:"(min-width: 471px)"},this.getChildWithProps(!0)),s.default.createElement(d.default,{query:"(max-width: 470px)"},this.getChildWithProps(!0,!0))))}});t.default=c},266:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["registerError","postToServer"]);t.default=s},28:function(e,t){e.exports={AppTitle:"quizMe",Emboss:"rgba(255, 255, 255, 0.0980392) -1px -1px 1px, rgba(0, 0, 0, 0.498039) 1px 1px 1px",markdownGuideLink:"https://guides.github.com/features/mastering-markdown",DisabledStyle:{opacity:.2},SupportedLanguages:{English:"en-US","":"hi-IN"},SupportedLanguagesCollection:["en-US","hi-IN"],SurveyModelDefaults:{SchemaRevision:1,DataStoreKey:"SurveyModel",SurveyCollectionKey:"Surveys",MaxSurveyTitleLength:100,MaxSurveySubTitleLength:1e3,MaxPageTitleLength:100,MaxPageSubTitleLength:1e3},OAuth:{Google:{name:"google"},Facebook:{name:"facebook"}},CouchDbUrl:"http://localhost:5984/",siteURL:"https://survey.bitpod.io",Notifications:{INFO:{lable:"info",timespan:3e3},SUCCESS:{lable:"success",timespan:3e3},WARNING:{lable:"warning",timespan:4e3},ERROR:{lable:"error",timespan:4e3},LONGINFO:{lable:"info",timespan:1e4}},userDb:"survey",clientConfig:{baseUrl:"/auth/",endpoints:[],noDefaultEndpoint:!1,storage:"local",providers:["facebook","google"],checkExpired:"stateChange",refreshThreshold:.5},tag:{delimiters:",|;",actions:{add:"add",remove:"remove"}},contactView:{navigation:{pageSize:5}},allowedImageFileType:"image/jpeg, image/png",fonts:{xxx_small:"20%",xx_small:"30%",x_small:"50%",smaller:"70%",small:"80%",medium:"110%",normal:"100%",large:"120%",larger:"130%",x_large:"150%",xx_large:"170%",xxx_large:"190%",xxxx_large:"200%"},Placeholders:{text:"Section Title",image:"Image",question:"Question title"},distributionTypes:{commonlink:"commonlink",yourcontacts:"yourcontacts"},shortUrl:{apiKey:"AIzaSyBKAL6miYV8VMMDsooQTefxrfxkrvzqwCQ"},googleMap:{apiKey:"AIzaSyBJGXlxHBAbNnPk65friDQKqbqLqwnvwog"},mapIcons:{grayIcon:"../../grey-dot.png",greenIcon:"../../green-dot.png",redIcon:"../../maroon-dot.png",blueIcon:"../../blue-dot.png",selectedUserLocationIcon:"../../selectedUserLocation.png",addUserLocationIcon:"../../addUserLocation.png"},locationRange:{min:10,max:50},locationSelecteionLimit:5,defaultMapCenter:{latitude:40.7127837,longitude:-74.00594130000002},locationDifferenceLimit:10,providerLinks:{google:{label:"www.google.com",link:"https://www.google.com"},facebook:{label:"www.facebook.com",link:"https://www.facebook.com"}},mediaAPIEndpoint:"/media",sharedPath:"message/shared",skipSignOutRoutes:["run","message"]}},30:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["login","logout","userChanged","onBeforeLogout","onAfterLogout"]);t.default=s},314:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(241),o=i(a),l=n(15),d=i(l),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),f=n(33),h=i(f),g=n(6),p=i(g),v=function(e){function t(e){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),c(t,[{key:"registerListener",value:function(e,t){return this.getUserContext().then(function(n){return n.registerListener(e,t)})}},{key:"unregisterListener",value:function(e,t){return this.getUserContext().then(function(n){return n.unregisterListener(e,t)})}},{key:"_find",value:function(e){return this.getUserContext().then(function(t){return t.DB.find(e)})}},{key:"get",value:function(e,t,n){return e=(0,d.default)(e,{skip:t,limit:n}),this._find(e).then(function(e){return e.docs})}},{key:"filter",value:function(e,t,n){return e=(0,d.default)(e,{skip:t,limit:n}),this._find(e).then(function(e){return e.docs})}},{key:"getIndex",value:function(e,t,n){return this._find(e).then(function(e){var i=e.docs;return(0,o.default)(i,function(e){return n(e,t)})})}},{key:"getQueryCount",value:function(e){return this._find(e).then(function(e){return e.docs.length})}},{key:"getFilterCount",value:function(e){return this._find(e).then(function(e){return e.docs.length})}},{key:"destroy",value:function(){p.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){p.default.debug("[SurveyDataProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){p.default.debug("[SurveyDataProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){p.default.debug("[SurveyDataProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){p.default.debug("[SurveyDataProvider]: deltaSyncFailed")}}]),t}(h.default);t.default=v},315:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var o=n(248),l=i(o),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(33),f=i(c),h=n(6),g=i(h),p=n(32),v=i(p),y=n(72),m=i(y),S=function(e){function t(e){return s(this,t),u(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return a(t,e),d(t,[{key:"registerListener",value:function(e,t){return this.getUserContext().then(function(n){return n.registerListener(e,t)})}},{key:"unregisterListener",value:function(e,t){return this.getUserContext().then(function(n){return n.unregisterListener(e,t)})}},{key:"_find",value:function(e){}},{key:"_fetchGroups",value:function(){return this.getUserContext().then(function(e){return e.DB.find({selector:{_id:"groups"},fields:["groups"]})}).then(function(e){return e.docs[0]&&e.docs[0].groups||[]})}},{key:"get",value:function(e,t,n){var i=this;return this._fetchGroups().then(function(e){return(0,m.default)(e.map(function(e){return v.default.try(function(){return i.getGroupWithContactsCount(e)})})).then(function(e){return(0,l.default)(e.map(function(e){return!e.isRejected()&&e.value()}))})})}},{key:"getGroupWithContactsCount",value:function(e){return this.getRecipientsByGroup(e).then(function(t){return r({},e,t.docs.length)})}},{key:"getRecipientsByGroup",value:function(e){return this.getUserContext().then(function(t){return t.DB.find({selector:{docType:"contact",groups:{$elemMatch:{$eq:e}}},fields:["_id"]})})}},{key:"filter",value:function(e,t,n){}},{key:"getIndex",value:function(e,t,n){}},{key:"getQueryCount",value:function(e){return v.default.resolve(0)}},{key:"getFilterCount",value:function(e){}},{key:"destroy",value:function(){g.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncFailed")}}]),t}(f.default);t.default=S},316:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(33),l=i(o),d=n(6),c=i(d),f=n(32),h=i(f),g=n(72),p=(i(g),n(9)),v=i(p),y=n(130),m=i(y),S=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._publidhedSurveys=v.default.Map(),n._publishedSurveyModelProvider=(0,m.default)(),n}return u(t,e),a(t,[{key:"registerListener",value:function(e,t){return this.getUserContext().then(function(n){return n.registerListener(e,t)})}},{key:"unregisterListener",value:function(e,t){return this.getUserContext().then(function(n){return n.unregisterListener(e,t)})}},{key:"_find",value:function(e){}},{key:"_fetchPublishedSurvey",value:function(e){var t=this;return this.getUserContext().then(function(t){return t.DB.allDocs({key:e,include_docs:!0})}).then(function(e){return e.rows[0]&&t._publishedSurveyModelProvider.fromModel(e.rows[0].doc)})}},{key:"getResponses",value:function(e){var t=this._publidhedSurveys.get(e)&&this._publidhedSurveys.get(e).getContacts().sortBy(function(e){return e.obtainedMarks||0});return t&&t.reverse()}},{key:"get",value:function(e,t,n){var i=this.getResponses(e)||v.default.Map();return h.default.resolve(i.skip(t).take(n).toArray())}},{key:"filter",value:function(e,t,n){}},{key:"getIndex",value:function(e,t,n){}},{key:"getQueryCount",value:function(e){var t=this;return this._fetchPublishedSurvey(e).then(function(n){return t._publidhedSurveys=t._publidhedSurveys.set(e,n),n.getContacts().size})}},{key:"getFilterCount",value:function(e){}},{key:"destroy",value:function(){c.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){c.default.debug("[SurveyDataProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){c.default.debug("[SurveyDataProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){c.default.debug("[SurveyDataProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){c.default.debug("[SurveyDataProvider]: deltaSyncFailed")}}]),t}(l.default);t.default=S},322:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(17),l=(i(o),n(33)),d=i(l),c=n(6),f=i(c),h=function(e){function t(e){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),a(t,[{key:"reportErrors",value:function(e){return this.getUserContext().then(function(t){return t.saveDocs(e)})}},{key:"destroy",value:function(){f.default.debug("[ErrorProvider]: destroy")}},{key:"initialSyncCompleted",value:function(){f.default.debug("[ErrorProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){f.default.debug("[ErrorProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){f.default.debug("[ErrorProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){f.default.debug("[ErrorProvider]: deltaSyncFailed")}}]),t}(d.default);t.default=h},328:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(329),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s={userContexts:{},getUserContext:function(e){var t=this;return this.userContexts[e._id]?this.userContexts[e._id].then(function(n){return n.isValid()?n:t.userContexts[e._id]=new r.default(e)._initialize()}):this.userContexts[e._id]=new r.default(e)._initialize()}};t.default=s},329:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=i(a),l=n(24),d=i(l),c=n(250),f=i(c),h=n(160),g=i(h),p=n(249),v=i(p),y=n(677),m=i(y),S=n(324),_=i(S),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),P=n(90),I=i(P),T=n(87),w=i(T),k=n(692),M=i(k),D=n(693),C=i(D),R=n(700),O=i(R),x=n(701),E=i(x),L=n(702),A=i(L),N=n(72),q=i(N),K=n(6),j=i(K),Q=n(41),B=i(Q),F=n(32),U=i(F),G=n(721),z=i(G),V=n(724),H=i(V),J=n(730),W=i(J),Y=n(741),Z=i(Y),$=n(759),X=i($),ee=n(763),te=i(ee);w.default.plugin(z.default).plugin(H.default).plugin(W.default).plugin(Z.default).plugin(X.default).plugin(te.default),w.default.debug.disable();var ne={AssertContextValid:function(e){if(!e)throw TypeError("This context has already been destroyed.")},AssertDBInitialized:function(e){if(!e)throw TypeError("Database is not initialized yet!")}},ie=function(e){function t(e){r(this,t);var n=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n._userId=e._id,n._userProfile=e,n._initialized=!1,n._db=null,n._listeners=new Map,n}return u(t,e),b(t,[{key:"registerListener",value:function(e,t){this._listeners.set(e,(0,_.default)((0,m.default)((0,v.default)(this._listeners[e]||[],t))))}},{key:"unregisterListener",value:function(e,t){this._listeners.set(e,(0,g.default)(this._listeners.get(e),function(e){return t!=e}))}},{key:"_seedDesigns",value:function(e){var t=this,n=new w.default(e._id);return j.default.log("Adapter used: "+n.adapter),(0,C.default)(n,E.default).then(function(i){return j.default.debug("Views created.",i),e.isGuest?(t._db=n,n):(0,C.default)(n,O.default).then(function(i){return j.default.debug("Filter created",i),t._db=new M.default(n,new w.default(e.userDbUrl)),t.addEventListener(t._db)})})}},{key:"syncCompleted",value:function(){ne.AssertContextValid(this.isValid()),this.isPublished&&(this.isPublished=!1,(0,B.default)({url:"/trigger/invitation",method:"POST",data:{userId:this._userId}}))}},{key:"triggerListener",value:function(e,t){var n=this;(arguments.length>2&&void 0!==arguments[2]?arguments[2]:this._listeners).forEach(function(i,r){r(e)&&n.invokeCallbacks(e,t,i)})}},{key:"invokeCallbacks",value:function(e,t,n){n=(0,_.default)(n),(0,f.default)(n,function(n){return n(e,t)})}},{key:"triggerChanges",value:function(e){var t=this,n=e.change.docs;(0,f.default)(n,function(e){t.triggerListener(e,e._deleted?"delete":"addorupdate")})}},{key:"changesFound",value:function(e){var t=this;if("pull"==e.direction&&this.triggerChanges(e),"push"==e.direction){var n=e.change.docs;(0,f.default)(n,function(e){"publishedsurvey"==e.docType&&(t.isPublished=!0)})}}},{key:"addEventListener",value:function(e){var t=this;return e.on("delta-sync-completed",function(){t.syncCompleted(),t.emit("delta-sync-completed")}).on("delta-sync-started",function(){j.default.debug("Delta sync started.")}).on("delta-sync-changes-detected",function(e){t.changesFound(e),j.default.debug("delta-sync-changes-detected.")}).on("delta-sync-failed",function(){t.emit("delta-sync-failed")}).on("initial-sync-changes-detected",function(){j.default.debug("initial-sync-changes-detected.")}).on("initial-sync-started",function(){j.default.debug("initial-sync-started.")}).on("initial-sync-failed",function(){t.emit("initial-sync-failed")}).on("initial-sync-completed",function(){t.emit("initial-sync-completed")})}},{key:"_initialize",value:function(){var e=this;return this._seedDesigns(this._userProfile).then(function(e){var t=[];return(0,d.default)(A.default,function(n,i){t.push(U.default.try(function(){return e.createIndex(n)}))}),(0,q.default)(t)}).then(function(t){return e._initialized=!0,e._isValid=!0,j.default.debug("Index created",t),e})}},{key:"off",value:function(e,t){ne.AssertDBInitialized(this._initialized),this.removeListener(e,t)}},{key:"find",value:function(e){return ne.AssertDBInitialized(this._initialized),ne.AssertContextValid(this.isValid()),this._db.find(e)}},{key:"save",value:function(e,t){ne.AssertDBInitialized(this._initialized),ne.AssertContextValid(this.isValid());var n=(0,o.default)(t,{docType:e});return this._db.put(n)}},{key:"saveDocs",value:function(e){return ne.AssertDBInitialized(this._initialized),ne.AssertContextValid(this.isValid()),this._db.bulkDocs(e)}},{key:"destroy",value:function(){return ne.AssertDBInitialized(this._initialized),ne.AssertContextValid(this.isValid()),this.emit("destroy"),this.removeAllListeners(),this._isValid=!1,this._db.destroy()}},{key:"isValid",value:function(){return this._isValid}},{key:"ID",get:function(){return ne.AssertDBInitialized(this._initialized),ne.AssertContextValid(this.isValid()),this._userId}},{key:"DB",get:function(){return ne.AssertContextValid(this.isValid()),this._db}}]),t}(I.default);t.default=ie},33:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function e(t){i(this,e),this.getUserContext=function(){return t.get("UserContext").then(function(e){return e})}};t.default=r},352:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(56),o=i(a),l=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(33),f=i(c),h=n(6),g=i(h),p=n(353),v=(i(p),n(41)),y=i(v),m=function(e){function t(e,n){r(this,t);var i=s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.PublishedSurveyModelProvider=n,i}return u(t,e),d(t,[{key:"getUserPublishedSurveys",value:function(){var e=this;return this.getUserContext().then(function(e){return e.DB.query("getByDocType/typed",{key:"publishedsurvey",include_docs:!0})}).then(function(t){var n={};return(0,o.default)(t.rows,function(t){t.doc&&(n[t.id]=e.PublishedSurveyModelProvider.fromModel(t.doc))}),n})}},{key:"getUserPublishedSurvey",value:function(e){var t=this;return this.getUserContext().then(function(t){return t.DB.allDocs({key:e,include_docs:!0})}).then(function(e){var n=l(e.rows,1),i=n[0];return t.PublishedSurveyModelProvider.getPublishedSurveyModel(i.doc)})}},{key:"addUserPublishedSurvey",value:function(e){var t=this;e=this.PublishedSurveyModelProvider.getPublishedSurveyModel(e).toJS(),g.default.debug(e);var n=null,i={survey:e.survey,modified:e._id};return(0,y.default)({url:"/thumbnail",method:"POST",data:i}).then(function(n){var i=n.data;return e.thumbnail=i.data,t.getUserContext()}).then(function(t){return n=t,n.save("publishedsurvey",e)}).then(function(e){return n.DB.allDocs({key:e.id,include_docs:!0})}).then(function(e){var i=l(e.rows,1),r=i[0];return n.triggerListener(r,"add"),t.PublishedSurveyModelProvider.fromModel(r.doc)})}},{key:"updateUserPublishedSurvey",value:function(e){var t=this;e=e.toJS(),g.default.debug(e);var n=null,i={survey:e.survey,modified:e._rev};return(0,y.default)({url:"/thumbnail",method:"POST",data:i}).then(function(n){var i=n.data;return e.thumbnail=i.data,t.getUserContext()}).then(function(t){return n=t,n.save("publishedsurvey",e)}).then(function(e){return n.DB.allDocs({key:e.id,include_docs:!0})}).then(function(e){var i=l(e.rows,1),r=i[0];return n.triggerListener(r,"update"),t.PublishedSurveyModelProvider.fromModel(r.doc)})}},{key:"undoUserPublishedSurveys",value:function(e){var t=this;return e=(0,o.default)(e,function(e){return e=e.toJS()}),this.getUserContext().then(function(t){return t.DB.bulkDocs(e)}).then(function(e){return g.default.debug("undo surveys",e),t.getUserSurveys()})}},{key:"deleteUserPublishedSurvey",value:function(e){e=e.toJS(),e._deleted=!0;var t=null;return this.getUserContext().then(function(n){return t=n,t.save("publishedsurvey",e)}).then(function(n){return e._rev=n.rev,t.triggerListener(e,"delete"),n})}},{key:"destroy",value:function(){g.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){g.default.debug("[SurveyDataProvider]: deltaSyncFailed")}}]),t}(f.default);t.default=m},353:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.SurveyModelBuilder=t}return r(e,[{key:"fromSurveyModel",value:function(e){var t=e.toJS();return t.hasOwnProperty("_ensureDefaults")&&(t.ensureDefaults=t._ensureDefaults,delete t._ensureDefaults),t.hasOwnProperty("_schemaVersion")&&(t.schemaVersion=t._schemaVersion,delete t._schemaVersion),0==t._isDeleted&&delete t._isDeleted,t.docType="surveytemplate",t}},{key:"toSurveyModel",value:function(e){return e?(e.hasOwnProperty("ensureDefaults")&&(e._ensureDefaults=e.ensureDefaults,delete e.ensureDefaults),e.hasOwnProperty("schemaVersion")&&(e._schemaVersion=e.schemaVersion,delete e.schemaVersion),this.SurveyModelBuilder.fromModel(e)):this.SurveyModelBuilder.createDefaultModel()}}]),e}();t.default=s},354:function(e,t,n){"use strict";(function(e){function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(15),o=i(a),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),d=n(33),c=i(d),f=n(6),h=i(f),g=function(t){function n(e){return r(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e))}return u(n,t),l(n,[{key:"getImages",value:function(){return this.getUserContext().then(function(e){return e.DB.query("getByDocType/typed",{key:"image",include_docs:!0,attachments:!0})}).then(function(e){return e})}},{key:"getImage",value:function(e){return this.getUserContext().then(function(t){return t.DB.allDocs({key:e,include_docs:!0,attachments:!0})}).then(function(e){return e})}},{key:"addImages",value:function(t){var n=this,i=[];return t=t.map(function(t){return t._attachments.image.data=new Blob([new e(t._attachments.image.data)],{type:t.mimeType}),(0,o.default)(t,{docType:"image"})}),this.getUserContext().then(function(e){return e.saveDocs(t)}).then(function(e){return e.forEach(function(e){i.push(e.id)}),n.getUserContext()}).then(function(e){return e.DB.allDocs({keys:i,include_docs:!0,attachments:!0})}).then(function(e){return e})}},{key:"deleteImage",value:function(e){return e._deleted=!0,this.getUserContext().then(function(t){return t.save("image",e)})}},{key:"destroy",value:function(){h.default.log("Logged off")}},{key:"initialSyncCompleted",value:function(){h.default.debug("[ImageProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){h.default.debug("[ImageProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){h.default.debug("[ImageProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){h.default.debug("[ImageProvider]: deltaSyncFailed")}}]),n}(c.default);t.default=g}).call(t,n(385).Buffer)},355:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=n(56),o=i(a),l=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),c=n(9),f=(i(c),n(33)),h=i(f),g=n(6),p=i(g),v=n(8),y=(i(v),function(e){function t(e){return r(this,t),s(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return u(t,e),d(t,[{key:"getResponse",value:function(e){return this.getUserContext().then(function(t){return t.DB.allDocs({key:e,include_docs:!0})}).then(function(e){var t=l(e.rows,1),n=t[0];return n&&n.doc})}},{key:"getResponsesByKey",value:function(e){return this.getUserContext().then(function(t){return t.DB.allDocs({keys:e,include_docs:!0})}).then(function(e){var t={};return(0,o.default)(e.rows,function(e){t[e.id]=e.doc}),t})}},{key:"setResponse",value:function(e){return this.getUserContext().then(function(t){return t.save("surveyresponse",e)})}},{key:"destroy",value:function(){p.default.debug("[GroupsAndRecipientsProvider]: destroy")}},{key:"initialSyncCompleted",value:function(){p.default.debug("[GroupsAndRecipientsProvider]: initialSyncCompleted")}},{key:"deltaSyncCompleted",value:function(){p.default.debug("[GroupsAndRecipientsProvider]: deltaSyncCompleted")}},{key:"initialSyncFailed",value:function(){p.default.debug("[GroupsAndRecipientsProvider]: initialSyncFailed")}},{key:"deltaSyncFailed",value:function(){p.default.debug("[GroupsAndRecipientsProvider]: deltaSyncFailed")}}]),t}(h.default));t.default=y},356:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"Anonymous",_id:"guest",providerId:null,email:null,thumbnail:null,language:null,isGuest:!0}},365:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(27),a=i(u),o=n(8),l=i(o),d=s.default.createClass({displayName:"HelpPage",mixins:[a.default],render:function(){return s.default.createElement("div",{className:"row around-xs"},s.default.createElement("div",{className:"col-xs-11 col-sm-10"},s.default.createElement("div",{className:"box"},s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-xs-12"},s.default.createElement("div",{className:"box"},s.default.createElement("h1",null,l.default.t("Help"))))))))}});t.default=d},366:function(e,t,n){"use strict";function i(e,t,n){return e<t?t:e>n?n:e}function r(e){var t=e.type,n=e.values;if(t.indexOf("rgb")>-1)for(var i=0;i<3;i++)n[i]=parseInt(n[i]);var r=void 0;return r=t.indexOf("hsl")>-1?e.type+"("+n[0]+", "+n[1]+"%, "+n[2]+"%":e.type+"("+n[0]+", "+n[1]+", "+n[2],4===n.length?r+=", "+e.values[3]+")":r+=")",r}function s(e){if(4===e.length){for(var t="#",n=1;n<e.length;n++)t+=e.charAt(n)+e.charAt(n);e=t}var i={r:parseInt(e.substr(1,2),16),g:parseInt(e.substr(3,2),16),b:parseInt(e.substr(5,2),16)};return"rgb("+i.r+", "+i.g+", "+i.b+")"}function u(e){if("#"===e.charAt(0))return u(s(e));var t=e.indexOf("("),n=e.substring(0,t),i=e.substring(t+1,e.length-1).split(",");return i=i.map(function(e){return parseFloat(e)}),{type:n,values:i}}function a(e,t){var n=o(e),i=o(t),r=(Math.max(n,i)+.05)/(Math.min(n,i)+.05);return Number(r.toFixed(2))}function o(e){if(e=u(e),e.type.indexOf("rgb")>-1){var t=e.values.map(function(e){return e/=255,e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)});return Number((.2126*t[0]+.7152*t[1]+.0722*t[2]).toFixed(3))}if(e.type.indexOf("hsl")>-1)return e.values[2]/100}function l(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.15;return o(e)>.5?c(e,t):f(e,t)}function d(e,t){return e=u(e),t=i(t,0,1),"rgb"!==e.type&&"hsl"!==e.type||(e.type+="a"),e.values[3]=t,r(e)}function c(e,t){if(e=u(e),t=i(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]*=1-t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]*=1-t;return r(e)}function f(e,t){if(e=u(e),t=i(t,0,1),e.type.indexOf("hsl")>-1)e.values[2]+=(100-e.values[2])*t;else if(e.type.indexOf("rgb")>-1)for(var n=0;n<3;n++)e.values[n]+=(255-e.values[n])*t;return r(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.convertColorToString=r,t.convertHexToRGB=s,t.decomposeColor=u,t.getContrastRatio=a,t.getLuminance=o,t.emphasize=l,t.fade=d,t.darken=c,t.lighten=f},376:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(0),u=i(s),a=n(63),o=i(a),l=n(233),d=i(l),c=n(147),f=i(c),h=n(164),g=(i(h),n(27)),p=i(g),v=n(91),y=i(v),m=n(107),S=i(m),_=n(8),b=i(_),P=n(252),I=i(P),T=n(231),w=i(T),k=n(932),M=(i(k),n(168)),D=i(M),C=n(157),R=i(C),O=n(403),x=i(O),E={zIndex:{tooltip:5e3}},L=u.default.createClass({displayName:"RunAppBar",render:function(){return u.default.createElement(d.default,{title:b.default.t("quizMe"),titleStyle:r({},this.context.customTheme.siteHeader),showMenuIconButton:!1,style:{position:"fixed",top:0}},this.props.renderToolbar&&u.default.createElement(f.default,{style:{right:-12,top:13}},u.default.createElement(R.default,null)))}}),A=u.default.createClass({displayName:"RunApp",mixins:[p.default,(0,o.default)(w.default,"Auth")],childContextTypes:{location:u.default.PropTypes.object,history:u.default.PropTypes.object},getChildContext:function(){return{location:this.props.location,history:this.props.history}},render:function(){var e=this,t=u.default.Children.map(this.props.children,function(t){return u.default.cloneElement(t,{isMobile:e.props.isMobile})}),n=this.state.Auth.toJSON(),i=n.authState,r=n.AuthStates,s=(n.error,n.userProfile,this.props.isMobile);return u.default.createElement(S.default,{muiTheme:(0,y.default)({},E)},u.default.createElement(I.default,{customTheme:(0,D.default)({},s)},u.default.createElement("div",{className:"runWr copyPrevent"},u.default.createElement(L,{renderToolbar:i==r.SIGNED_IN}),u.default.createElement("div",{className:"row around-xs",style:{marginTop:64}},u.default.createElement("div",{style:{paddingTop:40,paddingBottom:20,width:"100%"}},t)))))}});A.contextTypes={customTheme:u.default.PropTypes.object},L.contextTypes={customTheme:u.default.PropTypes.object},t.default=(0,x.default)(A)},378:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["addQuestionDone","addPageDone","addSurveyDone","dialogOpen","dialogClose","setIndex","close","addDecoratorDone"]);t.default=s},383:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(239),s=i(r),u=n(24),a=i(u),o=n(149),l=i(o),d=n(430),c=i(d),f=n(15),h=i(f),g=n(769),p=i(g),v=n(22),y=i(v),m=n(54),S=i(m),_=n(17),b=i(_),P=n(39),I=i(P),T=n(9),w=i(T),k=n(378),M=i(k),D=n(141),C=i(D),R=n(245),O=i(R),x=(n(772),n(28)),E=n(64),L=i(E),A=n(167),N=i(A),q=n(153),K=i(q),j=n(8),Q=i(j),B=n(30),F=i(B),U=n(100),G=(i(U),n(166)),z=(i(G),n(40)),V=i(z),H=n(6),J=i(H),W=n(41),Y=i(W),Z=n(773),$=i(Z),X=n(87),ee=i(X),te=(0,S.default)(),ne=(0,y.default)({listenables:[C.default,F.default],lastState:null,currentSurvey:null,_currentProfile:null,_surveyProvider:null,_delAttributes:["_ensureDefaults","_id","_isDeleted","_rev","_schemaVersion"],init:function(){this.state=w.default.Map({userSurveys:w.default.Map(),showLoader:!1,currentSurvey:null})},getInitialState:function(){return this.state},userChanged:function(e,t){this._currentProfile=t,this._surveyProvider=V.default.get("SurveyDataProvider")},getUserSurvey:function(e){var t=this,n=this.state.getIn(["userSurveys",e]);return n?Promise.resolve(n):this._surveyProvider.getUserSurvey(e).then(function(n){return t.updateState(t.state.setIn(["userSurveys",e],n),!0),n})},updateSurveyState:function(e,t){var n=this;return!e&&e.equals(this.currentSurvey)?Promise.resolve(null):this._surveyProvider.updateUserSurvey(e,!this._currentProfile||this._currentProfile.isGuest).then(function(t){return e=e.setRevision(t.rev),n.currentSurvey=e,n.updateState(n.state.setIn(["userSurveys",n.currentSurvey.getId()],n.currentSurvey).set("currentSurvey",n.currentSurvey)),t}).catch(function(e){if(409==e.status)return n.getUserSurvey(n.currentSurvey.getId()).then(function(e){return n.currentSurvey=e});throw e})},updateState:function(e,t){this.state.equals(e)||(e&&(this.state=e),t||this.trigger(this.state))},addNewSurvey:function(){var e=this;this._surveyProvider.addUserSurvey(null,!this._currentProfile||this._currentProfile.isGuest).then(function(t){J.default.debug("survey added."),e.currentSurvey=t;var n=t.getId();e.updateState(e.state.setIn(["userSurveys",n],t),!0),e.routeToSurvey(n)})},exportToJSON:function(e){var t=this;this.getUserSurvey(e).then(function(e){var n=e.getTitle(),i=e.toJS();t._delAttributes.forEach(function(e){delete i[e]}),i=t.validateSurveyIds(i);var r=new Blob([JSON.stringify(i)],{type:"JSON"});$.default.saveAs(r,n+".json")})},uploadSurvey:function(e){this.updateState(this.state.setIn(["showLoader"],!0));var t=this;if(e){var n=e[0],i=new FileReader,r=n.name;i.onload=function(e){t.validateJSONFile(e.target.result).then(function(e){return t._delAttributes.forEach(function(t){e.hasOwnProperty(t)&&delete e[t]}),e}).then(function(e){t.importSurvey(e)}).catch(function(e){t.state=t.state.setIn(["showLoader"],!1),t.updateState(t.state),L.default.notify(x.Notifications.ERROR,Q.default.t("File "+r+" contains syntactically invalid JSON data."))})},i.readAsText(n)}},validateJSONFile:function(e){return new Promise(function(t,n){try{e=JSON.parse(e),t(e)}catch(e){n()}})},importSurvey:function(e){var t=this;e=(0,h.default)(e,{_id:(0,b.default)().str,_rev:null,_ensureDefaults:!0}),e=this.validateSurveyIds(e),e=te.fromModel(e);var n=e.getTitle();this._surveyProvider.addUserSurvey(e,!this._currentProfile||this._currentProfile.isGuest).then(function(e){t.currentSurvey=e;var i=e.getId();t.updateState(t.state.setIn(["userSurveys",i],e)),t.updateState(t.state.setIn(["showLoader"],!1),!0),t.routeToSurvey(i),L.default.notify(x.Notifications.INFO,Q.default.t("The Survey "+n+" has been imported successfully"))})},validateSurveyIds:function(e){var t=(0,c.default)(e,"pages"),n=(0,c.default)(e,"pageItems"),i=[],r={};return t.forEach(function(e,t){var s=(0,b.default)().str,u=(0,c.default)(e,"pageItemRefs"),a=[];e._id=s,u.forEach(function(e,t){var i=(0,c.default)(n,e);i._id=(0,b.default)().str,i.parentPageId=s,r[i._id]=i,a.push(i._id)}),e.pageItemRefs=a,i.push(e)}),e._id=(0,b.default)().str,e.pages=i,e.pageItems=r,e},cloneSurvey:function(e){var t=this;this.getUserSurvey(e).then(function(e){var n=e.clone().setTitle("Copy of "+e.getTitle());return n=n.setRevision(null),n=t.validateSurveyIds(n.toJS()),n=te.fromModel(n),t._surveyProvider.addUserSurvey(n,!t._currentProfile||t._currentProfile.isGuest)}).then(function(e){J.default.debug("survey clonned."),t.currentSurvey=e;var n=e.getId();t.updateState(t.state.setIn(["userSurveys",n],e).set("currentSurvey",t.currentSurvey),!0),t.routeToSurvey(n)})},deleteSurvey:function(e){var t=this,n=null;this.getUserSurvey(e).then(function(e){return n=e,t._surveyProvider.deleteUserSurvey(n)}).then(function(i){var r=n.getTitle();J.default.debug("survey deleted.",i),t.updateState(t.state.deleteIn(["userSurveys",e]),!0),n=n.setRevision(i.rev),L.default.notify(x.Notifications.INFO,Q.default.t("The Survey "+r+" has been deleted"),Q.default.t("undo"),C.default.undoSurvey.bind(null,n))})},undoSurvey:function(e){var t=this;this._surveyProvider.undoSurvey(e).then(function(n){e=e.setRevision(n.rev),t.updateState(t.state.setIn(["userSurveys",e.getId()],e))})},getSurvey:function(e,t){return e.getIn(["userSurveys",t])},dialogOpen:function(e,t,n){M.default.dialogOpen(e,t,n)},undo:function(){var e=this,t=[];this.lastState.get("userSurveys").map(function(n){var i=e.state.getIn(["userSurveys",n.getId()]);n!=i&&(n=n.setRevision(i.getRevision()),t.push(n))}),this._surveyProvider.undoUserSurveys(t).then(function(t){var n=e.currentSurvey.getId();e.currentSurvey&&t[n]&&(e.currentSurvey=t[n]),e.updateState(e.state.set("userSurveys",e.state.get("userSurveys").merge(w.default.fromJS(t))).set("currentSurvey",e.currentSurvey))})},routeToSurvey:function(e){var t=(0,I.default)({queryKey:!1}),n=t.createLocation("/surveys/design/edit/"+e);t.push(n)},routeToSurveys:function(){var e=(0,I.default)({queryKey:!1}),t=e.createLocation("/surveys");e.push(t)},reset:function(){this.updateState(this.state.set("currentSurvey",null))},loadSurvey:function(e){var t=this;this.getUserSurvey(e).then(function(e){t.currentSurvey=e,t.updateState(t.state.set("currentSurvey",e))})},_getSurveyById:function(e){var t=this;return new Promise(function(n,i){t._surveyProvider=V.default.get("SurveyDataProvider",{SurveyModelBuilder:te}),t._surveyProvider.getUserSurvey(e).then(function(e){return n(e)})})},optionsSurveyHeaderOpen:function(e){var t=(0,N.default)(),n={showHeader:this.currentSurvey.getShowHeader(),title:this.currentSurvey.getTitle(),description:this.currentSurvey.getDescription(),questionDisplay:this.currentSurvey.getQuestionDisplay(),minimumMarks:this.currentSurvey.getMinimumMarks()||0};t.addSettingsGroup(Q.default.t("General")).addSetting("showHeader","bool",Q.default.t("Show survey header?")).addSetting("logo","imagepicker",Q.default.t("Logo")).addSetting("title","string",Q.default.t("Survey title"),{required:!0,maxLength:x.SurveyModelDefaults.MaxSurveyTitleLength}).addSetting("description","string",Q.default.t("Survey description"),{multiLine:!0,rows:1,rowsMax:5,maxLength:x.SurveyModelDefaults.MaxSurveySubTitleLength}).addSetting("questionDisplay","choice",Q.default.t("Question display"),{choice:{question:Q.default.t("One question at a time"),page:Q.default.t("One page at a time"),all:Q.default.t("Show all questions in one screen")}}).addSetting("minimumMarks","string",Q.default.t("Minimum marks"),{type:"number"}),K.default.open(t.getSettingsDefinition(),n,C.default.optionsSurveyHeaderDone,null,e)},optionsSurveyHeaderDone:function(e){if(this.currentSurvey){var t=e.title,n=e.questionDisplay,i=e.minimumMarks,r=e.timer,s=e.timeout,u=e.startFrom,a=e.showMarksRunMode,o=e.restrictPrevious;t=(0,l.default)(t),this.updateSurveyState(this.currentSurvey.setTitle(t).setQuestionDisplay(n).setMinimumMarks(i).setIsTimer(r).setTimeout(s).setStartFrom(u).setShowMarksRunMode(a).setRestrictPrevious(o))}},setQuestionDisplay:function(e){this.updateSurveyState(this.currentSurvey.setQuestionDisplay(e))},setSurveyTitle:function(e){e!=this.currentSurvey.getTitle()&&this.updateSurveyState(this.currentSurvey.setTitle(e))},setSectionTitleDescription:function(e,t,n){var i=(0,l.default)(e),r=(0,l.default)(t);if(-1!=n){var s=this.currentSurvey.getPage(n);s=s.setTitle(i).setDescription(r),this.updateSurveyState(this.currentSurvey.updatePage(n,s))}},optionPageOpen:function(e,t){var n=(0,N.default)(),i=this.currentSurvey.getPage(e),r={showHeader:i.getShowHeader(),title:i.getTitle(),description:i.getDescription(),randomizeQuestions:i.getRandomizeQuestions(),logic:i.getLogic(),skipTo:i.getSkipTo()};n.addSettingsGroup("Advance settings").addSetting("showHeader","bool",Q.default.t("Show page header?"),{isPrimary:!0}).addSetting("randomizeQuestions","bool",Q.default.t("Randomize questions?"),{isPrimary:!0}).addSetting("logic","bool",Q.default.t("Use Logic?"),{isPrimary:!0}).addSetting("skipTo","choice",Q.default.t("Skip to"),{choice:this.getChoice(e)}),K.default.open(n.getSettingsDefinition(),r,C.default.optionPageDone.bind(C.default,e),null,t)},getChoice:function(e){for(var t=this.currentSurvey.getPagesSize(),n={},i=e+1;i<t;i++)n[i]="Section "+(i+1);return n.eos=Q.default.t("End of Survey"),n},optionPageDone:function(e,t){if(this.currentSurvey){var n=t.title,i=t.description,r=t.logic,s=t.skipTo,u=t.maxPageItemsAllowed;if(n=(0,l.default)(n),i=(0,l.default)(i),-1!=e){var a=this.currentSurvey.getPage(e);a=a.setTitle(n).setDescription(i).setMaxPageItemsAllowed(u).setLogic(r),r&&(a=a.setSkipTo(s)),this.updateSurveyState(this.currentSurvey.updatePage(e,a))}}},randomizePageItems:function(e,t){var n=this.currentSurvey.getPage(e);n=n.setRandomizeQuestions(t),this.updateSurveyState(this.currentSurvey.updatePage(e,n))},validateCode:function(e){return(0,Y.default)({url:"/validate/code",method:"POST",data:{code:e}}).then(function(e){return e.data.status?Promise.reject(e.data.error):Promise.resolve()}).catch(function(e){throw e})},optionsPageItemOpen:function(e,t){var n=(0,N.default)(),i=this.currentSurvey.getPageItem(e);if(i)if("question"==i.getType()){var r={title:i.getTitle(),required:"yesno"!=i.getSubType()&&"code"!=i.getSubType()&&i.getRequired(),quizMode:("yesno"==i.getSubType()||"multivalue"==i.getSubType())&&i.getQuizMode(),options:"multivalue"==i.getSubType()&&i.getOptions(),questionDisplayType:"multivalue"==i.getSubType()&&i.getDisplayType(),answer:("yesno"==i.getSubType()||"multivalue"==i.getSubType())&&i.getAnswer(),codeValidator:"code"==i.getSubType()&&i.getCodeValidator(),marks:("yesno"==i.getSubType()||"multivalue"==i.getSubType())&&i.getMarks(),logic:("yesno"==i.getSubType()||"multivalue"==i.getSubType())&&i.getLogic(),skipTo:("yesno"==i.getSubType()||"multivalue"==i.getSubType())&&this.getModifiedValue(i.getSkipTo().toJS()),markdown:("multivalue"==i.getSubType()||"code"==i.getSubType())&&i.getMarkdown(),defaultTemplate:"code"==i.getSubType()&&i.getDefaultTemplate(),language:"code"==i.getSubType()&&i.getLanguage(),questionTimeOut:i.getQuestionTimeOut()};"code"==i.subType&&(n.addSettingsGroup("General").addSetting("title","string",Q.default.t("Question title"),{required:!0,multiLine:!0,focusFirst:!0}).addSetting("markdown","bool",Q.default.t("markdown"),{isPrimary:!0,icon:"icon-embed2"}).addSetting("questionTimeOut","string",Q.default.t("Question timeout (minutes)"),{type:"number",textOnly:!0}),n.addSettingsGroup("Code").addSetting("defaultTemplate","code",Q.default.t("Sample code")).addSetting("language","choice",Q.default.t("Select language"),{choice:{javascript:Q.default.t("Javascript"),c:Q.default.t("C"),cpp:Q.default.t("C++"),csharp:Q.default.t("C#"),java:Q.default.t("Java"),html:Q.default.t("HTML")},isOtherHeader:!0}),n.addSettingsGroup("Code validation").addSetting("codeValidator","code",Q.default.t("Code validation test"),{customValidation:this.validateCode}).addSetting("validator","codeValidator")),"singletext"!=i.subType&&"datepicker"!=i.subType||n.addSettingsGroup("General").addSetting("title","string",Q.default.t("Question title"),{required:!0,maxLength:x.SurveyModelDefaults.MaxPageTitleLength,focusFirst:!0}).addSetting("required","bool",Q.default.t("Required"),{isPrimary:!0,icon:"icon-asterisk"}).addSetting("questionTimeOut","string",Q.default.t("Question timeout (minutes)"),{type:"number",textOnly:!0}),"yesno"==i.subType&&n.addSettingsGroup("General").addSetting("title","string",Q.default.t("Question title"),{required:!0,maxLength:x.SurveyModelDefaults.MaxPageTitleLength,focusFirst:!0}).addSetting("quizMode","bool",Q.default.t("Quiz"),{isPrimary:!0,icon:"icon-quiz_Q_A"}).addSetting("answer","answer",Q.default.t("Correct answer")).addSetting("marks","string",Q.default.t("Marks"),{type:"number",textOnly:!0}).addSetting("markdown","bool",Q.default.t("markdown"),{isPrimary:!0,icon:"icon-embed2"}).addSetting("questionTimeOut","string",Q.default.t("Question timeout (minutes)"),{type:"number",textOnly:!0}),"multivalue"==i.subType&&n.addSettingsGroup("General").addSetting("title","string",Q.default.t("Question title"),{required:!0,focusFirst:!0,multiLine:!0}).addSetting("questionDisplayType","choice",Q.default.t("Display choices as"),{choice:{dropdown:Q.default.t("Dropdown"),radio:Q.default.t("Radio"),checkbox:Q.default.t("Checkbox")},isOtherHeader:!0}).addSetting("required","bool",Q.default.t("Required"),{isPrimary:!0,icon:"icon-asterisk"}).addSetting("quizMode","bool",Q.default.t("Quiz"),{isPrimary:!0,icon:"icon-quiz_Q_A"}).addSetting("options","array",Q.default.t("Options"),{options:i.options,answer:i.getAnswer()}).addSetting("marks","string",Q.default.t("Marks"),{type:"number",textOnly:!0}).addSetting("logic","bool",Q.default.t("Logic"),{isPrimary:!0,icon:"icon-bulb"}).addSetting("skipTo","linkedchoice",Q.default.t("Skip to"),{linkedchoice:this.getLinkedChoice(e),options:i.options.toArray()}).addSetting("markdown","bool",Q.default.t("markdown"),{isPrimary:!0,icon:"icon-embed2"}).addSetting("questionTimeOut","string",Q.default.t("Question timeout (minutes)"),{type:"number",textOnly:!0}),K.default.open(n.getSettingsDefinition(),r,C.default.optionsPageItemDone.bind(C.default,e),null,t)}else{var s={};"text"==i.getSubType()&&(s={title:i.getTitle(),description:i.getDescription()},n.addSettingsGroup().addSetting("title","string",Q.default.t("Section title"),{maxLength:x.SurveyModelDefaults.MaxPageTitleLength,focusFirst:!0}).addSetting("description","string",Q.default.t("Section description"),{multiLine:!0,rows:1,rowsMax:5,maxLength:x.SurveyModelDefaults.MaxPageSubTitleLength})),K.default.open(n.getSettingsDefinition(),s,C.default.optionsPageItemDone.bind(C.default,e),null,t)}},getModifiedValue:function(e){var t={};return(0,a.default)(e,function(e,n){t[n]={title:e.pageNo,linked:e.questionNo}}),t},getLinkedChoice:function(e){for(var t=this.currentSurvey.getPagesSize(),n=!1,i=!1,r={},s=0;s<t;s++){var u=this.currentSurvey.getPage(s),a=u.getPageItemRefIndex(e);if(i&&(n=!0),-1!=a&&(a!=u.getPageItemRefsSize()-1&&(n=!0),i=!0),n){var o=this.getQuestionChoice(u.getPageItemRefs().toArray(),a);r[s]={title:"Section "+(s+1),linked:o}}}return r.eos={title:Q.default.t("End of Survey")},r},getQuestionChoice:function(e,t){for(var n={},i=0,r=0;r<e.length;r++){if(this.currentSurvey.getPageItem(e[r]).isQuestion){if(++i,t>=r)continue;n[i]="Question "+i}}return n},optionsPageItemDone:function(e,t){var n=this;if(this.currentSurvey){var i=t.title,r=t.description,s=t.required,u=t.quizMode,a=t.answer,o=t.marks,d=t.questionDisplayType,c=t.logic,f=t.skipTo,h=t.markdown,g=t.codeValidator,p=t.defaultTemplate,v=t.language,y=t.questionTimeOut;i=(0,l.default)(i),r=(0,l.default)(r),g=(0,l.default)(g),p=(0,l.default)(p),v=(0,l.default)(v);var m=this.currentSurvey.getPageItem(e);m=m.setTitle(i),m&&("question"==m.getType()?(m=m.setQuestionTimeOut(y),"yesno"!=m.getSubType()&&"code"!=m.getSubType()&&(m=m.setRequired(s)),"code"==m.getSubType()&&(m=m.setCodeValidator(g).setDefaultTemplate(p).setMarkdown(h).setLanguage(v)),"yesno"==m.getSubType()&&(m=m.setQuizMode(u).setAnswer(a).setMarks(o).setLogic(c),m=this.setSkipTo(m,f)),"multivalue"==m.getSubType()&&(m=m.setOptions(t.options).setQuizMode(u).setAnswer(a).setMarks(o).setDisplayType(d).setLogic(c).setMarkdown(h),m=this.setSkipTo(m,f)),this.updateSurveyState(this.currentSurvey.updatePageItem(m)).then(function(){return n.calculateSectionMarks()})):(m=m.setDescription(r),this.updateSurveyState(this.currentSurvey.updatePageItem(m)).then(function(){return n.calculateSectionMarks()})))}},calculateSectionMarks:function(){var e=this.currentSurvey,t=this.currentSurvey.getPages(),n=0;return t.forEach(function(t,i){var r=t.getPageItemRefs(),s=0,u=void 0;r.forEach(function(t){u=e.getPageItem(t);var n=u.getSubType(),i=void 0,r=void 0;"multivalue"!=n&&"yesno"!=n||(i=u.getQuizMode(),r=u.getMarks()),i&&(s+=parseInt(r))}),n+=s,t=t.setPageMarksTotal(s),e=e.updatePage(i,t)}),this.updateSurveyState(e.setSurveyMarksTotal(n))},setSkipTo:function(e,t){return(0,a.default)(t,function(t,n){var i={pageNo:t.title,questionNo:t.linked};e=e.setSkipTo(n,i)}),e},setUpdatedSurvey:function(e){var t=this;this._surveyProvider.getUserSurvey(e).then(function(e){t.updateState(t.state.setIn(["userSurveys",e.getId()],e).set("currentSurvey",e))})},addQuestionDone:function(e,t,n){var i=this.currentSurvey.getPage((0,s.default)(t)?t:this.currentSurvey.getPagesSize()-1),r=te.PageItemFactory.question(te.PageItemFactory.QuestionTypes[e.subType]);n+1<i.getPageItemRefsSize()&&(0,s.default)(t)?this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(i,r,n+1)):this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(i,r))},addDecoratorDone:function(e,t,n){var i=this.currentSurvey.getPage((0,s.default)(t)?t:this.currentSurvey.getPagesSize()-1),r=te.PageItemFactory.decorator(te.PageItemFactory.DecoratorTypes[e.subType],e);r=e.title||e.description?r.setTitle(e.title).setDescription(e.description):r,n+1<i.getPageItemRefsSize()&&(0,s.default)(t)?this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(i,r,n+1)):this.updateSurveyState(this.currentSurvey.addPageItemToPageAndSurvey(i,r))},addPageDone:function(e){var t=te.PageFactory._createDefaultPage();e<this.currentSurvey.getPagesSize()?this.updateSurveyState(this.currentSurvey.insertPage(e,t)):this.updateSurveyState(this.currentSurvey.pushPage(t))},deleteQuestion:function(e,t){this.storeLastState(),this.updateSurveyState(this.currentSurvey.removePageItem(t)).then(function(e){e&&(J.default.debug("survey deleted.",e),K.default.close(),L.default.notify(x.Notifications.INFO,Q.default.t("The Question has been deleted"),Q.default.t("undo"),C.default.undo))})},changeQuestion:function(e,t,n,i){var r=this.currentSurvey.getPageItem(t),s=te.PageItemFactory.question(te.PageItemFactory.QuestionTypes[i]);if(r.getSubType()!=i){var u=r.getTitle(),a="yesno"!=r.getSubType()&&"code"!=r.getSubType()&&r.getRequired();s=s.setTitle(u),"yesno"!=s.getSubType()&&"code"!=s.getSubType()&&(s=s.setRequired(a));var o=this.currentSurvey.getPage(e);this.currentSurvey=this.currentSurvey.addPageItemToPageAndSurvey(o,s,n),this.currentSurvey=this.currentSurvey.removePageItem(t),this.updateSurveyState(this.currentSurvey)}},deletePage:function(e){this.storeLastState(),this.updateSurveyState(this.currentSurvey.removePage(e)).then(function(e){e&&(J.default.debug("survey deleted.",e),L.default.notify(x.Notifications.INFO,Q.default.t("The Page has been deleted"),Q.default.t("undo"),C.default.undo))})},movePageItem:function(e,t,n,i,r){var s=this.currentSurvey.getPage(t);if(t===i)this.updateSurveyState(this.currentSurvey.updatePage(t,s.movePageItemRef(r,n)));else{var u=this.currentSurvey,a=u.getPageItem(e);u=u.removePageItem(a),u=u.addPageItemToPageAndSurvey(s,a,n),this.updateSurveyState(u)}},moveQuestion:function(e,t,n,i){var r=this.currentSurvey.getPage(t);if(n){var s=this.currentSurvey,u=s.getPage(e),a=s.getPageItem(n);s=s.removePageItem(a),s=e<t?s.addPageItemToPageAndSurvey(u,a):s.addPageItemToPageAndSurvey(u,a,0),this.updateSurveyState(s)}else this.updateSurveyState(this.currentSurvey.updatePage(this.currentSurvey.getPageIndex(r),r.movePageItemRef(i,e)))},movePage:function(e,t){this.updateSurveyState(this.currentSurvey.movePage(e,t))},storeLastState:function(){this.lastState=this.state},shuffleQuestions:function(e){for(var t=this.currentSurvey.getPage(e),n=t.getPageItemRefs(),i=t.getPageItemRefsSize(),r=(0,p.default)(n.toArray()),s=0;s<i;s++)t=t.removePageItemRef(0);for(var u=0;u<i;u++)t=t.addPageItemRef(r[u]);this.updateSurveyState(this.currentSurvey.updatePage(e,t))},startTest:function(e){var t=this;this.currentSurvey?O.default.startTest(this.currentSurvey):this._getSurveyById(e).then(function(e){t.currentSurvey=e,O.default.startTest(e)})},stopTest:function(e){var t=this;new ee.default("test").close().then(function(){var e=t.currentSurvey.getId();t.routeToSurvey(e)})}});t.default=ne},386:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(56),s=i(r),u=n(320),a=i(u),o=n(434),l=i(o),d=n(791),c=i(d),f=n(412),h=i(f),g=n(24),p=i(g),v=n(22),y=i(v),m=n(54),S=i(m),_=n(165),b=i(_),P=n(72),I=i(P),T=n(17),w=i(T),k=n(9),M=i(k),D=n(39),C=i(D),R=n(64),O=i(R),x=n(28),E=n(8),L=i(E),A=n(40),N=i(A),q=n(143),K=i(q),j=n(30),Q=i(j),B=n(6),F=(i(B),n(41)),U=i(F),G=n(32),z=i(G),V=n(155),H=(i(V),n(167)),J=i(H),W=n(153),Y=i(W),Z=(0,S.default)(),$=(0,b.default)(),X=(0,y.default)({listenables:[K.default,Q.default],limit:x.contactView.navigation.pageSize,skip:0,key:"",totalRows:null,allSelectedContacts:M.default.Map(),_allResponses:M.default.Map(),getProviders:function(){var e=[];return(0,p.default)(x.OAuth,function(t,n){e.push(n)}),e},init:function(){this.state=M.default.fromJS({publishedSurveys:M.default.Map(),currentPublishedSurveysPage:null,totalPublishedSurveysPage:0,isAuthorizedUser:!1,selectedSurveyId:null,surveys:M.default.Set(),stepIndex:null,selectedContacts:M.default.Map(),currentSelectedContactsPage:null,totalSelectedContactsPage:0,allSelectedContactsIds:M.default.Map(),selectedProviders:M.default.Set(this.getProviders()),askLocation:!1,locationRestrict:!1,locationRequired:!1,currentLocation:{},errorMessage:null,isSurveyAvailabilitySet:!1,surveyStartDateTime:null,surveyEndDateTime:null,myLocation:{latitude:null,longitude:null},selectedLocations:M.default.Set(),mapCenterLocation:{},currentFocusedLocation:{},zoomLevel:null,blink:!1,selectedForNotification:M.default.Set(),userProfile:{},currentPublishedSurvey:null,totalResponsePage:0,currentResponsePage:0,currentResponses:M.default.Map()})},getInitialState:function(){return this.state},updateState:function(e,t){this.state.equals(e)||(this.state=e,t||this.trigger(this.state))},getPublishedSurvey:function(e){var t=this.state.getIn(["publishedSurveys",e]);return t?z.default.resolve(t):this._publishedSurveyProvider.getUserPublishedSurvey(e)},initCurrentPublishedSurvey:function(e){var t=this;this.getPublishedSurvey(e).then(function(n){t.updateState(t.state.set("currentPublishedSurvey",n).set("askLocation",n.getAskLocation()).set("locationRequired",n.getLocationRequired()).set("locationRestrict",n.getLocationRestrict()).set("selectedLocations",M.default.Set(n.getSelectedLocations())).setIn(["publishedSurveys",e],n).set("isSurveyAvailabilitySet",n.getIsSurveyAvailabilitySet()).set("surveyEndDateTime",new Date(n.getSurveyEndDateTime())).set("surveyStartDateTime",new Date(n.getSurveyStartDateTime())))})},enableNotifications:function(e){this.updateState(this.state.set("currentPublishedSurvey",this.state.getIn(["currentPublishedSurvey"]).setNotification(e)))},setRecipientsForNotifications:function(e){this.updateState(this.state.set("currentPublishedSurvey",this.state.getIn(["currentPublishedSurvey"]).setRecipientsForNotification(e)))},setLocationSettings:function(e){return e.set("askLocation",this.state.get("askLocation")).set("locationRequired",this.state.get("locationRequired")).set("locationRestrict",this.state.get("locationRestrict")).set("selectedLocations",this.state.get("selectedLocations").toJS())},setSurveyAvailibilitySettings:function(e){return e.set("isSurveyAvailabilitySet",this.state.get("isSurveyAvailabilitySet")).set("surveyStartDateTime",this.state.get("surveyStartDateTime")).set("surveyEndDateTime",this.state.get("surveyEndDateTime"))},updateCurrentPublishedSurvey:function(){var e=this;if(!this.updating){this.updating=!0;var t=this.state.getIn(["currentPublishedSurvey"]);t=this.setLocationSettings(t),t=this.setSurveyAvailibilitySettings(t),this._publishedSurveyProvider.updateUserPublishedSurvey(t).then(function(t){e.updateState(e.state.set("currentPublishedSurvey",t).setIn(["publishedSurveys",t.getId()],t).set("askLocation",t.getAskLocation()).set("locationRequired",t.getLocationRequired()).set("locationRestrict",t.getLocationRestrict()).set("isSurveyAvailabilitySet",t.getIsSurveyAvailabilitySet()).set("surveyStartDateTime",t.getSurveyStartDateTime()).set("surveyEndDateTime",t.getSurveyEndDateTime()).set("selectedLocations",M.default.Set(t.getSelectedLocations()))),e.updating=!1,O.default.notify(x.Notifications.INFO,L.default.t("Published survey updated"))})}},userChanged:function(e,t){this._userProfile=t,this._surveyProvider=N.default.get("SurveyDataProvider",{SurveyModelBuilder:Z}),this._groupsAndRecipientsProvider=N.default.get("GroupsAndRecipientsProvider",{ContactBuilder:$}),this._publishedSurveyProvider=N.default.get("PublishedSurveyProvider"),this.updateState(this.state.set("isAuthorizedUser",!t.isGuest).set("userProfile",t))},setSurveyId:function(e){e&&this.updateState(this.state.set("selectedSurveyId",e),!0)},addContact:function(e){this.allSelectedContacts=this.allSelectedContacts.setIn([e._id],e),this.updateNavigationAndSelectedContactsState(this.state.get("currentSelectedContactsPage")),this.configureSelectedIds()},optionsInvitationOpen:function(e,t){var n=(0,J.default)(),i={to:[],cc:[],bcc:[],subject:"",link:e,html:""};n.addSettingsGroup(L.default.t("Invite people")).addSetting("to","groups",L.default.t("Send invitation to"),{required:!0,requiredText:L.default.t("At least one email id is required"),hintText:"someone@domain.com",showRequiredStatus:!0}).addSetting("cc","groups",L.default.t("CC"),{hintText:"someone@domain.com",showRequiredStatus:!1}).addSetting("bcc","groups",L.default.t("BCC"),{hintText:"someone@domain.com",showRequiredStatus:!1}).addSetting("subject","string",L.default.t("Subject"),{required:!0,hintText:L.default.t("A short subject for the invite mail"),showRequiredStatus:!0}).addSetting("link","copy",L.default.t("Survey link"),{required:!0,disabled:!0}).addSetting("html","richText",L.default.t("Message"),{required:!0,showRequiredStatus:!0,rteDefault:'<p>Hi,</p><p>Please click here to start exam <a href="'+e+'">'+e+"</a></p><p>Thanks and regards,</p>",textDefault:"Hi,\n          Please click here to start exam "+e+"\n          Thanks and regards,"}),Y.default.open(n.getSettingsDefinition(),i,K.default.optionsInvitationDone,null,t)},optionsInvitationDone:function(e){e.to.length&&(e=(0,h.default)(e,"link"),(0,U.default)({url:"/invite",method:"POST",data:{invitation:e}}).then(function(){O.default.notify(x.Notifications.INFO,L.default.t("Invitation completed"))}))},addContactsByGroup:function(e){var t=this;this._groupsAndRecipientsProvider.getRecipientsByGroup(e,!0).then(function(e){(0,p.default)(e.docs,function(e){t.allSelectedContacts=t.allSelectedContacts.setIn([e._id],e)}),t.configureSelectedIds(),t.updateNavigationAndSelectedContactsState(t.state.get("currentSelectedContactsPage"))})},removeContact:function(e){this.allSelectedContacts=this.allSelectedContacts.deleteIn([e]),this.configureSelectedIds(),this.updateNavigationAndSelectedContactsState(this.state.get("currentSelectedContactsPage"))},configureSelectedIds:function(){var e=this.allSelectedContacts.map(function(e){return e._id});this.updateState(this.state.set("allSelectedContactsIds",e))},startPublish:function(e){var t=this;if(this.state.get("isAuthorizedUser"))return this._surveyProvider.getUserSurveysIdWithTitle().then(function(n){if(t.updateState(t.state.set("surveys",M.default.Set(n))),!e)return t.updateState(t.state.set("selectedSurveyId",e)),void t.routeToPublish();t.setSurveyId(e),t.next()});O.default.notify(x.Notifications.INFO,L.default.t("You can publish your surveys after you login"))},routeToPublish:function(e){((0,c.default)(e)||(0,l.default)(e)||(0,a.default)(e))&&(e=0),this.updateState(this.state.set("stepIndex",e));var t=(0,C.default)({queryKey:!1}),n=t.createLocation("/surveys/publish/step"+(e+1));t.push(n)},routeToSurveys:function(){var e=(0,C.default)({queryKey:!1}),t=e.createLocation("/surveys");e.push(t)},next:function(){if(!this.state.get("selectedSurveyId"))return void O.default.notify(x.Notifications.WARNING,L.default.t("You must select survey."));this.allSelectedContacts.size&&(this.updateState(this.state.set("currentSelectedContactsPage",null).set("totalSelectedContactsPage",0)),this.updateNavigationAndSelectedContactsState()),this.routeToPublish(this.state.get("stepIndex")+1)},prev:function(){this.allSelectedContacts.size&&(this.updateState(this.state.set("currentSelectedContactsPage",null).set("totalSelectedContactsPage",0)),this.updateNavigationAndSelectedContactsState()),this.routeToPublish(this.state.get("stepIndex")-1)},reset:function(){this.allSelectedContacts=M.default.Map(),this.updateState(this.state.set("stepIndex",0).set("selectedSurveyId",null).set("allSelectedContactsIds",M.default.Map()).set("selectedContacts",M.default.Map()).set("currentPublishedSurvey",null).set("askLocation",null).set("locationRequired",null).set("locationRestrict",null).set("isSurveyAvailabilitySet",null).set("surveyStartDateTime",null).set("surveyEndDateTime",null).set("selectedLocations",M.default.Set()))},cancel:function(){this.reset(),this.routeToSurveys()},getPublishSurvey:function(e,t){var n={};if(n.surveyId=e.getId(),n.survey=e.toJS(),t!=x.distributionTypes.commonlink){if(!this.state.get("selectedContacts").size)return void O.default.notify(x.Notifications.WARNING,L.default.t("You must select contacts"));n.contacts=this.state.get("selectedContacts").map(function(e){return{email:e.email,name:e.fullName,responseId:(0,w.default)().str}}).toJS()}else n.contacts=M.default.Map();n.providers=this.state.get("selectedProviders").toArray();var i=this.state.get("selectedForNotification").toArray();return n.askLocation=this.state.get("askLocation"),n.locationRequired=this.state.get("locationRequired"),n.locationRestrict=this.state.get("locationRestrict"),n.isSurveyAvailabilitySet=this.state.get("isSurveyAvailabilitySet"),n.surveyStartDateTime=this.state.get("surveyStartDateTime")&&this.state.get("surveyStartDateTime").toISOString(),n.surveyEndDateTime=this.state.get("surveyEndDateTime")&&this.state.get("surveyEndDateTime").toISOString(),n.selectedLocations=this.state.get("selectedLocations").toJS(),n.notification=!!i.length,n.recipientsForNotification=i,n},setMailsForNotification:function(e){this.updateState(this.state.set("selectedForNotification",M.default.Set(e)))},finish:function(e){var t=this;return e?this.state.get("selectedSurveyId")?void this._surveyProvider.getUserSurvey(this.state.get("selectedSurveyId")).then(function(n){var i=t.getPublishSurvey(n,e);return t._publishedSurveyProvider.addUserPublishedSurvey(i)}).then(function(e){t.updateState(t.state.setIn(["publishedSurveys",e.getId()],e),!0),t.reset(),t.routeToSurveys()}):void O.default.notify(x.Notifications.WARNING,L.default.t("You must select survey.")):void this.routeToPublish(1)},removeSharedLinks:function(e){var t=this;this._publishedSurveyResponseProvider=N.default.get("PublishedSurveyResponeseProvider");var n=e.map(function(e){return z.default.try(function(){return e.completed?t._publishedSurveyResponseProvider.getResponse(e.responseId).then(function(e){if(!e)return z.default.try(function(){return z.default.reject({error:(0,L.default)("Document not found")})});if(!e.sharedInformation)return z.default.try(function(){return z.default.reject({error:(0,L.default)("No shared information contain")})});var n=e.sharedInformation.id;return n?z.default.try(function(){return(0,U.default)({url:"/sharedContent/"+n,method:"DELETE"}).then(function(){return e.sharedInformation={link:"",id:""},t._publishedSurveyResponseProvider.setResponse(e)})}):z.default.try(function(){return z.default.reject({error:(0,L.default)("No shared information contain")})})}):z.default.try(function(){return z.default.resolve()})})}).toArray();return(0,I.default)(n)},deletePublishedSurvey:function(e){var t=this,n=null;this.getPublishedSurvey(e).then(function(e){return n=e,t.removeSharedLinks(n.getContacts())}).then(function(){return t._publishedSurveyProvider.deleteUserPublishedSurvey(n)}).then(function(){t.updateState(t.state.deleteIn(["publishedSurveys",e]),!0),O.default.notify(x.Notifications.INFO,L.default.t("Published survey has been deleted"))})},tabChanged:function(){this.reset()},nextSelectedContactsPage:function(){var e=this.state.get("currentSelectedContactsPage")+1;this.updateNavigationAndSelectedContactsState(e)},prevSelectedContactsPage:function(){var e=this.state.get("currentSelectedContactsPage")-1;this.updateNavigationAndSelectedContactsState(e)},jumpToSelectedContactsPage:function(e){this.updateNavigationAndSelectedContactsState(e)},updateNavigationAndSelectedContactsState:function(e){var t=Math.ceil(this.allSelectedContacts.size/this.limit),n=this.allSelectedContacts.sortBy(function(e){return e.fullName.toLowerCase()}),i=e||t&&0;i+1>t&&(i=t-1),this.updateState(this.state.set("totalSelectedContactsPage",t).set("currentSelectedContactsPage",i).set("selectedContacts",n.skip(Math.floor(i*this.limit)).take(this.limit)))},updateProviders:function(e,t){var n=this.state.get("selectedProviders");if(t&&!n.has(e)&&(n=n.add(e)),!t&&n.has(e)&&(n=n.remove(e)),0==n.size)return void O.default.notify(x.Notifications.WARNING,L.default.t("At least one provider is require"));this.updateState(this.state.set("selectedProviders",n))},updateAskLocation:function(){var e=this.state.get("locationRequired"),t=this.state.get("locationRestrict"),n=this.state.get("askLocation");e||t?this.updateState(this.state.set("askLocation",!0)):this.updateState(this.state.set("askLocation",!n))},updateSurveyAvailability:function(){var e=this.state.get("isSurveyAvailabilitySet");this.updateState(this.state.set("isSurveyAvailabilitySet",!e))},updateLocationRequired:function(){var e=this.state.get("locationRequired"),t=this.state.get("locationRestrict");if(e){if(t)return;this.updateState(this.state.set("locationRequired",!e))}else this.updateState(this.state.set("askLocation",!0).set("locationRequired",!e))},updateSurveyStartDateTime:function(e){this.updateState(this.state.set("surveyStartDateTime",e))},updateSurveyEndDateTime:function(e){this.updateState(this.state.set("surveyEndDateTime",e))},updateLocationRestrict:function(){var e=this.state.get("locationRestrict");e?this.updateState(this.state.set("locationRestrict",!e)):this.updateState(this.state.set("askLocation",!0).set("locationRequired",!0).set("locationRestrict",!0))},jumpToResponses:function(e){this.updateState(this.state.set("currentResponsePage",e),!0),this.updateCurrentResponses()},nextResponses:function(){var e=this.state.get("currentResponsePage"),t=this.state.get("totalResponsePage");this.updateState(this.state.set("currentResponsePage",Math.min(e+1,t)),!0),this.updateCurrentResponses()},previousResponses:function(){var e=this.state.get("currentResponsePage");this.updateState(this.state.set("currentResponsePage",Math.max(e-1,0)),!0),this.updateCurrentResponses()},updateCurrentResponses:function(){var e=this.state.get("currentResponsePage"),t=this.limit*e;this.updateState(this.state.set("currentResponses",this._allResponses.skip(t).take(this.limit)))},initializeSurveysResponses:function(e){var t=this;this.ensurePublishedSurvey().then(function(){var n=t.state.getIn(["publishedSurveys",e]);n&&(t._allResponses=n.getContacts().sortBy(function(e){return e.obtainedMarks||0}),t._allResponses=t._allResponses.reverse(),t.updateState(t.state.set("totalResponsePage",Math.ceil(t._allResponses.size/t.limit)),!0),t.updateCurrentResponses())})},resetResponses:function(){this._allResponses=M.default.Map(),this.updateState(this.state.set("currentResponsePage",0).set("totalResponsePage",0).set("currentResponses",M.default.Map()))},setCurrentLocation:function(e,t){this.updateState(this.state.set("currentLocation",M.default.Map(e)),t)},setSelectedLocations:function(e,t,n){this.updateState(this.state.set("selectedLocations",M.default.Set(e)),t),n&&this.setMapCenterLocation(n)},setMapCenterLocation:function(e){var t=e.latitude,n=e.longitude;this.updateState(this.state.set("mapCenterLocation",M.default.Map({latitude:t,longitude:n})).set("zoomLevel",16))},setCurrentFocusedLocation:function(e,t){var n=e.latitude,i=e.longitude;this.updateState(this.state.set("currentFocusedLocation",M.default.Map({latitude:n,longitude:i})),t)},getCurrentLocation:function(){navigator.geolocation?(this.updateState(this.state.set("blink",!0)),navigator.geolocation.getCurrentPosition(this.currentPosition,this.handleLocationError)):this.updateState(this.state.set("errorMessage",L.default.t("Geolocation is not supported by this browser")))},handleLocationError:function(e){var t=this.decideErrorMessage(e);this.updateState(this.state.set("errorMessage",t).set("blink",!1)),O.default.notify(x.Notifications.LONGINFO,t)},currentPosition:function(e){var t=e.coords,n=t.latitude,i=t.longitude;this.setCurrentLocation({latitude:n,longitude:i},!0),this.setMapCenterLocation({latitude:n,longitude:i},!0),this.updateState(this.state.set("blink",!1))},decideErrorMessage:function(e){var t=e.code,n=void 0;switch(t){case e.PERMISSION_DENIED:n=L.default.t("Sharing your location is mandatory to proceed, please allow it in your browser settings and then try again");break;case e.POSITION_UNAVAILABLE:n=L.default.t("Location details are not available at this moment");break;case e.TIMEOUT:n=L.default.t("Location-timeout occured");break;case e.UNKNOWN_ERROR:n=L.default.t("Something went wrong")}return n},getAddressOfLocation:function(e){var t=e.latitude,n=e.longitude;return new z.default(function(e,i){U.default.get("https://maps.googleapis.com/maps/api/geocode/json?latlng="+t+","+n+"&key="+x.googleMap.apiKey).then(function(t){e(t)}).catch(function(e){i(e)})})},onDistanceChange:function(e){var t=this.state.get("selectedLocations").toJS(),n=e.latitude,i=e.longitude,r=e.distance,u=e.address;t=(0,s.default)(t,function(e){return e.latitude==n&&e.longitude==i?{latitude:Number(n),longitude:Number(i),distance:Number(r),address:u}:e}),this.setCurrentFocusedLocation({latitude:e.latitude,longitude:e.longitude},!0),this.setSelectedLocations(t,!1,e)},onSuggestSelect:function(e){var t=e.location,n=t.lat,i=t.lng;this.setCurrentLocation({latitude:n,longitude:i},!0),this.setMapCenterLocation({latitude:n,longitude:i})},onLocationCardClick:function(e){this.setCurrentFocusedLocation({latitude:e.latitude,longitude:e.longitude},!0),this.setMapCenterLocation({latitude:e.latitude,longitude:e.longitude})},oncurrentLocationDragEnd:function(e){var t=e.latLng;this.setCurrentLocation({latitude:t.lat(),longitude:t.lng()})},onSelectedMarkerDelete:function(e){var t=e.latitude,n=e.longitude,i=this.state.get("selectedLocations").toJS(),r={latitude:t,longitude:n},s=[];i.forEach(function(e){!(e.latitude==r.latitude&&e.longitude==r.longitude)&&s.push(e)}),this.setSelectedLocations(s)},onSelectedLocMarkerClick:function(e){var t=e.latLng,n={latitude:t.lat(),longitude:t.lng()};this.setCurrentFocusedLocation({latitude:n.latitude,longitude:n.longitude})},onCurrentLocMarkerClick:function(e){var t=this,n=e.latLng,i={latitude:n.lat(),longitude:n.lng()},r=this.state.get("selectedLocations").toJS();if(r.length==x.locationSelecteionLimit)return void O.default.notify(x.Notifications.WARNING,L.default.t("Only "+x.locationSelecteionLimit+" locations are allowed."));this.getAddressOfLocation(i).then(function(e){var n=e.data.results,s=n[0].formatted_address;r.push({latitude:i.latitude,longitude:i.longitude,address:s,distance:50}),t.setSelectedLocations(r,!0),t.setCurrentFocusedLocation(i,!0),t.setCurrentLocation({})})}});t.default=X},388:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){var n=(0,o.default)(t,e),i=(0,u.default)(t,e);return{hours:n,minutes:i-60*n,seconds:(0,d.default)(t,e)-60*i}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=r;var s=n(809),u=i(s),a=n(812),o=i(a),l=n(813),d=i(l)},394:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["addRecipient","deleteRecipient","updateRecipient","optionsContactOpen","optionsContactDone","removeGroup","undo","undoRecipent"]);t.default=s},396:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(240),a=i(u),o=n(359),l=i(o),d=n(325),c=i(d),f=n(105),h=i(f),g=n(160),p=i(g),v=n(24),y=i(v),m=n(251),S=i(m),_=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),b=n(22),P=i(b),I=n(17),T=i(I),w=n(39),k=i(w),M=n(52),D=i(M),C=n(87),R=i(C),O=n(9),x=i(O),E=n(64),L=i(E),A=n(28),N=n(41),q=i(N),K=n(246),j=i(K),Q=n(360),B=i(Q),F=n(155),U=i(F),G=n(8),z=i(G),V=n(6),H=i(V),J=n(397),W=i(J),Y=n(30),Z=i(Y),$=n(141),X=i($),ee=n(388),te=i(ee),ne=n(163),ie=i(ne),re=(0,U.default)(),se={_id:null,survey:null,responses:{},currentPageKey:null,nextPageKey:null,prevPageKey:null,currentQuestionKey:null,nextQuestionKey:null,prevQuestionKey:null,callStack:[],jumpToStack:[],ignoredKeys:[],serverStartTime:"",timeTrackers:{},clientTime:"",surveyStartTime:"",completed:!1,isCommonLink:!1,userProfile:{}},ue=(0,P.default)({listenables:[W.default,Z.default],currentPageKey:null,nextPageKey:null,prevPageKey:null,currentQuestionKey:null,nextQuestionKey:null,prevQuestionKey:null,_clientSurvey:null,_allPages:x.default.Map(),_callStack:[],_pageSkipInfo:{},_questionSkipInfo:{},_ignoredKeys:[],_db:null,_jumpToStack:[],timeTrackers:{},clientTime:"",surveyStartTime:"",_totalSurveyQuestions:null,_isSurveyTimeValid:!1,questionTimer:{},init:function(){this.state=x.default.Map({pages:x.default.Map(),responses:x.default.Map(),startTime:"",showNext:!1,showPrev:!1,showFinish:!1,header:{},disabled:x.default.Map(),percentSurveyCompleted:0,timeRemain:{},questionTimeRemain:{},showQuestionTimer:!1,surveyStarted:!1,current:{},last:{},showLoader:!0,showMarks:!1,attempted:[],totalQuestionCount:null,isTimerEnabled:null,userProfile:null,providers:x.default.Set(),onSubmission:!1,isQuestionTimer:!1})},getInitialState:function(){return this.state},processLoggedUser:function(e,t){var n=this;this._currentProfile=e,this._isCommonLink=!0,this._migrate=t,this._db.allDocs({include_docs:!0,key:e.email}).then(function(t){if(t.rows.length&&t.rows[0].doc){var i=t.rows[0].doc;return n._URL=i.URL,n.routeTo(n._URL),null}return n._URL="/run/"+n._instanceId+"/"+(0,T.default)().str,n._db.put({_id:e.email,URL:n._URL})}).then(function(e){e&&n.routeTo(n._URL)})},userChanged:function(e,t,n){t.isGuest||ie.default.recordTime("Login Successful"),this.updateState(this.state.set("userProfile",t.isGuest?null:t)),t.isGuest||!this._instanceId||this._responseId||(this._currentProfile=t,this._isCommonLink=!0,n||this.processLoggedUser(t))},updateState:function(e,t){this.state=e,t||this.trigger(this.state)},prepareState:function(e){"page"==this._questionDisplay&&this.nextPageController(),"question"==this._questionDisplay&&this.nextQuestionController(e)},nextPageController:function(){var e=this,t=this._callStack[this._callStack.length-1],n=!1;if(t)for(var i=this._allPages.get(t.pageKey),r=0;r<i.get("count")&&!(n=this.skipQuestion({pageKey:t.pageKey,questionKey:r+1}));r++);this.prevPageKey+1!=this.currentPageKey&&this.setIgnoreKeys(this.prevPageKey,this.currentPageKey),this._clientSurvey.getSurvey().getRestrictPrevious()?this.updateState(this.state.set("showPrev",!1),!0):0!=this.currentPageKey?this.updateState(this.state.set("showPrev",!0),!0):this.updateState(this.state.set("showPrev",!1),!0);var s=this._allPages.get(this.currentPageKey);if(this._totalPage>this.currentPageKey+1){var u=!0,a=this.currentPageKey+1;s.get("page").getLogic()&&(a=s.get("page").getSkipTo(),"eos"==a?(u=!1,this.updateState(this.state.set("showFinish",!0),!0)):a=parseInt(a)),this.nextPageKey=a,this.updateState(this.state.set("showNext",u),!0)}else this.updateState(this.state.set("showNext",!1).set("showFinish",!0),!0);var o=(0,S.default)(this._allPages.get(this.currentPageKey));if(n){for(var l={},d=1;d<=o.get("count");d++)if(d>=this.currentQuestionKey)l[d-(this.currentQuestionKey-1)]=o.getIn(["questions",d]),l[d-(this.currentQuestionKey-1)].index=d-(this.currentQuestionKey-1);else{var c=o.getIn(["questions",d]).pageItem.getId();this.updateState(this.state.setIn(["responses",c],""))}o=o.delete("questions"),(0,y.default)(l,function(e,t){o=o.setIn(["questions",t],e)}),o=o.set("count",o.get("count")-(this.currentQuestionKey-1))}this.updateState(this.state.setIn(["pages","current"],o)),this.updateLast(),this.updateCurrent(),this.updateDBSurvey(),this.putDBSurvey().then(function(t){e.navigate(e._clientSurvey.getSurvey().getId(),{page:s.getIn(["page"]).getId()})})},_getSurveyStatus:function(){var e=this.currentPageKey,t=this.currentQuestionKey,n=0;if(e){for(var i=0;i<e;)n+=this._clientSurvey.getSurvey().getPage(i).getPageItemRefsSize(),i++;n+=t}else n=t;this._setSurveyProgressPercentages(n),this.updateState(this.state.set("totalQuestionCount",this._totalSurveyQuestions)),this.updateState(this.state.set("isTimerEnabled",this._clientSurvey.getSurvey().getIsTimer()))},_setSurveyProgressPercentages:function(e){var t=Math.ceil(e/this._totalSurveyQuestions*100);this.updateState(this.state.set("percentSurveyCompleted",t))},nextQuestionController:function(e){var t=this,n=this._callStack[this._callStack.length-1];n&&this.skipQuestion(n);var i=this._allPages.get(this.currentPageKey);if(this._clientSurvey.getSurvey().getRestrictPrevious()?this.updateState(this.state.set("showPrev",!1),!0):0==this.currentPageKey&&1==this.currentQuestionKey?this.updateState(this.state.set("showPrev",!1),!0):this.updateState(this.state.set("showPrev",!0),!0),i=i.setIn(["questions"],x.default.Map()).setIn(["questions","current"],this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey])),this._totalPage>this.currentPageKey+1)if(i.get("count")!=this.currentQuestionKey)this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0).set("showFinish",!1),!0);else{var r=this._allPages.get(this.currentPageKey),s=!0,u=!1,a=this.currentPageKey+1;r.get("page").getLogic()&&(a=r.get("page").getSkipTo(),"eos"==a?(s=!1,u=!0):a=parseInt(a)),this.nextPageKey=a,this.nextQuestionKey=1,this.updateState(this.state.set("showNext",s).set("showFinish",u),!0)}else i.get("count")==this.currentQuestionKey?this.updateState(this.state.set("showNext",!1).set("showFinish",!0),!0):(this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0).set("showFinish",!1),!0));if(this.updateState(this.state.setIn(["pages",0],i)),!this.surveyStartTime){this._clientSurvey.getSurvey().getStartFrom()==this.currentPageKey&&this._clientSurvey.getSurvey().getIsTimer()&&(this.surveyStartTime=(new Date).toISOString())}this.updateTracker(e),this.setQuestionTimer(),this._getSurveyStatus(),!e&&this.updateLast(),this.updateCurrent(),this.updateDBSurvey(),this.putDBSurvey().then(function(e){t.navigate({question:i.getIn(["questions","current"]).pageItem.getId()})})},skipQuestion:function(e){var t=this,n=this._allPages.getIn([e.pageKey,"count"]),i=!1,r=this._ignoredKeys.pop();if("page"==this._questionDisplay)for(var s=r||1;s<=n;s++){var u=this._allPages.getIn([e.pageKey,"questions",s]).pageItem;if(("yesno"==u.getSubType()||"multivalue"==u.getSubType())&&u.getLogic()){var a=u.getSkipTo(),o=this.state.getIn(["responses",u.getId()]),l=a.get(o);if(l){if("eos"!=l.pageNo){var d=function(){var e=parseInt(l.pageNo),n=parseInt(l.questionNo),r=t._allPages.getIn([e,"questions",n]);return n!=r.index&&t._allPages.getIn([e,"questions"]).forEach(function(e,t){if(e.index==n)return n=t,!1}),t.currentPageKey=e,t.currentQuestionKey=n,i=!0,"break"}();if("break"===d)break}}else this.currentQuestionKey=1}}if("question"==this._questionDisplay){var c=this._allPages.getIn([e.pageKey,"questions",e.questionKey]).pageItem;if(("yesno"==c.getSubType()||"multivalue"==c.getSubType())&&c.getLogic()){var f=c.getSkipTo(),h=this.state.getIn(["responses",c.getId()]),g=f.get(h);if(g&&"eos"!=g.pageNo){var p=parseInt(g.pageNo),v=parseInt(g.questionNo),y=this._allPages.getIn([p,"questions",v]);v!=y.index&&this._allPages.getIn([p,"questions"]).forEach(function(e,t){if(e.index==v)return v=t,!1}),this.currentPageKey=p,this.currentQuestionKey=v,i=!0}}}return i},updateDBSurvey:function(){this._dbSurvey.responses=this.state.get("responses").toJS(),this._dbSurvey.currentPageKey=this.currentPageKey,this._dbSurvey.nextPageKey=this.nextPageKey,this._dbSurvey.prevPageKey=this.prevPageKey,this._dbSurvey.currentQuestionKey=this.currentQuestionKey,this._dbSurvey.nextQuestionKey=this.nextQuestionKey,this._dbSurvey.prevQuestionKey=this.prevQuestionKey,this._dbSurvey.callStack=this._callStack,this._dbSurvey.jumpToStack=this._jumpToStack,this._dbSurvey.ignoredKeys=this._ignoredKeys,this._dbSurvey.timeTrackers=this.timeTrackers,this._dbSurvey.surveyStartTime=this.surveyStartTime,this._dbSurvey.questionTimer=this.questionTimer},ignoringQuestionKeys:function(){var e=this._clientSurvey.getSurvey(),t=e.getPagesSize(),n=null,i=null;this._ignoredKeys=[];for(var r=0;r<t;r++)for(var s=e.getPage(r),u=s.getPageItemRefs().toArray(),a=0;a<u.length;a++){var o=e.getPageItem(u[a]);if(o.isQuestion)if(r!=n){if(r<n)this._ignoredKeys.push(o.getId());else if(("yesno"==o.getSubType()||"multivalue"==o.getSubType())&&o.getLogic()){var l=o.getSkipTo(),d=this.state.getIn(["responses",o.getId()]),c=l.get(d);c&&(n=parseInt(c.pageNo),i=parseInt(c.questionNo)-1)}}else a<i&&this._ignoredKeys.push(o.getId());else this._ignoredKeys.push(o.getId())}},_getQuestionKeys:function(){var e=this,t=this._clientSurvey.getSurvey();if("all"==this._questionDisplay){this.ignoringQuestionKeys();var n=t.getPageItemsKeys().toArray();return this._ignoredKeys.length&&(0,p.default)(n,function(t){return-1!=(0,h.default)(e._ignoredKeys,t)}),n}if("page"==this._questionDisplay){var i=t.getPage(this.currentPageKey).getPageItemRefs().toArray();if(this._ignoredKeys.length){var r=[];this._ignoredKeys.forEach(function(e){r.push(i[e-1])}),(0,p.default)(i,function(e){return-1!=(0,h.default)(r,e)})}return i}if("question"==this._questionDisplay){var s=this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey]).pageItem;return s.isQuestion?[s.getId()]:[]}},navigate:function(e){(0,D.default)(k.default)({queryKey:!1}).push({pathname:"run/"+this._instanceId+"/"+this._responseId,query:e})},next:function(){var e=this,t=this._getQuestionKeys();this._clientSurvey.validateSurvey(t,this.state.get("responses").toJS()).then(function(t){e.updateTracker(),e._callStack.push({pageKey:e.currentPageKey,questionKey:e.currentQuestionKey,id:e.getIds()}),e.updateAttempted(),e.prevPageKey=e.currentPageKey,e.currentPageKey=e.nextPageKey,"question"==e._questionDisplay&&(e.prevQuestionKey=e.currentQuestionKey,e.currentQuestionKey=e.nextQuestionKey),e.prepareState()}).catch(function(e){e&&L.default.notify(A.Notifications.WARNING,z.default.t("Please fix the errors shown on this page and try again"))})},getIds:function(){return"page"==this._questionDisplay?this._clientSurvey.getSurvey().getPageItemRefs(this.currentPageKey).toArray():"question"==this._questionDisplay?[this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey]).pageItem.getId()]:void 0},previous:function(){this.updateTracker();var e=this._callStack.pop();this.currentPageKey=e.pageKey,"question"==this._questionDisplay&&(this.currentQuestionKey=e.questionKey),this.prepareState(!0)},jumpTo:function(e){if(!this._clientSurvey.getSurvey().getRestrictPrevious()){if(!e)return;this._jumpToStack.length<this._callStack.length&&(this._jumpToStack=(0,c.default)(this._callStack)),this._callStack=(0,l.default)(this._jumpToStack,function(t){return!(0,a.default)(t,e)}),this.updateDBSurvey(),this.updateTracker(),this.updateAttempted(),this.currentPageKey=e.pageKey,"question"==this._questionDisplay&&(this.currentQuestionKey=e.questionKey),this.prepareState(!0)}},updateAttempted:function(e){this._jumpToStack.length<this._callStack.length&&(this._jumpToStack=(0,c.default)(this._callStack)),this.updateState(this.state.set("attempted",this._jumpToStack),e)},updateLast:function(){var e=this.state.get("last");e.pageKey>this.currentPageKey||e.pageKey==this.currentPageKey&&e.questionKey>this.currentQuestionKey||this.updateState(this.state.set("last",{pageKey:this.currentPageKey,questionKey:this.currentQuestionKey,id:this.getIds()}))},updateCurrent:function(){this.updateState(this.state.set("current",{pageKey:this.currentPageKey,questionKey:this.currentQuestionKey,id:this.getIds()}))},setIgnoreKeys:function(e,t){for(var n=this,i=e+1;i<t;i++){var r=this._allPages.getIn([i,"page"]),s=r.getPageItemRefs().toArray();(0,y.default)(s,function(e){n.updateState(n.state.setIn(["responses",e],""))})}},getDataFromServer:function(){return(0,q.default)({url:"/survey",method:"POST",data:{responseId:this._responseId,isCommonLink:this._isCommonLink,instanceId:this._instanceId,userProfile:this._currentProfile,migrate:this._migrate}})},getProfileDetails:function(){return this._currentProfile?this._db.allDocs({include_docs:!0,key:this._currentProfile.email}):Promise.resolve({isProfileAbsent:!0})},validateUserTimeWithSurveyTime:function(e,t){var n=this,i=(new Date).toISOString(),r=t||e;return t?this.getProfileDetails().then(function(e){if(!e.isProfileAbsent&&e.rows.length){var i=_(e.rows,1),r=i[0].doc,s=r.URL.split("/");if(s[s.length-1]==t)return Promise.resolve({isSurveyAvailable:!0})}return n._db.allDocs({include_docs:!0,key:t})}).then(function(n){return n.isSurveyAvailable?Promise.resolve():n.rows.length&&n.rows[0].doc?Promise.resolve():(0,q.default)({url:"/validatesurveytime",method:"POST",data:{responseId:t,invitationLink:r,instanceId:e,userRequestDateTime:i}})}):(0,q.default)({url:"/validatesurveytime",method:"POST",data:{responseId:t,invitationLink:r,instanceId:e,userRequestDateTime:i}})},loadPublishedSurvey:function(e,t){var n=this;return this._db=new R.default(e),this._responseId=t,this._instanceId=e,this.validateUserTimeWithSurveyTime(e,t).then(function(e){var t=e&&e.data||{},i=t.isBefore,r=t.surveyStartDateTime,u=t.surveyEndDateTime,a=t.isQuiz,o=t.surveyTitle;return t.error?n._db.allDocs({key:"surveyavaililitymessage",include_docs:!0}).then(function(e){var t=e.rows[0]?e.rows[0].doc:{};return t=(0,s.default)(t,{_id:"surveyavaililitymessage",isBefore:i,surveyStartDateTime:r,surveyEndDateTime:u,isQuiz:a,surveyTitle:o}),n._db.put(t)}).then(function(){return n.routeTo("surveyavailibility/"+n._instanceId),Promise.reject({skip:!0})}).catch():!n._responseId&&n._instanceId?(n.routeTo("message/login/"+n._instanceId),Promise.reject({skip:!0})):n._db.allDocs({include_docs:!0,key:n._responseId})}).then(function(e){return e.rows.length&&e.rows[0].doc?(n._dbSurvey=e.rows[0].doc,n._dbSurvey.completed?Promise.reject({completed:!0}):n._dbSurvey.migrated?Promise.reject({migrated:!0}):(L.default.notify(A.Notifications.INFO,z.default.t("We have restored your previous session"),z.default.t("Got it"),null),{data:e.rows[0].doc.survey,isLocal:!0})):n.getDataFromServer()}).then(function(e){if(!e.isLocal){var t=e.data;return t.error?Promise.reject(t):(n._dbSurvey=(0,s.default)(se,{_id:n._responseId,survey:t.survey,serverStartTime:t.startTime,clientTime:(new Date).toISOString(),isCommonLink:n._isCommonLink,userProfile:n._currentProfile,otherDetails:t.otherDetails}),n.putDBSurvey())}return{}}).then(function(e){var t=void 0,i=void 0,r=n._dbSurvey.isGeolocationAvailable;if(n._dbSurvey.otherDetails&&(t=n._dbSurvey.otherDetails.askLocation,i=n._dbSurvey.otherDetails.locationRequired),n._clientSurvey=re.getClientSurveyResponseModel({responseId:n._responseId,survey:n._dbSurvey.survey}),n._clientSurvey=n._clientSurvey.setSessionStartTime(n._dbSurvey.serverStartTime),n._totalSurveyQuestions=n._clientSurvey.getSurvey().getPageItemsSize(),n.updateState(n.state.set("showLoader",!1).set("showMarks",n._dbSurvey.survey.showMarksRunMode)),(t||i)&&!r)return void n.routeTo({pathname:"geolocation/"+n._instanceId+"/"+n._responseId});n.prepareSurveyStart(!e.rev)}).catch(function(e){if(!e.skip){if(e.response&&(e=e.response.data),e.completed)return void n.routeToCompleted();if(e.migrated)return void n.routeTo({pathname:"message/migration/failed"});if(208==e.status)return void n.routeTo({pathname:"message/migration/"+n._instanceId});throw e}})},setSurveyTimer:function(){if(this.surveyStartTime&&0==Object.keys(this.questionTimer).length){var e=this._clientSurvey.getSurvey(),t=(0,te.default)(this.surveyStartTime,(new Date).toISOString()),n=(0,te.default)(new Date(0,0,0,t.hours,t.minutes,t.seconds).toISOString(),new Date(0,0,0,0,e.getTimeout(),0).toISOString());this.updateState(this.state.set("timeRemain",n).set("surveyStarted",!0))}else this.updateQuestionTimer()},timeConverterFromSeconds:function(e){var t=Math.floor(e/3600),n=Math.floor(e/60)-60*t;return{hours:t,minutes:n,seconds:e-(60*t*60+60*n)}},setQuestionTimer:function(){var e=this._allPages.get(this.currentPageKey);if(e){var t=e.getIn(["questions",this.currentQuestionKey]).pageItem.getId();this.questionTimer[t]&&this.updateState(this.state.set("questionTimeRemain",this.questionTimer[t].remaining).set("isQuestionTimer",!0))}},decreseTimeToSec:function(e){var t=e.hours,n=e.minutes,i=e.seconds;return i?{hours:t,minutes:n,seconds:i-1}:n?{hours:t,minutes:n-1,seconds:59}:t?{hours:t-1,minutes:59,seconds:59}:{hours:0,minutes:0,seconds:0}},handleProceed:function(){this.state.get("showFinish")?this.state.get("onSubmission")||this.finish():this.next()},updateQuestionTimer:function(){var e=this._allPages.get(this.currentPageKey);if(e){var t=e.getIn(["questions",this.currentQuestionKey]).pageItem.getId();if(this.questionTimer[t]){var n=this.questionTimer[t].remaining;n=this.decreseTimeToSec(n),this._dbSurvey.questionTimer[t].remaining=n;var i=n,r=i.hours,s=i.minutes;0==i.seconds&&0==s&&0==r&&this.handleProceed(),this.putDBSurvey(),this.updateState(this.state.set("questionTimeRemain",n).set("showQuestionTimer",!0).set("isQuestionTimer",!0))}else this.updateState(this.state.set("showQuestionTimer",!1).set("isQuestionTimer",!0))}},stopTest:function(){this.reset(),X.default.stopTest(this._clientSurvey)},addResponseToServer:function(){return(0,q.default)({url:"/response",method:"POST",data:{surveyresponse:this._clientSurvey.toJS(),instanceId:this._instanceId,isCommonLink:this._dbSurvey.isCommonLink,userProfile:this._dbSurvey.userProfile}})},putDBSurvey:function(){var e=this;return this._db.put(this._dbSurvey).then(function(t){return e._dbSurvey._rev=t.rev,t}).catch(function(t){if(409==t.status)return e._db.allDocs({include_docs:!0,key:e._responseId}).then(function(t){var n=_(t.rows,1),i=n[0].doc;i._rev!=e._dbSurvey._rev&&(e._dbSurvey=i)});throw t})},finish:function(){var e=this;if(this._dbSurvey.completed)return void this.routeToCompleted();if(this._dbSurvey.migrated)return void this.routeTo({pathname:"message/migration/failed"});this.updateState(this.state.set("onSubmission",!0));var t=this._getQuestionKeys();this._clientSurvey.validateSurvey(t,this.state.get("responses").toJS()).then(function(t){e.updateTracker(),H.default.log(t),e._dbSurvey.responses=e.state.get("responses").toJS(),e.putDBSurvey().then(function(t){e._clientSurvey=e._clientSurvey.setPublishedInstanceId(e._instanceId).setResponses(e.state.get("responses").toJS()).setName(e._dbSurvey.userProfile.name).setEmail(e._dbSurvey.userProfile.email).setSurveyArriveTime(e._dbSurvey.clientTime).setClientTracker(e._dbSurvey.timeTrackers).setClientStartTime(e.surveyStartTime).setClientEndTime((new Date).toISOString()).setUserLocations(e._dbSurvey.userLocations),(new B.default).get(function(t,n){H.default.log(t),H.default.log(n);var i={};(0,y.default)(n,function(e){i[e.key]=e.value});var r={};return e._clientSurvey=e._clientSurvey.setDeviceId(t).setDeviceScreenResolution(i.resolution).setDeviceTimeZoneOffset(i.timezone_offset).setOS(j.default.os.toString()).setBrowserName(j.default.name).setBrowserVersion(j.default.version),e.addResponseToServer().then(function(t){var n=t.data;return n.error?Promise.reject(n):(r=n,e.reset(),e._dbSurvey.completed=!0,e._dbSurvey.surveyResult=r,e.putDBSurvey())}).then(function(){e.updateState(e.state.set("onSubmission",!1)),e._dbSurvey.surveyResult.totalMarks?e.routeTo({pathname:"message/acknowledgement/"+e._instanceId+"/"+e._responseId}):e.routeTo({pathname:"message/thankyou"})}).catch(function(t){if(e.updateState(e.state.set("onSubmission",!1)),t.response&&(t=t.response.data),409==t.status)return e._dbSurvey.completed=!0,e.putDBSurvey().then(function(){e.routeTo({pathname:"message/acknowledgement/"+e._instanceId+"/"+e._responseId})});if(422==t.status)return e._dbSurvey.migrated=!0,e.putDBSurvey().then(function(){e.routeTo({pathname:"message/migration/failed"})});throw t})})})})},routeToThankYou:function(e){(0,D.default)(k.default)({queryKey:!1}).push({pathname:"/thankyou",query:{total:e.totalMarks,obtained:e.obtainedMarks,pass:e.pass}})},routeTo:function(e){(0,D.default)(k.default)({queryKey:!1}).push(e)},routeToCompleted:function(e){(0,D.default)(k.default)({queryKey:!1}).push("message/completed")},initQuestionTimer:function(e,t){var n=this;if(t&&this._dbSurvey.questionTimer&&Object.keys(this._dbSurvey.questionTimer).length)return void(this.questionTimer=this._dbSurvey.questionTimer);if(e){e.getPageItemsKeys().toArray().forEach(function(t){var i=e.getPageItem(t);if("question"==i.getType()){var r=i.getQuestionTimeOut();r&&(n.questionTimer[i.getId()]={total:r,remaining:n.timeConverterFromSeconds(60*r)})}}),this._dbSurvey.questionTimer=this.questionTimer}},prepareSurveyStart:function(e){var t=this;ie.default.updateTimerInformation(e,this.state.get("userProfile")),this.reset(!0);var n=this._clientSurvey.getSurvey();this._questionDisplay=n.getQuestionDisplay();var i=n.getTitle(),r=n.getDescription(),s=n.getShowHeader(),u={title:i,description:r,showHeader:s},a=n.getPagesSize();this.updateState(this.state.set("header",u).set("responses",x.default.Map(this._dbSurvey.responses)),!0),this.initQuestionTimer(n,e);for(var o=0;o<a;o++)!function(e){var i=n.getPage(e),r=0,s=0,u=[];if(t._allPages=t._allPages.setIn([e,"page"],i),"all"==t._questionDisplay&&((0,y.default)(t._pageSkipInfo,function(t,n){-1!=(0,h.default)(t,e)&&u.push(parseInt(n)+1)}),t._allPages=t._allPages.setIn([e,"info"],!!u.length&&"You can ignore this page if you attempted questions in page number "+u)),i.getLogic()){t._pageSkipInfo[e]=[];for(var o="eos"==i.getSkipTo()?a:parseInt(i.getSkipTo()),l=e+1;l<o;l++)t._pageSkipInfo[""+e].push(l)}i.getPageItemRefs().toArray().forEach(function(i,u){var a=n.getPageItem(i),o={};a.isQuestion?r++:s++,(0,y.default)(t._questionSkipInfo,function(t,n){(0,y.default)(t,function(t,i){(0,y.default)(t.skipTo.toJS(),function(u,a){"eos"!=u.pageNo?(parseInt(n)==e&&parseInt(i)<r+s&&(parseInt(u.pageNo)==e&&parseInt(u.questionNo)>r&&(o[t.id]=o[t.id]||[],o[t.id].push(a)),parseInt(u.pageNo)>e&&(o[t.id]=o[t.id]||[],o[t.id].push(a))),parseInt(n)<e&&(parseInt(u.pageNo)==e&&parseInt(u.questionNo)>r&&(o[t.id]=o[t.id]||[],o[t.id].push(a)),parseInt(u.pageNo)>e&&(o[t.id]=o[t.id]||[],o[t.id].push(a)))):(o[t.id]=o[t.id]||[],o[t.id].push(a))})})}),a.isQuestion?t._allPages=t._allPages.setIn([e,"questions",r+s],{index:r,pageItem:a,disableIf:o}).setIn([e,"count"],r+s):(t._allPages=t._allPages.setIn([e,"questions",r+s],{pageItem:a,disableIf:o}).setIn([e,"count"],r+s),t._ignoredKeys.push(r+s)),"yesno"!=a.getSubType()&&"multivalue"!=a.getSubType()||!a.getLogic()||(t._questionSkipInfo[e]=t._questionSkipInfo[e]||{},t._questionSkipInfo[e][r]={skipTo:a.getSkipTo(),id:a.getId()})})}(o);if(this._totalPage=this._allPages.size,"all"==this._questionDisplay&&(this.updateState(this.state.set("pages",this._allPages).set("showFinish",!0)),this.navigateToAll(n.getId())),"page"==this._questionDisplay){if(this.currentPageKey=this._dbSurvey.currentPageKey||0,this._totalPage>this.currentPageKey+1){var l=this._allPages.get(this.currentPageKey),d=!0,c=this.currentPageKey+1;l.get("page").getLogic()&&(c=l.get("page").getSkipTo(),"eos"==c?(d=!1,this.updateState(this.state.set("showFinish",!0),!0)):c=parseInt(c)),this.nextPageKey=c,this.updateState(this.state.set("showNext",d),!0)}else this.updateState(this.state.set("showFinish",!0),!0);this.updateState(this.state.setIn(["pages","current"],this._allPages.get(this.currentPageKey)).set("showPrev",!this._clientSurvey.getSurvey().getRestrictPrevious()&&!!this.currentPageKey)),e?(this.nextPageKey=this._dbSurvey.nextPageKey||this.nextPageKey,this.prevPageKey=this._dbSurvey.prevPageKey||this.prevPageKey,this._callStack=this._dbSurvey.callStack,this._ignoredKeys=this._dbSurvey.ignoredKeys,this.navigate({page:page.getIn(["page"]).getId()})):this.navigateToAll(n.getId())}if("question"==this._questionDisplay){this.currentPageKey=this._dbSurvey.currentPageKey||0,this.currentQuestionKey=this._dbSurvey.currentQuestionKey||1;var f=this._allPages.get(this.currentPageKey);if(f=f.setIn(["questions"],x.default.Map()).setIn(["questions","current"],this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey])),this._totalPage>this.currentPageKey+1)if(f.get("count")!=this.currentQuestionKey)this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0),!0);else{var g=!0,p=!1,v=this.currentPageKey+1;f.get("page").getLogic()&&(v=f.get("page").getSkipTo(),"eos"==v?(g=!1,p=!0):v=parseInt(v)),this.nextPageKey=v,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",g).set("showFinish",p),!0)}else f.get("count")==this.currentQuestionKey?this.updateState(this.state.set("showFinish",!0),!0):(this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0),!0));if(this.updateState(this.state.setIn(["pages",0],f).set("showPrev",!this._clientSurvey.getSurvey().getRestrictPrevious()&&(!!this.currentPageKey||this._dbSurvey.currentQuestionKey&&1!=this._dbSurvey.currentQuestionKey))),e)this.nextPageKey=this._dbSurvey.nextPageKey||this.nextPageKey,this.prevPageKey=this._dbSurvey.prevPageKey||this.prevPageKey,this.nextQuestionKey=this._dbSurvey.nextQuestionKey||this.nextQuestionKey,this.prevQuestionKey=this._dbSurvey.prevQuestionKey||this.prevQuestionKey,this._callStack=this._dbSurvey.callStack||[],this._jumpToStack=this._dbSurvey.jumpToStack||[],this._ignoredKeys=this._dbSurvey.ignoredKeys,this.timeTrackers=this._dbSurvey.timeTrackers,this.clientTime=this._dbSurvey.clientTime,this.surveyStartTime=this._dbSurvey.surveyStartTime,this.updateAttempted(!0),this.updateLast(),this.updateCurrent(),this._getSurveyStatus(),this.setQuestionTimer(),this.navigate({question:f.getIn(["questions","current"]).pageItem.getId()});else{n.getStartFrom()==this.currentPageKey&&n.getIsTimer()&&(this.surveyStartTime=(new Date).toISOString(),this.updateTracker()),this._getSurveyStatus(),this.updateLast(),this.updateCurrent(),this.updateDBSurvey(),this.setQuestionTimer(),this.navigateToAll(this._questionDisplay)}}},updateTracker:function(e){if(this.surveyStartTime){var t=this._allPages.get(this.currentPageKey),n=t.getIn(["questions",this.currentQuestionKey]).pageItem.getId();e&&!this.timeTrackers[n]||(this.timeTrackers[n]||(this.timeTrackers[n]={timeTrail:[],switchTrail:[],finalResponseTime:""}),this.timeTrackers[n].timeTrail.push((new Date).toISOString()))}},reset:function(e){this._allPages=x.default.Map(),this._callStack=[],this._pageSkipInfo={},this._questionSkipInfo={},this._ignoredKeys=[],this._allPages=x.default.Map(),this.currentPageKey=null,this.currentQuestionKey=null,this.prevPageKey=null,this.prevQuestionKey=null,this.nextPageKey=null,this.nextQuestionKey=null,this.updateState(this.state.set("pages",x.default.Map()).set("showNext",!1).set("showPrev",!1).set("showFinish",!1).set("header",{}).set("questionTimer",x.default.Map()).set("responses",x.default.Map()),e)},setResponse:function(e,t){this.timeTrackers[e]&&(this.timeTrackers[e].finalResponseTime=(new Date).toISOString()),this.updateState(this.state.setIn(["responses",e],t)),this.checkEOS(e)},checkEOS:function(e){if("all"!=this._questionDisplay){var t=null;if("question"==this._questionDisplay&&(t=this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey]).pageItem),"page"==this._questionDisplay&&(t=this._clientSurvey.getSurvey().getPageItem(e)),t&&("yesno"==t.getSubType()||"multivalue"==t.getSubType())&&t.getLogic()){var n=t.getSkipTo(),i=this.state.getIn(["responses",t.getId()]),r=n.get(i);if(r)if("eos"==r.pageNo)this.updateState(this.state.set("showNext",!1).set("showFinish",!0));else{var s=!0,u=!1;if(this._totalPage==this.currentPageKey+1&&(s=!1,u=!0,"question"==this._questionDisplay)){var a=this._allPages.getIn([this.currentPageKey,"count"]);a>this.currentQuestionKey&&(s=!0,u=!1)}this.updateState(this.state.set("showNext",s).set("showFinish",u))}else{var o=!0,l=!1;if(this._totalPage==this.currentPageKey+1&&(o=!1,l=!0,"question"==this._questionDisplay)){this._allPages.getIn([this.currentPageKey,"count"])>this.currentQuestionKey&&(o=!0,l=!1)}this.updateState(this.state.set("showNext",o).set("showFinish",l))}}}},setDisable:function(e,t){this.updateState(this.state.setIn(["disabled",e],t))},navigateToAll:function(){(0,D.default)(k.default)({queryKey:!1}).push("run/"+this._instanceId+"/"+this._responseId)},tabSwitch:function(e){if(this._clientSurvey){var t=this._allPages.get(this.currentPageKey),n=t.getIn(["questions",this.currentQuestionKey]).pageItem.getId();this.timeTrackers[n]&&this.timeTrackers[n].switchTrail.push((new Date).toISOString())}},setInstanceId:function(e){var t=this;this._instanceId&&this._providers&&this._currentProfile||e&&(0,q.default)({url:"/providers",method:"POST",data:{instanceId:e}}).then(function(n){t._db=new R.default(e),t._instanceId=e,t._providers=n.data.providers,t.updateState(t.state.set("providers",x.default.Set(n.data.providers)))})}});t.default=ue},397:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["loadPublishedSurvey","setResponse","next","previous","finish","setDisable","tabSwitch","setSurveyTimer","setInstanceId","jumpTo","processLoggedUser"]);t.default=s},40:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(647),s=i(r),u=n(206),a=i(u),o=n(314),l=i(o),d=n(315),c=i(d),f=n(316),h=i(f),g=n(322),p=i(g),v=n(208),y=i(v),m=n(209),S=i(m),_=n(328),b=i(_),P=n(165),I=i(P),T=n(54),w=i(T),k=n(130),M=i(k),D=n(352),C=i(D),R=n(354),O=i(R),x=n(355),E=i(x),L=n(166),A=i(L),N=n(356),q=i(N),K=n(383),j=(i(K),n(411)),Q=(i(j),n(432)),B=(i(Q),n(386)),F=(i(B),n(129)),U=(i(F),n(436)),G=(i(U),n(413)),z=(i(G),n(396)),V=(i(z),n(814)),H=(i(V),(0,I.default)()),J=(0,w.default)(),W=(0,M.default)(),Y={container:s.default.container(),initialize:function(){return this.container.register("UserContext",b.default.getUserContext(q.default)),this.container.register("GroupsAndRecipientsProvider",new S.default(this.container,H)),this.container.register("SurveyDataProvider",new A.default(this.container,J)),this.container.register("PublishedSurveyProvider",new C.default(this.container,W)),this.container.register("PreferenceProvider",new a.default(this.container)),this.container.register("ErrorProvider",new p.default(this.container)),this.container.register("TimeTrackerProvider",new y.default(this.container)),this.container.register("PublishedSurveyResponeseProvider",new E.default(this.container)),this.container.register("ImageProvider",new O.default(this.container)),this.container.register("DefaultPaginatorProvider",new l.default(this.container)),this.container.register("GroupsPaginatorProvider",new c.default(this.container)),this.container.register("ResponsesPaginatorProvider",new h.default(this.container)),this.container}};t.default=Y.initialize()},403:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function u(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),o=n(0),l=i(o),d=n(163),c=i(d);e.exports=function(e){return function(t){function n(t){r(this,n);var i=s(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,t));return i.constructor.displayName="Tracker_"+e.displayName,i}return u(n,t),a(n,[{key:"componentDidMount",value:function(){c.default.recordTime(e.displayName)}},{key:"render",value:function(){return l.default.createElement(e,this.props)}}]),n}(l.default.Component)}},411:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(105),a=i(u),o=n(160),l=i(o),d=n(24),c=i(d),f=n(251),h=i(f),g=function(){function e(e,t){var n=[],i=!0,r=!1,s=void 0;try{for(var u,a=e[Symbol.iterator]();!(i=(u=a.next()).done)&&(n.push(u.value),!t||n.length!==t);i=!0);}catch(e){r=!0,s=e}finally{try{!i&&a.return&&a.return()}finally{if(r)throw s}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),p=n(22),v=i(p),y=n(39),m=i(y),S=n(52),_=i(S),b=(n(154),n(9)),P=i(b),I=n(8),T=(i(I),n(788)),w=i(T),k=n(141),M=i(k),D=n(245),C=i(D),R=n(6),O=i(R),x=n(87),E=i(x),L=(0,w.default)(),A=(0,v.default)({listenables:[C.default],currentPageKey:null,nextPageKey:null,prevPageKey:null,currentQuestionKey:null,nextQuestionKey:null,prevQuestionKey:null,_SurveyRunner:null,_allPages:P.default.Map(),_callStack:[],_pageSkipInfo:{},_questionSkipInfo:{},_ignoredKeys:[],init:function(){this.state=P.default.Map({pages:P.default.Map(),responses:P.default.Map(),showNext:!1,showPrev:!1,showFinish:!1,header:{},disabled:P.default.Map()})},getInitialState:function(){return this.state},updateState:function(e,t){this.state=e,t||this.trigger(this.state)},prepareState:function(){"page"==this._questionDisplay&&this.nextPageController(),"question"==this._questionDisplay&&this.nextQuestionController()},nextPageController:function(){var e=this._callStack[this._callStack.length-1],t=!1;if(e)for(var n=this._allPages.get(e.pageKey),i=0;i<n.get("count")&&!(t=this.skipQuestion({pageKey:e.pageKey,questionKey:i+1}));i++);this.prevPageKey+1!=this.currentPageKey&&this.setIgnoreKeys(this.prevPageKey,this.currentPageKey),0!=this.currentPageKey?this.updateState(this.state.set("showPrev",!0),!0):this.updateState(this.state.set("showPrev",!1),!0);var r=this._allPages.get(this.currentPageKey);if(this._totalPage>this.currentPageKey+1){var s=!0,u=this.currentPageKey+1;r.get("page").getLogic()&&(u=r.get("page").getSkipTo(),"eos"==u?(s=!1,this.updateState(this.state.set("showFinish",!0),!0)):u=parseInt(u)),this.nextPageKey=u,this.updateState(this.state.set("showNext",s),!0)}else this.updateState(this.state.set("showNext",!1).set("showFinish",!0),!0);var a=(0,h.default)(this._allPages.get(this.currentPageKey));if(t){for(var o={},l=1;l<=a.get("count");l++)if(l>=this.currentQuestionKey)o[l-(this.currentQuestionKey-1)]=a.getIn(["questions",l]),o[l-(this.currentQuestionKey-1)].index=l-(this.currentQuestionKey-1);else{var d=a.getIn(["questions",l]).pageItem.getId();this.updateState(this.state.setIn(["responses",d],""))}a=a.delete("questions"),(0,c.default)(o,function(e,t){a=a.setIn(["questions",t],e)}),a=a.set("count",a.get("count")-(this.currentQuestionKey-1))}this.updateState(this.state.setIn(["pages","current"],a)),this.navigate(this._SurveyRunner.getSurvey().getId(),{page:r.getIn(["page"]).getId()})},nextQuestionController:function(){var e=this._callStack[this._callStack.length-1];e&&this.skipQuestion(e);var t=this._allPages.get(this.currentPageKey);if(0==this.currentPageKey&&1==this.currentQuestionKey?this.updateState(this.state.set("showPrev",!1),!0):this.updateState(this.state.set("showPrev",!0),!0),t=t.setIn(["questions"],P.default.Map()).setIn(["questions","current"],this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey])),this._totalPage>this.currentPageKey+1)if(t.get("count")!=this.currentQuestionKey)this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0).set("showFinish",!1),!0);else{var n=this._allPages.get(this.currentPageKey),i=!0,r=!1,s=this.currentPageKey+1;n.get("page").getLogic()&&(s=n.get("page").getSkipTo(),"eos"==s?(i=!1,r=!0):s=parseInt(s)),this.nextPageKey=s,this.nextQuestionKey=1,this.updateState(this.state.set("showNext",i).set("showFinish",r),!0)}else t.get("count")==this.currentQuestionKey?this.updateState(this.state.set("showNext",!1).set("showFinish",!0),!0):(this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0).set("showFinish",!1),!0));this.updateState(this.state.setIn(["pages",0],t)),this.navigate(this._SurveyRunner.getSurvey().getId(),{question:t.getIn(["questions","current"]).pageItem.getId()})},skipQuestion:function(e){var t=this,n=this._allPages.getIn([e.pageKey,"count"]),i=!1,r=this._ignoredKeys.pop();if("page"==this._questionDisplay)for(var s=r||1;s<=n;s++){var u=this._allPages.getIn([e.pageKey,"questions",s]).pageItem;if(("yesno"==u.getSubType()||"multivalue"==u.getSubType())&&u.getLogic()){var a=u.getSkipTo(),o=this.state.getIn(["responses",u.getId()]),l=a.get(o);if(l){if("eos"!=l.pageNo){var d=function(){var e=parseInt(l.pageNo),n=parseInt(l.questionNo),r=t._allPages.getIn([e,"questions",n]);return n!=r.index&&t._allPages.getIn([e,"questions"]).forEach(function(e,t){if(e.index==n)return n=t,!1}),t.currentPageKey=e,t.currentQuestionKey=n,i=!0,"break"}();if("break"===d)break}}else this.currentQuestionKey=1}}if("question"==this._questionDisplay){var c=this._allPages.getIn([e.pageKey,"questions",e.questionKey]).pageItem;if(("yesno"==c.getSubType()||"multivalue"==c.getSubType())&&c.getLogic()){var f=c.getSkipTo(),h=this.state.getIn(["responses",c.getId()]),g=f.get(h);if(g&&"eos"!=g.pageNo){var p=parseInt(g.pageNo),v=parseInt(g.questionNo),y=this._allPages.getIn([p,"questions",v]);v!=y.index&&this._allPages.getIn([p,"questions"]).forEach(function(e,t){if(e.index==v)return v=t,!1}),this.currentPageKey=p,this.currentQuestionKey=v,i=!0}}}return i},ignoringQuestionKeys:function(){var e=this._SurveyRunner.getSurvey(),t=e.getPagesSize(),n=null,i=null;this._ignoredKeys=[];for(var r=0;r<t;r++)for(var s=e.getPage(r),u=s.getPageItemRefs().toArray(),a=0;a<u.length;a++){var o=e.getPageItem(u[a]);if(o.isQuestion)if(r!=n){if(r<n)this._ignoredKeys.push(o.getId());else if(("yesno"==o.getSubType()||"multivalue"==o.getSubType())&&o.getLogic()){var l=o.getSkipTo(),d=this.state.getIn(["responses",o.getId()]),c=l.get(d);c&&(n=parseInt(c.pageNo),i=parseInt(c.questionNo)-1)}}else a<i&&this._ignoredKeys.push(o.getId());else this._ignoredKeys.push(o.getId())}},_getQuestionKeys:function(){var e=this,t=this._SurveyRunner.getSurvey();if("all"==this._questionDisplay){this.ignoringQuestionKeys();var n=t.getPageItemsKeys().toArray();return this._ignoredKeys.length&&(0,l.default)(n,function(t){return-1!=(0,a.default)(e._ignoredKeys,t)}),n}if("page"==this._questionDisplay){var i=t.getPage(this.currentPageKey).getPageItemRefs().toArray();if(this._ignoredKeys.length){var r=[];this._ignoredKeys.forEach(function(e){r.push(i[e-1])}),(0,l.default)(i,function(e){return-1!=(0,a.default)(r,e)})}return i}if("question"==this._questionDisplay){var s=this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey]).pageItem;return s.isQuestion?[s.getId()]:[]}},navigate:function(e,t){(0,_.default)(m.default)({queryKey:!1}).push({pathname:"/surveys/design/test/"+e,query:t})},next:function(){var e=this,t=this._getQuestionKeys();this._SurveyRunner.validateSurvey(t).then(function(t){e._callStack.push({pageKey:e.currentPageKey,questionKey:e.currentQuestionKey}),e.prevPageKey=e.currentPageKey,e.currentPageKey=e.nextPageKey,"question"==e._questionDisplay&&(e.prevQuestionKey=e.currentQuestionKey,e.currentQuestionKey=e.nextQuestionKey),e.prepareState()})},previous:function(){var e=this._callStack.pop();this.currentPageKey=e.pageKey,"question"==this._questionDisplay&&(this.currentQuestionKey=e.questionKey),this.prepareState()},setIgnoreKeys:function(e,t){for(var n=this,i=e+1;i<t;i++){var r=this._allPages.getIn([i,"page"]),s=r.getPageItemRefs().toArray();(0,c.default)(s,function(e){n.updateState(n.state.setIn(["responses",e],""))})}},startTest:function(e){this._SurveyRunner=L.getSurveyRunnerModel(e),this.prepareSurveyStart()},stopTest:function(){this.reset(),M.default.stopTest(this._SurveyRunner)},finish:function(){var e=this,t=this._getQuestionKeys();this._SurveyRunner.validateSurvey(t).then(function(t){e._SurveyRunner=e._SurveyRunner.setStatus("completed"),e._db=new E.default("test"),e._db.allDocs({key:"data",include_docs:!0}).then(function(t){var n=g(t.rows,1),i=n[0],r=i?i.doc:{},u=e._SurveyRunner.getSurvey();return r=(0,s.default)(r,{_id:"data",survey:u.toJS(),responses:e.state.get("responses").toJS(),userProfile:{},isCommonLink:!1,isSurvey:u.getSurveyMarksTotal(),isTestMode:!0,completed:!0}),e._db.put(r)}).then(function(){e._SurveyRunner.getSurvey().getSurveyMarksTotal()?e.routeTo({pathname:"message/acknowledgement/test/data"}):e.routeTo({pathname:"message/thankyou",query:{testMode:!0}})}).catch(function(t){O.default.log(t),e.routeTo({pathname:"message/thankyou",query:{testMode:!0}})})})},routeTo:function(e){(0,_.default)(m.default)({queryKey:!1}).push(e)},prepareSurveyStart:function(){var e=this;this.reset(!0);var t=this._SurveyRunner.getSurvey();this._questionDisplay=t.getQuestionDisplay();var n=t.getTitle(),i=t.getDescription(),r=t.getShowHeader(),s={title:n,description:i,showHeader:r},u=t.getPagesSize();this.updateState(this.state.set("header",s),!0);for(var o=0;o<u;o++)!function(n){var i=t.getPage(n),r=0,s=0,o=[];if(e._allPages=e._allPages.setIn([n,"page"],i),"all"==e._questionDisplay&&((0,c.default)(e._pageSkipInfo,function(e,t){-1!=(0,a.default)(e,n)&&o.push(parseInt(t)+1)}),e._allPages=e._allPages.setIn([n,"info"],!!o.length&&"You can ignore this page if you attempted questions in page number "+o)),i.getLogic()){e._pageSkipInfo[n]=[];for(var l="eos"==i.getSkipTo()?u:parseInt(i.getSkipTo()),d=n+1;d<l;d++)e._pageSkipInfo[""+n].push(d)}i.getPageItemRefs().toArray().forEach(function(i,u){var a=t.getPageItem(i),o={};a.isQuestion?r++:s++,(0,c.default)(e._questionSkipInfo,function(e,t){(0,c.default)(e,function(e,i){(0,c.default)(e.skipTo.toJS(),function(u,a){"eos"!=u.pageNo?(parseInt(t)==n&&parseInt(i)<r+s&&(parseInt(u.pageNo)==n&&parseInt(u.questionNo)>r&&(o[e.id]=o[e.id]||[],o[e.id].push(a)),parseInt(u.pageNo)>n&&(o[e.id]=o[e.id]||[],o[e.id].push(a))),parseInt(t)<n&&(parseInt(u.pageNo)==n&&parseInt(u.questionNo)>r&&(o[e.id]=o[e.id]||[],o[e.id].push(a)),parseInt(u.pageNo)>n&&(o[e.id]=o[e.id]||[],o[e.id].push(a)))):(o[e.id]=o[e.id]||[],o[e.id].push(a))})})}),a.isQuestion?e._allPages=e._allPages.setIn([n,"questions",r+s],{index:r,pageItem:a,disableIf:o}).setIn([n,"count"],r+s):(e._allPages=e._allPages.setIn([n,"questions",r+s],{pageItem:a,disableIf:o}).setIn([n,"count"],r+s),e._ignoredKeys.push(r+s)),"yesno"!=a.getSubType()&&"multivalue"!=a.getSubType()||!a.getLogic()||(e._questionSkipInfo[n]=e._questionSkipInfo[n]||{},e._questionSkipInfo[n][r]={skipTo:a.getSkipTo(),id:a.getId()})})}(o);if(this._totalPage=this._allPages.size,"all"==this._questionDisplay&&(this.updateState(this.state.set("pages",this._allPages).set("showFinish",!0)),this.navigateToAll(t.getId())),"page"==this._questionDisplay){if(this.currentPageKey=0,this._totalPage>1){var l=this._allPages.get(this.currentPageKey),d=!0,f=this.currentPageKey+1;l.get("page").getLogic()&&(f=l.get("page").getSkipTo(),"eos"==f?(d=!1,this.updateState(this.state.set("showFinish",!0),!0)):f=parseInt(f)),this.nextPageKey=f,this.updateState(this.state.set("showNext",d),!0)}else this.updateState(this.state.set("showFinish",!0),!0);this.updateState(this.state.setIn(["pages","current"],this._allPages.get(this.currentPageKey))),this.navigateToAll(t.getId())}if("question"==this._questionDisplay){this.currentPageKey=0,this.currentQuestionKey=1;var h=this._allPages.get(this.currentPageKey);if(h=h.setIn(["questions"],P.default.Map()).setIn(["questions","current"],this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey])),this._totalPage>1)if(h.get("count")!=this.currentQuestionKey)this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0),!0);else{var g=!0,p=!1,v=this.currentPageKey+1;h.get("page").getLogic()&&(v=h.get("page").getSkipTo(),"eos"==v?(g=!1,p=!0):v=parseInt(v)),this.nextPageKey=v,this.nextQuestionKey=1,this.updateState(this.state.set("showNext",g).set("showFinish",p),!0)}else h.get("count")==this.currentQuestionKey?this.updateState(this.state.set("showFinish",!0),!0):(this.nextPageKey=this.currentPageKey,this.nextQuestionKey=this.currentQuestionKey+1,this.updateState(this.state.set("showNext",!0),!0));this.updateState(this.state.setIn(["pages",0],h)),this.navigateToAll(t.getId(),this._questionDisplay)}},reset:function(e){this._allPages=P.default.Map(),this._callStack=[],this._pageSkipInfo={},this._questionSkipInfo={},this._ignoredKeys=[],this._allPages=P.default.Map(),this.currentPageKey=null,this.currentQuestionKey=null,this.prevPageKey=null,this.prevQuestionKey=null,this.nextPageKey=null,this.nextQuestionKey=null,this.updateState(this.state.set("pages",P.default.Map()).set("showNext",!1).set("showPrev",!1).set("showFinish",!1).set("header",{}).set("responses",P.default.Map()),e)},navigateToAll:function(e){(0,_.default)(m.default)({queryKey:!1}).push("/surveys/design/test/"+e)},setResponse:function(e,t){this._SurveyRunner=this._SurveyRunner.setResponse(e,t),this.updateState(this.state.setIn(["responses",e],t)),this.checkEOS(e)},checkEOS:function(e){if("all"!=this._questionDisplay){var t=null;if("question"==this._questionDisplay&&(t=this._allPages.getIn([this.currentPageKey,"questions",this.currentQuestionKey]).pageItem),"page"==this._questionDisplay&&(t=this._SurveyRunner.getSurvey().getPageItem(e)),t&&("yesno"==t.getSubType()||"multivalue"==t.getSubType())&&t.getLogic()){var n=t.getSkipTo(),i=this.state.getIn(["responses",t.getId()]),r=n.get(i);if(r)if("eos"==r.pageNo)this.updateState(this.state.set("showNext",!1).set("showFinish",!0));else{var s=!0,u=!1;if(this._totalPage==this.currentPageKey+1&&(s=!1,u=!0,"question"==this._questionDisplay)){var a=this._allPages.getIn([this.currentPageKey,"count"]);a>this.currentQuestionKey&&(s=!0,u=!1)}this.updateState(this.state.set("showNext",s).set("showFinish",u))}else{var o=!0,l=!1;if(this._totalPage==this.currentPageKey+1&&(o=!1,l=!0,"question"==this._questionDisplay)){this._allPages.getIn([this.currentPageKey,"count"])>this.currentQuestionKey&&(o=!0,l=!1)}this.updateState(this.state.set("showNext",o).set("showFinish",l))}}}},setDisable:function(e,t){this.updateState(this.state.setIn(["disabled",e],t))}});t.default=A},413:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(395),s=i(r),u=n(438),a=i(u),o=n(24),l=i(o),d=n(22),c=i(d),f=n(9),h=i(f),g=n(414),p=i(g),v=n(40),y=i(v),m=n(798),S=(i(m),n(64)),_=i(S),b=n(28),P=n(8),I=i(P),T=n(6),w=i(T),k=n(30),M=i(k),D=n(799),C=(i(D),n(41)),R=i(C),O=n(800),x=i(O),E=(0,x.default)(),L=(0,c.default)({listenables:[p.default,M.default],_images:h.default.Map(),init:function(){this.state=h.default.Map({images:h.default.Map(),uploading:!1,openAddDialog:!1})},getInitialState:function(){return this.state},updateState:function(e,t){e&&(this.state=e),t||this.trigger(this.state)},userChanged:function(e,t){var n=this;return this._currentProfile=t,this._imageProvider=y.default.get("ImageProvider"),this._imageProvider.getImages().then(function(e){n.reset(),(0,l.default)(e.rows,function(e){if(e.doc){var t=E.fromModel(e.doc);n._images=n._images.set(t.getId(),t)}}),n.prepaireImages(n._images)})},reset:function(){this.updateState(this.state.set("images",h.default.Map()))},openAddDialog:function(){this.updateState(this.state.set("openAddDialog",!0))},closeAddDialog:function(){this.updateState(this.state.set("openAddDialog",!1))},addImages:function(e){var t=this;this.updateState(this.state.set("uploading",!0)),e.forEach(function(e){var n={name:e.name,mimeType:e.file.type,tags:e.tags},i=E.createImage(n),r=new FormData;r.append("file",e.file),r.append("userId",t._currentProfile._id),r.append("id",i.getId()),(0,R.default)({url:"/media",method:"post",data:r,headers:{"content-type":"multipart/form-data"}}).then(function(e){w.default.log(e);var n=e.data;return i=i.setHeight(n.height).setWidth(n.width).setThumbnail(n.thumbnail).setThumbnailInfo(n.thumbnailInfo).setVibrant(n.vibrant).setDarkVibrant(n.darkVibrant),t._imageProvider.addImages([i.toJS()])}).then(function(e){t.updateState(t.state.set("uploading",!1).set("openAddDialog",!1)),(0,l.default)(e.rows,function(e){var n=E.fromModel(e.doc);t._images=t._images.set(n.getId(),n),t.prepaireImages(t._images)})}).catch(function(e){t.updateState(t.state.set("uploading",!1).set("openAddDialog",!1)),w.default.error(e)})})},removeImage:function(e){},onDropReject:function(e){_.default.notify(b.Notifications.ERROR,I.default.t("File size limit(200kb) exceeded."))},search:function(e){if(e){var t=this._images.filter(function(t){var n=(0,a.default)(t.getName()),i=t.getTags().toArray(),r=!1;return(0,l.default)(n,function(t){if((0,s.default)(t.toLowerCase(),e.toLowerCase()))return r=!0,!1}),(0,l.default)(i,function(t){if((0,s.default)(t.toLowerCase(),e.toLowerCase()))return r=!0,!1}),r});this.prepaireImages(t)}else this.prepaireImages(this._images)},prepaireImages:function(e){e=e.sortBy(function(e){return e.getDate()}).reverse(),this.updateState(this.state.set("images",e))}});t.default=L},414:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["addImages","deleteImage","search","onDropReject","openAddDialog","closeAddDialog"]);t.default=s},432:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(149),s=i(r),u=n(22),a=i(u),o=n(9),l=i(o),d=n(30),c=i(d),f=n(394),h=i(f),g=n(433),p=i(g),v=n(64),y=i(v),m=n(28),S=n(8),_=i(S),b=n(40),P=i(b),I=n(209),T=(i(I),n(167)),w=i(T),k=n(153),M=i(k),D=(0,a.default)({listenables:[h.default,p.default,c.default],contactBeingEdited:null,groups:l.default.Set(),init:function(){this.state=l.default.fromJS({isAuthorizedUser:!1})},getInitialState:function(){return this.state},userChanged:function(e,t){if(this.updateState(this.state.set("isAuthorizedUser",!t.isGuest)),!t.isGuest)return this.updateState(this.state.set("isAuthorizedUser",!0)),this._currentProfile=t,this._groupsAndRecipientsProvider=P.default.get("GroupsAndRecipientsProvider"),this.updateGroups()},updateState:function(e,t){this.state=e,t||this.trigger(this.state)},updateGroups:function(){var e=this;return this._groupsAndRecipientsProvider.get().then(function(t){return e.groups=l.default.Set(t)})},addRecipient:function(e){var t=this;this._groupsAndRecipientsProvider.addRecipient(e).then(function(){t.updateGroups(),y.default.notify(m.Notifications.INFO,_.default.t("Contact added successfully"))})},deleteRecipient:function(e){var t=this;this._groupsAndRecipientsProvider.deleteRecipient(e).then(function(e){t.updateGroups(),y.default.notify(m.Notifications.INFO,_.default.t("The contact has been deleted"),_.default.t("undo"),h.default.undoRecipent.bind(null,e))})},undo:function(e){this._groupsAndRecipientsProvider.undo(e)},storeLastState:function(){this.lastState=l.default.fromJS({recipients:this.state.get("recipients"),groups:this.groups})},getAllGroups:function(){return this.groups.toArray()},ensureEmail:function(e){return this.contactBeingEdited?Promise.resolve():this._groupsAndRecipientsProvider.ensureEmail(e)},getRecipientDoc:function(e){return e?this._groupsAndRecipientsProvider.getRecipient(e):Promise.resolve()},optionsContactOpen:function(e,t){var n=this;this.getRecipientDoc(e).then(function(i){n.contactBeingEdited=i,n.contactSettingToolbar(e,t)})},contactSettingToolbar:function(e,t){var n=(0,w.default)(),i={fullName:e?this.contactBeingEdited.getFullName():"",email:e?this.contactBeingEdited.getEmail():"",groups:e?this.contactBeingEdited.getGroups().toArray():[]},r=e?_.default.t("Manage contact"):_.default.t("Add contact");n.addSettingsGroup(r).addSetting("fullName","string",_.default.t("Full Name"),{required:!0}).addSetting("email","string",_.default.t("Email"),{required:!0,type:"email",customValidation:this.ensureEmail}).addSetting("groups","groups",_.default.t("Groups"),{dataSource:this.getAllGroups,settingFor:_.default.t("Group")}),M.default.open(n.getSettingsDefinition(),i,h.default.optionsContactDone,null,t)},optionsContactDone:function(e){var t=this,n=e.fullName,i=e.email,r=e.groups;n=(0,s.default)(n),i=(0,s.default)(i),this.contactBeingEdited?(this.contactBeingEdited=this.contactBeingEdited.setFullName(n).setEmail(i).setGroups(r),this._groupsAndRecipientsProvider.updateRecipient(this.contactBeingEdited).then(function(e){t.updateGroups(),t.contactBeingEdited=null,y.default.notify(m.Notifications.INFO,_.default.t("Contact edited successfully"))}).catch(function(e){409===e.status&&(t.contactBeingEdited=null)})):this.addRecipient(e)},optionsEditGroupOpen:function(e,t){var n=(0,w.default)(),i={oldName:e,newName:""};n.addSettingsGroup().addSetting("oldName","string",_.default.t("Old Name"),{disabled:!0}).addSetting("newName","string",_.default.t("New Name"),{required:!0}),M.default.open(n.getSettingsDefinition(),i,p.default.optionsEditGroupDone,null,t)},optionsEditGroupDone:function(e){var t=this,n=e.oldName,i=e.newName;i=(0,s.default)(i),this._groupsAndRecipientsProvider.renameGroup(n,i).then(function(e){t.groups=e}).catch(function(e){throw e})},undoRecipients:function(){var e=this,t=[];this.lastState.get("recipients").map(function(n){var i=e.state.getIn(["recipients",n.getId()]);n!=i&&(n=n.setRev(i.getRev()),t.push(n))}),this._groupsAndRecipientsProvider.undoRecipients(t)},undoGroups:function(){var e=this;this._groupsAndRecipientsProvider.undoGroups(this.lastState.get("groups").toArray()).then(function(t){e.groups=t})},removeGroup:function(e){var t=this;this._groupsAndRecipientsProvider.removeGroup(e).then(function(){return t.updateGroups()}).catch(function(e){throw e})},add:function(e){var t=this;this._groupsAndRecipientsProvider.add(e).then(function(e){t.groups=e})},remove:function(e){var t=this;this.storeLastState(),this._groupsAndRecipientsProvider.remove(e).then(function(e){t.groups=e,y.default.notify(m.Notifications.INFO,_.default.t("The group has been deleted"),_.default.t("undo"),p.default.undoGroups)}).catch(function(e){throw e})}});t.default=D},433:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["add","remove","undoGroups","optionsEditGroupOpen","optionsEditGroupDone"]);t.default=s},436:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(24),u=i(s),a=n(22),o=i(a),l=n(39),d=(i(l),n(52)),c=(i(d),n(154),n(9)),f=i(c),h=n(32),g=i(h),p=n(30),v=i(p),y=n(40),m=i(y),S=n(155),_=i(S),b=n(130),P=i(b),I=n(8),T=(i(I),n(6)),w=i(T),k=n(437),M=i(k),D=(0,_.default)(),C=(0,P.default)(),R=(0,o.default)({listenables:[M.default,v.default],_publishedSurvey:null,init:function(){this.state=f.default.Map({survey:null,surveyResponses:f.default.Map(),info:f.default.Map()})},getInitialState:function(){return this.state},userChanged:function(e,t){this._publishedSurveyProvider=m.default.get("PublishedSurveyProvider",{PublishedSurveyModelProvider:C}),this._publishedSurveyResponseProvider=m.default.get("PublishedSurveyResponeseProvider")},updateState:function(e,t){this.state.equals(e)||(this.state=e,w.default.log("AnalysisStore:updateState",e.toJS()),t||this.trigger(this.state))},initializeAnalysis:function(e){var t=this;e&&this._publishedSurveyProvider.getUserPublishedSurvey(e).then(function(e){if(t._publishedSurvey=e,!t._publishedSurvey.getContacts().size)return void t.updateState(t.state.set("survey",t._publishedSurvey.getSurvey()));t.updateState(t.state.set("survey",t._publishedSurvey.getSurvey()),!0);var n=t._publishedSurvey.getContacts().map(function(e,n){return e.completed?g.default.try(function(){return t._publishedSurveyResponseProvider.getResponse(e.responseId).then(function(t){return{id:e.responseId,name:e.name,email:e.email,completed:!0,response:D.fromModel(t)}})}):g.default.try(function(){return g.default.resolve({id:e.responseId,name:e.name,email:e.email})})}).toArray();t.settleAll(n).then(function(e){var n=f.default.Map();(0,u.default)(e,function(e){if(!e.isRejected()){var t=e.value();n=n.set(t.id,t)}}),t.updateState(t.state.set("surveyResponses",n))})})},setInfo:function(e,t){if(t){var n=f.default.Map(r({},e,f.default.Set()));this.state.get("surveyResponses").map(function(i){if(i.completed&&i.response.getResponse(e)&&i.response.getResponse(e).toLowerCase()==(t&&t.toLowerCase())){var r={name:i.name,email:i.email,os:i.response.getOS(),browser:i.response.getBrowserName()};n=n.update(e,function(e){return e.add(r)})}}),this.updateState(this.state.set("info",this.state.get("info").merge(n)))}else this.state.setIn(["info",e],null)},reset:function(e){this.updateState(this.state.set("survey",null).set("surveyResponses",f.default.Map()).set("info",f.default.Map()),e)},settleAll:function(e){return g.default.all(e.map(function(e){return w.default.debug("promise",e),e.reflect()})).each(function(e){return w.default.log(e),e.isFulfilled()?e.value():e.reason()})}});t.default=R},437:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["initializeAnalysis","setInfo","reset"]);t.default=s},445:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}n(446);var r=n(164),s=i(r),u=n(255),a=(i(u),n(475)),o=(i(a),n(491)),l=i(o);(0,s.default)(),(0,l.default)()},446:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(447),s=(i(r),n(448)),u=(i(s),n(449)),a=(i(u),n(450)),o=(i(a),n(451)),l=(i(o),n(452));i(l)},447:function(e,t){},448:function(e,t){},449:function(e,t){},450:function(e,t){},451:function(e,t){},452:function(e,t){},475:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(476),s=i(r),u=n(241),a=i(u),o=n(266),l=i(o),d=n(479),c=(i(d),n(480)),f=i(c),h=l.default.registerError,g=function(e){if(!e)return Promise.resolve(null);var t=e.toJSON&&f.default.fromError(e);return e.toJSON?t.then(function(e){return e.map(function(e){var t=e.getFileName().split(/\?|\//),n=t[(0,a.default)(t,function(e){return(0,s.default)(e,".js")})];return e.setFileName(n),e.setSource("ORIGINAL_STACK_LINE"),JSON.stringify(e)})}):Promise.resolve(e)},p=function(e){return e&&(e.message||e.name||e.error)},v=function(e){var t=e.reason,n=e.type,i=e.detail;return g(t||i.reason).then(function(e){return{message:p(t)||p(i&&i.reason)||"error unknown",type:n,error:e}})},y=function(e,t){window.addEventListener(e,function(e){return t(e).then(h)})};y("error",function(e){var t=e.message,n=e.lineno,i=e.colno,r=e.error;return g(r).then(function(e){return{message:t,line:n,column:i,type:"window-error",error:e}})}),y("unhandledrejection",v),y("rejectionhandled",v)},491:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}var r=n(0),s=i(r),u=n(16),a=i(u),o=n(188),l=i(o),d=n(297),c=i(d),f=n(194),h=i(f),g=n(39),p=i(g),v=n(195),y=i(v),m=n(196),S=(i(m),n(299)),_=i(S),b=n(8),P=i(b),I=n(589),T=i(I),w=n(255),k=i(w),M=n(646),D=i(M),C=n(376),R=i(C),O=(l.default.RouteHandler,(0,y.default)(p.default)({queryKey:!1}));e.exports=function(){return P.default.init().then(function(){a.default.render(s.default.createElement(l.default,{history:O},s.default.createElement(h.default,{from:"/",to:"/surveys"}),s.default.createElement(c.default,{path:"/",component:k.default},s.default.createElement(c.default,{path:"/",component:D.default},s.default.createElement(c.default,{path:"home",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,933))})}),s.default.createElement(c.default,{path:"surveys",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,934))})},s.default.createElement(_.default,{component:(0,T.default)(function(){return n.e(0).then(n.bind(null,444))})}),s.default.createElement(c.default,{path:"design"},s.default.createElement(_.default,{component:(0,T.default)(function(){return n.e(0).then(n.bind(null,444))})}),s.default.createElement(c.default,{path:"edit",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,935))})},s.default.createElement(c.default,{path:":id",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,69))})})),s.default.createElement(c.default,{path:":mode",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,936))})},s.default.createElement(c.default,{path:":id",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,69))})}))),s.default.createElement(c.default,{path:"published"},s.default.createElement(c.default,{path:":id",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,937))})},s.default.createElement(c.default,{path:"survey",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,938))})},s.default.createElement(_.default,{component:(0,T.default)(function(){return n.e(0).then(n.bind(null,69))})})),s.default.createElement(c.default,{path:"contacts",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,939))})}),s.default.createElement(c.default,{path:"contacts/:responseId/:userName",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,940))})},s.default.createElement(_.default,{component:(0,T.default)(function(){return n.e(0).then(n.bind(null,69))})})),s.default.createElement(c.default,{path:"analysis",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,941))})}))),s.default.createElement(c.default,{path:"publish",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,942))})},s.default.createElement(c.default,{path:"step1",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,943))})}),s.default.createElement(c.default,{path:"step2",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,944))})}),s.default.createElement(c.default,{path:"step3",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,945))})}),s.default.createElement(c.default,{path:"step4",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,946))})}),s.default.createElement(c.default,{path:"step5",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,947))})}))),s.default.createElement(c.default,{path:"help",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,365))})}),s.default.createElement(c.default,{path:"contacts",component:(0,T.default)(function(){return n.e(0).then(n.bind(null,948))})})),s.default.createElement(c.default,{path:"/run",component:R.default},s.default.createElement(c.default,{path:":instanceId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,949))})},s.default.createElement(c.default,{path:":responseId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,69))})}))),s.default.createElement(c.default,{path:"/message",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,376))})},s.default.createElement(c.default,{path:"acknowledgement",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,950))})},s.default.createElement(c.default,{path:":instanceId/:responseId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,69))})})),s.default.createElement(c.default,{path:"/surveyavailibility"},s.default.createElement(c.default,{path:":instanceId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,951))})})),s.default.createElement(c.default,{path:"/geolocation"},s.default.createElement(c.default,{path:":instanceId/:responseId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,952))})})),s.default.createElement(c.default,{path:"signout/:instanceId/:responseId",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,953))})}),s.default.createElement(c.default,{path:"login/:id",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,954))})}),s.default.createElement(c.default,{path:"thankyou",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,955))})}),s.default.createElement(c.default,{path:"migration/failed",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,956))})}),s.default.createElement(c.default,{path:"completed",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,957))})}),s.default.createElement(c.default,{path:"migration/:id",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,958))})}),s.default.createElement(c.default,{path:"shared",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,959))})},s.default.createElement(c.default,{path:":id",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,69))})})))),s.default.createElement(c.default,{path:"*",component:(0,T.default)(function(){return n.e(1).then(n.bind(null,960))})})),document.getElementById("app"))})}},54:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var s=n(25),u=i(s),a=n(12),o=i(a),l=n(24),d=i(l),c=n(15),f=i(c),h=n(318),g=i(h),p=n(149),v=i(p),y=n(393),m=i(y),S=n(320),_=i(S),b=n(17),P=i(b),I=n(9),T=i(I),w=n(300),k=(i(w),n(81)),M=i(k),D=n(82),C=i(D),R=n(654),O=i(R),x={"1.0":function(){var e,t,n={singletext:"singletext",yesno:"yesno",datepicker:"datepicker",multivalue:"multivalue",code:"code"},i={image:"image",text:"text"},s={ALL:"all",PAGE:"page",QUESTION:"question"},a={UNCHECKED:"unchecked",SUCCESS:"success",FAILED:"failed"},l={Owner:{schema:{owner:{_id:"",name:""}},methods:{revivers:{owner:function(e){var t=e.owner,n=t||{_id:"",name:""},i=n._id,r=n.name;return this.setOwnerId(i).setOwnerName(r)}},getOwnerId:function(){return this.getIn(["owner","_id"])},setOwnerId:function(e){return(0,_.default)(e)?this:this.setIn(["owner","_id"],e)},getOwnerName:function(){return this.getIn(["owner","name"])},setOwnerName:function(e){return(0,m.default)(e)&&(e=(0,v.default)(e),e.length>0)?this.setIn(["owner","name"],e):this}}},Id:{schema:{_id:null},methods:{revivers:{_id:function(e){var t=e._id;return this.setId(t)}},getId:function(){return this.get("_id")},setId:function(e){return O.default.IdIsValid(e),this.setIn(["_id"],e)}}},Header:{schema:{header:{title:"",description:"",showHeader:!0}},methods:{revivers:{header:function(e){var t=e.header,n=t||{title:"",description:"",showHeader:!0},i=n.title,r=n.description,s=n.showHeader;return this.setTitle(i).setDescription(r).setShowHeader(s)}},getTitle:function(){return this.getIn(["header","title"])},setTitle:function(e){if((0,m.default)(e)){e=(0,v.default)(e);return this.set("header",T.default.Map(this.header)).setIn(["header","title"],e)}return this},getDescription:function(){return this.getIn(["header","description"])},setDescription:function(e){if((0,m.default)(e)){e=(0,v.default)(e);return this.set("header",T.default.Map(this.header)).setIn(["header","description"],e)}return this},getShowHeader:function(){return this.getIn(["header","showHeader"])},setShowHeader:function(e){if((0,g.default)(e)){return this.set("header",T.default.Map(this.header)).setIn(["header","showHeader"],e)}return this}}}};l.PageItem=(0,f.default)({schema:{type:"",subType:"",parentPageId:"",questionTimeOut:null},methods:{isPageItem:!0,revivers:{pageItem:function(e){var t=e.parentPageId,n=e.questionTimeOut;return this.setParentPageId(t).setQuestionTimeOut(n)}},getType:function(){return this.get("type")},getSubType:function(){return this.get("subType")},getParentPageId:function(){return this.get("parentPageId")},setParentPageId:function(e){return O.default.IdIsValid(e),this.set("parentPageId",e)},getQuestionTimeOut:function(){return this.get("questionTimeOut")},setQuestionTimeOut:function(e){return this.set("questionTimeOut",e)}}},l.Id),l.Question={Base:(0,f.default)({},l.Header,l.PageItem,{schema:{type:"question",validations:{}},methods:{isQuestion:!0,getValidations:function(){return this.get("validations")},validate:function(e){if(this.validators){for(var t=[],n=Object.keys(this.validators),i=0;i<n.length;i++){var r=n[i];t.push(this.validators[r].call(this,e))}return Promise.all(t)}return Promise.resolve()}}}),Validations:{Required:{schema:{validations:{required:!1}},methods:{revivers:{required:function(e){var t=e.validations,n=t.required;return this.setRequired(n)}},getRequired:function(){return this.getIn(["validations","required"])},setRequired:function(e){return(0,g.default)(e)?this.setIn(["validations","required"],e):this},validators:{checkRequired:function(e){var t=this;return new Promise(function(n,i){var s=null;return!e&&t.getRequired()?(s=r({},t.getId(),"This field is required."),i(s)):n()})}}}}}},l.Question[n.singletext]=(0,f.default)({},l.Question.Base,{schema:{subType:n.singletext}},l.Question.Validations.Required),l.Question[n.code]=(0,f.default)({},l.Question.Base,{schema:{subType:n.code,language:"javascript",codeValidator:"",quizMode:!0,markdown:!1,defaultTemplate:"",codeValidationStatus:T.default.Map({status:a.UNCHECKED,reason:""})},methods:{revivers:{code:function(e){var t=e.language,n=e.quizMode,i=e.codeValidator,r=e.markdown,s=e.defaultTemplate,u=e.codeValidationStatus;return this.setQuizMode(n).setLanguage(t).setCodeValidator(i).setCodeValidationStatus(u).setMarkdown(r).setDefaultTemplate(s)}},getLanguage:function(){return this.get("language")},setLanguage:function(e){return this.set("language",e||"javascript")},getQuizMode:function(){return this.get("quizMode")},setQuizMode:function(e){return this.set("quizMode",e)},getCodeValidator:function(){return this.get("codeValidator")},setCodeValidator:function(e){return this.set("codeValidator",e)},getMarkdown:function(){return this.get("markdown")},setMarkdown:function(e){return this.set("markdown",e)},getDefaultTemplate:function(){return this.get("defaultTemplate")},setDefaultTemplate:function(e){return this.set("defaultTemplate",e)},getCodeValidationStatus:function(){return this.getIn(["codeValidationStatus","status"])},getCodeValidationReason:function(){return this.getIn(["codeValidationStatus","reason"])},setCodeValidationStatus:function(e){return e?this.set("codeValidationStatus",T.default.Map(e)):this}}}),l.Question[n.yesno]=(0,f.default)({},l.Question.Base,{schema:{subType:n.yesno,quizMode:!1,answer:"",marks:1,logic:!1,skipTo:T.default.Map()},methods:{revivers:{yesno:function(e){var t=e.quizMode,n=e.answer,i=e.marks,r=e.logic,s=e.skipTo,u=this;return u=u.setQuizMode(t).setAnswer(n).setMarks(i).setLogic(r),(0,d.default)(s,function(e,t){u=u.setSkipTo(t,e)}),u}},getQuizMode:function(){return this.get("quizMode")},setQuizMode:function(e){return this.set("quizMode",e)},getAnswer:function(){return this.get("answer")},setAnswer:function(e){return this.set("answer",e)},getMarks:function(){return this.get("marks")},setMarks:function(e){return this.set("marks",e||1)},getLogic:function(){return this.get("logic")},setLogic:function(e){return(0,g.default)(e)?this.set("logic",e):this},getSkipTo:function(e){return e?this.getIn(["skipTo",e]):this.get("skipTo")},setSkipTo:function(e,t){return e&&t?this.setIn(["skipTo",e],t):this},removeSkipTo:function(e){return this.deleteIn(["skipTo",e])}}}),l.Question[n.datepicker]=(0,f.default)({},l.Question.Base,{schema:{subType:n.datepicker}},l.Question.Validations.Required),l.Question[n.multivalue]=(0,f.default)({},l.Question.Base,{schema:{subType:n.multivalue,options:["one","two"],quizMode:!1,answer:null,marks:1,displayType:"dropdown",logic:!1,skipTo:T.default.Map(),markdown:!1},methods:{revivers:{multivalue:function(e){var t=e.options,n=e.quizMode,i=e.answer,r=e.marks,s=e.displayType,u=e.logic,a=e.skipTo,o=e.markdown,l=this;return l=l.setOptions(t).setQuizMode(n).setAnswer(i).setMarks(r).setDisplayType(s).setLogic(u).setMarkdown(o),(0,d.default)(a,function(e,t){l=l.setSkipTo(t,e)}),l}},getOptions:function(){return this.get("options").toArray()},setOptions:function(e){return(0,o.default)(e)&&(e=T.default.List(e)),T.default.List.isList(e)?this.set("options",e):this},getQuizMode:function(){return this.get("quizMode")},setQuizMode:function(e){return this.set("quizMode",e)},getMarkdown:function(){return this.get("markdown")},setMarkdown:function(e){return this.set("markdown",e)},getAnswer:function(){return this.get("answer")},setAnswer:function(e){return this.set("answer",e)},getMarks:function(){return this.get("marks")},setMarks:function(e){return this.set("marks",e||1)},getDisplayType:function(){return this.get("displayType")},setDisplayType:function(e){return this.set("displayType",e)},getLogic:function(){return this.get("logic")},setLogic:function(e){return(0,g.default)(e)?this.set("logic",e):this},getSkipTo:function(e){return e?this.getIn(["skipTo",e]):this.get("skipTo")},setSkipTo:function(e,t){return e&&t?this.setIn(["skipTo",e],t):this},removeSkipTo:function(e){return this.deleteIn(["skipTo",e])}}},l.Question.Validations.Required),l.Decorator=(0,f.default)({},l.PageItem,{schema:{type:"decorator"},methods:{isQuestion:!1}}),l.Dimensions={schema:{dimensions:{width:"",height:""}},methods:{revivers:{dimensions:function(e){var t=e.dimensions;return this.setDimensions(t)}},getDimensions:function(){return this.get("dimensions")},setDimensions:function(e){return e?this.set("dimensions",T.default.Map()).setIn(["dimensions","width"],e.width).setIn(["dimensions","height"],e.height):this},getWidth:function(){return this.getIn(["dimensions","width"])},setWidth:function(e){return this.setIn(["dimensions","width"],e)},getHeight:function(){return this.getIn(["dimensions","height"])},setHeight:function(e){return this.setIn(["dimensions","height"],e)}}},l.Decorator[i.image]=(0,f.default)({},l.Decorator,l.Dimensions,l.Header,{schema:{subType:i.image,imageId:null},methods:{revivers:{image:function(e){var t=e.imageId;return this.setImageId(t)}},setImageId:function(e){return this.setIn(["imageId"],e)},getImageId:function(){return this.getIn(["imageId"])}}}),l.Decorator[i.text]=(0,f.default)({},l.Decorator,l.Header,{schema:{subType:i.text},methods:{revivers:{text:function(e){return this}}}}),l.Page=(0,f.default)({schema:{randomizeQuestions:!1,pageItemRefs:[],maxPageItemsAllowed:null,logic:!1,skipTo:"eos",totalPageMarks:0},methods:{isPage:!0,revivers:{page:function(e){var t=e.randomizeQuestions,n=e.pageItemRefs,i=e.maxPageItemsAllowed,r=e.logic,s=e.skipTo,u=e.totalPageMarks,a=this.setRandomizeQuestions(t).setMaxPageItemsAllowed(i).setLogic(r).setSkipTo(s).setPageMarksTotal(u);if((0,o.default)(n))for(var l=0;l<n.length;l++)a=a.addPageItemRef(n[l]);return a}},getRandomizeQuestions:function(){return this.get("randomizeQuestions")},setRandomizeQuestions:function(e){return(0,g.default)(e)?this.set("randomizeQuestions",e):this},getMaxPageItemsAllowed:function(){return this.get("maxPageItemsAllowed")},setMaxPageItemsAllowed:function(e){return this.set("maxPageItemsAllowed",e)},getLogic:function(){return this.get("logic")},setLogic:function(e){return(0,g.default)(e)?this.set("logic",e):this},getSkipTo:function(){return this.get("skipTo")},setSkipTo:function(e){return e||(e="eos"),this.set("skipTo",e)},getPageMarksTotal:function(){return this.get("totalPageMarks")},setPageMarksTotal:function(e){return this.set("totalPageMarks",e)},getPageItemRefsSize:function(){return this.get("pageItemRefs").size},getPageItemRefs:function(){return this.get("pageItemRefs").valueSeq()},getPageItemRef:function(e){return O.default.IndexIsInBounds(e,this.getPageItemRefsSize()),this.getIn(["pageItemRefs",e])},getPageItemRefIndex:function(e){return this.get("pageItemRefs").toArray().indexOf(e)},addPageItemRef:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1;O.default.IdIsValid(e);var n=this.getPageItemRefsSize();-1==t?t=n:O.default.IndexIsInBounds(t,n+1),O.default.PageItemRefIsNotInPage(this,e);var i=this.get("pageItemRefs");return i=i.insert(t,e),this.setIn(["pageItemRefs"],i)},removePageItemRef:function(e){var t=-1;if("number"==typeof e?(O.default.IndexIsInBounds(e,this.getPageItemRefsSize()),t=e):t=this.getPageItemRefIndex(e),-1==t)throw"The PageItemRef - "+e+" does not exist in page - "+this.getId()+".";return this.deleteIn(["pageItemRefs",t])},movePageItemRef:function(e,t){if(t==e)return this;if(-1==t)return this;if(t>this.size)return this;var n=this.getPageItemRef(e);return this.removePageItemRef(e).addPageItemRef(n,t)}}},l.Id,l.Header),l.Date={schema:{date:T.default.Map({created:"",updated:""})},methods:{revivers:{date:function(e){var t=e.date,n=t||{},i=n.created,r=n.updated;return this.setCreated(i).setUpdated(r)}},getDate:function(){return this.get("date")},getCreated:function(){return this.getIn(["date","created"])},setCreated:function(e){return e?this.setIn(["date","created"],e):this},getUpdated:function(){return this.getIn(["date","updated"])},setUpdated:function(e){return e?this.setIn(["date","updated"],e):this}}},l.Attachments={schema:{thumbnail:""},methods:{revivers:{attachments:function(e){var t=e.thumbnail;return this.setThumbnail(t)}},getThumbnail:function(){return this.getIn(["thumbnail"])},setThumbnail:function(e){return this.setIn(["thumbnail"],e)}}},l.Survey=(0,f.default)({schema:{_rev:null,_schemaVersion:"1.0",_isDeleted:!1,_ensureDefaults:!1,isTimer:!1,showMarksRunMode:!1,timeout:null,questionDisplay:s.QUESTION,minimumMarks:0,pages:[],pageItems:{},startFrom:0,surveyMarksTotal:0,restrictPrevious:!1},methods:{isSurvey:!0,revivers:{survey:function(e){var t=e._rev,n=e._ensureDefaults,i=e.pages,r=e.pageItems,s=e.isTimer,a=e.timeout,l=e.questionDisplay,d=e.minimumMarks,c=e.startFrom,f=e.showMarksRunMode,g=e.surveyMarksTotal,v=e.restrictPrevious,y=this;if((0,o.default)(i))for(var m=0;m<i.length;m++){var S=h.fromModel(i[m]);y=y.pushPage(S)}if((0,u.default)(r))for(var _=Object.keys(r),b=0;b<_.length;b++){var P=_[b],I=p.fromModel(r[P]);y=y.addPageItem(I)}return y.setRevision(t)._setEnsureDefaults(n).setIsTimer(s).setTimeout(a).setQuestionDisplay(l).setMinimumMarks(d).setStartFrom(c).setShowMarksRunMode(f).setSurveyMarksTotal(g).setRestrictPrevious(v)}},clone:function(){return this.setId((0,P.default)().str)},_getEnsureDefaults:function(){return this.get("_ensureDefaults")},_setEnsureDefaults:function(e){return(0,g.default)(e)?this.set("_ensureDefaults",e):this},getPages:function(){return this.get("pages")},getIsTimer:function(){return this.get("isTimer")},setIsTimer:function(e){return(0,g.default)(e)?this.set("isTimer",e):this},getShowMarksRunMode:function(){return this.get("showMarksRunMode")},setShowMarksRunMode:function(e){return(0,g.default)(e)?this.set("showMarksRunMode",e):this},getSurveyMarksTotal:function(){return this.get("surveyMarksTotal")},setSurveyMarksTotal:function(e){return this.set("surveyMarksTotal",e)},getRestrictPrevious:function(){return this.get("restrictPrevious")},setRestrictPrevious:function(e){return this.set("restrictPrevious",e)},getTimeout:function(){return this.get("timeout")},setTimeout:function(e){return this.set("timeout",e)},getStartFrom:function(){return this.get("startFrom")},setStartFrom:function(e){return this.set("startFrom",e)},getQuestionDisplay:function(){return this.get("questionDisplay")},setQuestionDisplay:function(e){return e&&s[e.toUpperCase()]?this.set("questionDisplay",e):this},getMinimumMarks:function(){return parseInt(this.get("minimumMarks"))},setMinimumMarks:function(e){return this.set("minimumMarks",parseInt(e))},getIsDeleted:function(){return this.get("_isDeleted")},setIsDeleted:function(e){return(0,g.default)(e)?this.set("_isDeleted",e):this},_ensureDefaultsPageItems:function(e){if(!this._getEnsureDefaults())return this;if(0==e.getPageItemRefsSize()){var t=p._createDefaultQuestion();return this.addPageItemToPageAndSurvey(e,t)}return this},_ensureDefaultPage:function(){if(!this._getEnsureDefaults())return this;if(0==this.getPagesSize()){var e=h._createDefaultPage();return this.pushPage(e)}return this},getRevision:function(){return this.get("_rev")},setRevision:function(e){return(0,_.default)(e)?this:this.setIn(["_rev"],e)},getPageItemsSize:function(){return this.get("pageItems").count()},getPageItemsKeys:function(){return this.get("pageItems").keySeq()},getPageItemBySubtype:function(e){return this.get("pageItems").filter(function(t){return t.getSubType()==e})},getPageItem:function(e){return O.default.IdIsValid(e),this.getIn(["pageItems",e])},addPageItem:function(e){return O.default.ItemIsPageItem(e),this.setIn(["pageItems",e.getId()],e)},addPageItemToPage:function(e,t,n){var i=e.isPage?e:this.getPage(e),r=t.isPageItem?t:this.getPageItem(t);O.default.ItemIsPageItem(t),O.default.PageItemIsPresentInSurvey(this,t);var s=this.getPageIndex(i);return i=i.addPageItemRef(r.getId(),n),r=r.setParentPageId(i.getId()),this.updatePage(s,i).updatePageItem(r)},addPageItemToPageAndSurvey:function(e,t,n){return O.default.PageItemIsNotPresentInSurvey(this,t),this.addPageItem(t).addPageItemToPage(e,t,n)},updatePageItem:function(e){return O.default.ItemIsPageItem(e),O.default.PageItemIsPresentInSurvey(this,e),this.setIn(["pageItems",e.getId()],e)},removePageItem:function(e){var t=e.isPageItem?e.getId():e;O.default.PageItemIsPresentInSurvey(this,t);var n=e.isPageItem?e.getParentPageId():this.getPageItem(e).getParentPageId(),i=n?this.getPage(this.getPageIndex(n)):null,r=this.deleteIn(["pageItems",t]);return i&&(i=i.removePageItemRef(t),r=r.updatePage(this.getPageIndex(i),i)),r._ensureDefaultsPageItems(i)},getPagesSize:function(){return this.get("pages").size},getPageIndex:function(e){var t=this.get("pages"),n=e.isPage?e.getId():e,i=t.findEntry(function(e,t){return e.getId()==n});return i?i[0]:-1},getPage:function(e){return O.default.IndexIsInBounds(e,this.getPagesSize()),this.getIn(["pages",e])},updatePage:function(e,t){return O.default.ItemIsPage(t),O.default.PageIsPresentInSurvey(this,t),O.default.IndexIsInBounds(e,this.getPagesSize()),this.setIn(["pages",e],t)},insertPage:function(e,t){O.default.ItemIsPage(t),O.default.IndexIsInBounds(e,this.getPagesSize());var n=this.get("pages").insert(e,t);return this.set("pages",n)._ensureDefaultsPageItems(t)},pushPage:function(e){O.default.ItemIsPage(e);var t=this.get("pages").push(e);return this.set("pages",t)._ensureDefaultsPageItems(e)},removePage:function(e){O.default.IndexIsInBounds(e,this.getPagesSize());var t=this.getPage(e),n=t.getPageItemRefs(),i=this,r=!0,s=!1,u=void 0;try{for(var a,o=n[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var l=a.value;i=i.removePageItem(l)}}catch(e){s=!0,u=e}finally{try{!r&&o.return&&o.return()}finally{if(s)throw u}}return i.deleteIn(["pages",e])._ensureDefaultPage()},movePage:function(e,t){if(t==e)return this;if(-1==t)return this;if(t>this.getPagesSize())return this;var n=this.getIn(["pages",e]),i=this.deleteIn(["pages",e]),r=i.get("pages").insert(t,n);return i.set("pages",r)}}},l.Id,l.Owner,l.Header,l.Date,l.Attachments);var c={Page:(0,M.default)(l.Page),Question:(e={},r(e,n.singletext,(0,M.default)(l.Question.singletext)),r(e,n.yesno,(0,M.default)(l.Question.yesno)),r(e,n.datepicker,(0,M.default)(l.Question.datepicker)),r(e,n.multivalue,(0,M.default)(l.Question.multivalue)),r(e,n.code,(0,M.default)(l.Question.code)),e),Decorator:(t={},r(t,i.image,(0,M.default)(l.Decorator.image)),r(t,i.text,(0,M.default)(l.Decorator.text)),t),Survey:(0,M.default)(l.Survey)},h={_createDefaultPage:function(){return this.create()},create:function(){var e={_id:(0,P.default)().str};return this.fromModel(e)},fromModel:function(e){var t=new c.Page;return(0,C.default)(t,e)}},p={QuestionTypes:n,DecoratorTypes:i,decorator:function(e,t){if(!i[e])throw"Unsupported subType "+e+".";if(!t)throw"Default is unavailable.";return t._id||(t._id=(0,P.default)().str),t.subType=e,new c.Decorator[e](t)},_createDefaultQuestion:function(){return this.question(n.singletext)},_createDefaultDecorator:function(){return this.decorator(i.text,{})},question:function(e,t){if(!n[e])throw"Unsupported subType "+e+".";return t||(t={_id:(0,P.default)().str,subType:e}),new c.Question[e](t)},fromModel:function(e){var t=e.type,n=e.subType;if("question"!==t&&"decorator"!==t)throw"Invalid model type - "+t;var i=null;return"question"==t&&(i=this.question(n)),"decorator"==t&&(i=this.decorator(n,e)),(0,C.default)(i,e)}},y=function(e){var t=new c.Survey;return(0,C.default)(t,e)},S=function(e){return e?y(e):(e={_id:(0,P.default)().str},new c.Survey(e))};return{PageFactory:h,PageItemFactory:p,fromModel:function(e){return S(e)},createEmptyModel:function(){return S()},createDefaultModel:function(){var e=this.createEmptyModel()._setEnsureDefaults(!0),t=h._createDefaultPage();return e=e.setShowHeader(!0),e=e.pushPage(t)}}}},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"1.0";return x[e]()};t.default=E},589:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(590),a=i(u),o=n(643),l=i(o),d=n(644),c=i(d),f=function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2];return(0,l.default)({loader:e,LoadingComponent:h(t),delay:1})},h=function(e){var t=e||a.default;return function(e){var n=e.isLoading,i=e.error,r=e.pastDelay;return n?r?s.default.createElement(t,null):null:i?(console.error(i),s.default.createElement(c.default,null)):null}};t.default=f},590:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(91),a=i(u),o=n(107),l=i(o),d=n(8),c=(i(d),n(229)),f=i(c),h={zIndex:{tooltip:5e3}},g=s.default.createClass({displayName:"DefaultLoader",render:function(){return s.default.createElement(l.default,{muiTheme:(0,a.default)({},h)},s.default.createElement("div",{className:"row center-xs"},s.default.createElement("div",{className:"col-xs-8",style:{padding:"2%"}},s.default.createElement(f.default,{size:40,left:0,top:0,status:"loading",style:{display:"inline-block",position:"relative"}}))))}});t.default=g},6:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={log:function(){},info:function(){},debug:function(){},warn:function(){},error:function(){}};t.default=i},64:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["notify"]);t.default=s},644:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(91),a=i(u),o=n(107),l=i(o),d=n(8),c=(i(d),n(229)),f=(i(c),n(102)),h=i(f),g=n(48),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(g),v={zIndex:{tooltip:5e3}},y=s.default.createClass({displayName:"ErrorLoader",render:function(){return s.default.createElement(l.default,{muiTheme:(0,a.default)({},v)},s.default.createElement("div",{className:"row center-xs"},s.default.createElement("div",{className:"col-xs-8",style:{padding:"2%",color:p.red500}},s.default.createElement("div",null,s.default.createElement(h.default,{className:"material-icons",color:p.red500},"error")),s.default.createElement("div",null,"Component failed to load"))))}});t.default=y},646:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(63),a=i(u),o=n(27),l=i(o),d=n(164),c=(i(d),n(91)),f=i(c),h=n(107),g=i(h),p=n(129),v=i(p),y=n(816),m=i(y),S=n(365),_=(i(S),n(8)),b=(i(_),n(252)),P=i(b),I=n(168),T=i(I),w=n(890),k=i(w),M=n(401),D={zIndex:{tooltip:5e3}},C=s.default.createClass({displayName:"App",mixins:[l.default,(0,a.default)(v.default,"AppState")],childContextTypes:{location:s.default.PropTypes.object,history:s.default.PropTypes.object},getChildContext:function(){return{location:this.props.location,history:this.props.history}},render:function(){var e=this,t=s.default.Children.map(this.props.children,function(t){return s.default.cloneElement(t,{isMobile:e.props.isMobile,isShort:e.props.isShort})}),n=this.props.isMobile;return s.default.createElement(g.default,{muiTheme:(0,f.default)({},D)},s.default.createElement(P.default,{customTheme:(0,T.default)({},n)},s.default.createElement("div",{key:this.state.AppState.get("language"),style:{height:"100%",overflow:"auto"}},s.default.createElement("div",null,s.default.createElement(m.default,{isMobile:this.props.isMobile,questionMode:this.state.AppState.get("questionMode")}),s.default.createElement("div",{className:"wr",style:{height:"100%"}},s.default.createElement("div",{className:"Demo"},t))))))}});t.default=(0,M.DragDropContext)((0,k.default)({enableMouseEvents:!0}))(C)},647:function(e,t,n){"use strict";(function(){e.exports.container=function(){var e,t,n,i,r,s,u,a,o,l;return n={},u=function(e,t){var n,i;if(e===Object(e)){n=e,i=[];for(e in n)t=n[e],i.push(a(e,t));return i}return a(e,t)},a=function(e,t){if(null==t)throw new Error("cannot register null function");return n[e]=l(t)},l=function(t){return"function"==typeof t?{func:t,required:e(t)}:{func:function(){return t},required:[]}},e=function(e){var t;if(null==(t=e.toString().match(/function.*?\(([\s\S]*?)\)/)))throw new Error("could not parse function arguments: "+(null!=e?e.toString():void 0));return t[1].split(",").filter(s).map(function(e){return e.trim()})},s=function(e){return e},i=function(e,t,s){var u,a,o,l;if(null==s&&(s=[]),l=null!=t,r(s,e))throw new Error("circular dependency with '"+e+"'");if(s=s.concat(e),null==(a=n[e]))throw new Error("dependency '"+e+"' was not registered");return null==a.instance||l?(u=a.required.map(function(e){return null!=(null!=t?t[e]:void 0)?null!=t?t[e]:void 0:i(e,t,s)}),o=a.func.apply(a,u),l||(a.instance=o),o):a.instance},r=function(e,t){var n;return n=function(e){return e===t},e.filter(n).length},o=function(e,t){return t||(t=e,e=null),u("__temp",t),i("__temp",e)},t={get:i,resolve:o,register:u},t.register("_container",t),t}}).call(void 0)},654:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s={ItemIsDefined:function(e){if(void 0===e)throw"Undefined value specified."},IdIsValid:function(e){if(!r.default.isValid(e))throw"Invalid id - "+e},IndexIsInBounds:function(e,t){if("number"!=typeof e)throw e+" is an invalid index value.";if(e<0||e>=t)throw e+" is out of bounds."},ItemIsSurvey:function(e){if(this.ItemIsDefined(e),!e.isSurvey)throw"The object is not a valid survey."},ItemIsPage:function(e){if(this.ItemIsDefined(e),!e.isPage)throw"The object is not a valid page."},ItemIsPageItem:function(e){if(this.ItemIsDefined(e),!e.isPageItem)throw"The object is not a valid page item."},isQuestion:function(e){if(this.ItemIsDefined(e),!e.isQuestion)throw"The object is not a valid question."},PageIsPresentInSurvey:function(e,t){var n=t.isPage?t.getId():t;if(-1==e.getPageIndex(n))throw"The page - "+n+" does not exist in the survey - "+e.getId()},PageItemIsPresentInSurvey:function(e,t){var n=t.isPageItem?t.getId():t;if(!e.getPageItem(n))throw"The page item - "+n+" does not exist in the survey - "+e.getId()},PageItemIsNotPresentInSurvey:function(e,t){var n=t.isPageItem?t.getId():t;if(e.getPageItem(n))throw"The page item - "+n+" already exists in the survey - "+e.getId()},PageItemRefIsNotInPage:function(e,t){var n=e.getPageItemRefs(),i="The item - "+t+" already exists in the page - "+e.getId(),r=!0,s=!1,u=void 0;try{for(var a,o=n[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){if(a.value==t)throw i}}catch(e){s=!0,u=e}finally{try{!r&&o.return&&o.return()}finally{if(s)throw u}}}};t.default=s},655:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=(function(e){e&&e.__esModule}(i),{});t.default=r},672:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),s=function(){function e(t){i(this,e),this.ContactBuilder=t}return r(e,[{key:"fromRecipientModel",value:function(e){var t=e.toJS();return 0==t._deleted&&delete t._deleted,t.docType="contact",t}},{key:"toRecipientModel",value:function(e){return e._id?this.ContactBuilder.fromModel(e):this.ContactBuilder.createContact(e)}}]),e}();t.default=s},692:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(90),s=i(r),u=n(6),a=i(u),o=function(e,t){function n(e){r.changes=e.changes({since:"now",live:!0,conflicts:!0}).on("change",function(e){a.default.debug("changes",e),r.replicationHandle&&(clearTimeout(r.replicationHandle),r.replicationHandle=null,a.default.debug("previous sync call is aborted.")),r.replicationHandle=setTimeout(i.bind(r),300)}).on("complete",function(e){a.default.debug("Changes are done.")}).on("error",function(e){a.default.error(e)})}function i(){r.DB==r.localDB&&(r.emit("delta-sync-started"),r.DB.sync(t,{filter:"documents/typed"}).on("change",function(e){r.emit("delta-sync-changes-detected",e),a.default.debug("changes",e)}).on("denied",function(e){r.emit("delta-sync-failed",e),a.default.error(e)}).on("complete",function(e){r.replicationHandle=null,a.default.debug("Changes are synchronized"),r.emit("delta-sync-completed",e),r.pendingDestroy&&(a.default.debug("Pending destroy detected, invoking it."),r.destroy().then(function(){r.pendingDestroy(),r.pendingDestroy=null}))}).on("error",function(e){r.emit("delta-sync-failed",e),a.default.error(e)}))}var r=this;this.isSynchronized=!1,this.remoteDB=t,this.localDB=e,this.DB=this.remoteDB,this.pendingDestroy=null,r.emit("initial-sync-started"),this.localDB.sync(t,{filter:"documents/typed"}).on("change",function(e){r.emit("initial-sync-changes-detected",e),a.default.debug("Initial sync > changes detected",e)}).on("denied",function(e){r.DB=r.localDB,r.emit("initial-sync-failed",e),a.default.error(e)}).on("complete",function(e){a.default.debug("Initial sync completed."),r.DB=r.localDB,r.emit("initial-sync-completed",e),n(r.DB)}).on("error",function(e){r.DB=r.localDB,r.emit("initial-sync-failed",e),a.default.error(e)}),this.remoteDB.changes({since:"now",live:!0,include_docs:!0}).on("change",function(e){a.default.debug("delta-remote-changes-detected: ",e);var t=e.doc;"surveyresponse"!==t.docType&&"publishedsurvey"!==t.docType||i()}).on("error",function(e){a.default.error("delta-remote-error-detected: "+e),r.emit("delta-remote-error-detected",e)})};t.default=o,o.prototype=Object.create(s.default.prototype),o.prototype.createIndex=function(e){return this.localDB.createIndex(e)},o.prototype.destroy=function(e){var t=this;return this.replicationHandle?(a.default.debug("Destroy > Detected pending sync. Pooled the destroy."),new Promise(function(e,n){t.pendingDestroy=e})):(this.cancelChanges(),this.localDB.destroy(e))},o.prototype.find=function(e){return this.DB.find(e)},o.prototype.getIndexes=function(){return this.DB.getIndexes()},o.prototype.deleteIndex=function(e){return this.DB.deleteIndex.apply(e)},o.prototype.get=function(){return this.DB.get.apply(this.DB,arguments)},o.prototype.allDocs=function(){return this.DB.allDocs.apply(this.DB,arguments)},o.prototype.put=function(){return this.DB.put.apply(this.DB,arguments)},o.prototype.post=function(){return this.DB.post.apply(this.DB,arguments)},o.prototype.bulkDocs=function(){return this.DB.bulkDocs.apply(this.DB,arguments)},o.prototype.remove=function(){return this.DB.remove.apply(this.DB,arguments)},o.prototype.changes=function(){return this.DB.changes.apply(this.DB,arguments)},o.prototype.replicate=function(){return this.DB.replicate.apply(this.DB,arguments)},o.prototype.sync=function(){return this.DB.sync.apply(this.DB,arguments)},o.prototype.putAttachment=function(){return this.DB.putAttachment.apply(this.DB,arguments)},o.prototype.getAttachment=function(){return this.DB.getAttachment.apply(this.DB,arguments)},o.prototype.removeAttachment=function(){return this.DB.removeAttachment.apply(this.DB,arguments)},o.prototype.query=function(){return this.DB.query.apply(this.DB,arguments)},o.prototype.info=function(){},o.prototype.cancelChanges=function(){this.changes.cancel&&this.changes.cancel()}},700:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={documents:{_id:"_design/documents",filters:{typed:function(e,t){var n=!!(t&&t.query&&t.query.type)&&t.query.type;return n?e.docType===n:"docType"in e}}}}},701:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={getByDocType:{_id:"_design/getByDocType",views:{typed:{map:function(e){e.docType&&emit(e.docType)}}},language:"javascript"},custom:{_id:"_design/custom",views:{surveyIdAndTitle:{map:function(e){e.docType&&e.header&&emit(e.docType,{id:e._id,title:e.header.title})}},passedCandidate:{map:function(e){"surveyresponse"==e.docType&&e.obtainedMarks>=e.survey.minimumMarks&&emit(e._id,{minimumMarks:e.survey.minimumMarks,obtainedMarks:e.obtainedMarks})}}},language:"javascript"},search:{_id:"_design/search",views:{recipientsByFullName:{map:function(e){e.fullName&&"contact"==e.docType&&emit(e.fullName.toLowerCase())}},recipientsByEmail:{map:function(e){e.email&&"contact"==e.docType&&emit(e.email)}},recipientsByGroups:{map:function(e){if(e.groups&&"contact"==e.docType)for(var t=0;t<e.groups.length;t++)e.groups[t]&&emit(e.groups[t])}},recipientsByKey:{map:function(e){if(e.fullName&&"contact"==e.docType&&emit(e.fullName.toLowerCase()),e.email&&"contact"==e.docType&&emit(e.email),e.groups&&"contact"==e.docType)for(var t=0;t<e.groups.length;t++)e.groups[t]&&emit(e.groups[t])}}},language:"javascript"}}},702:function(e,t,n){"use strict";e.exports={docType:{index:{fields:["docType"]},name:"docType",ddoc:"doctype"},groups:{index:{fields:["docType","groups"]},name:"groups",ddoc:"groups"},publishedSurveys:{index:{fields:["docType","date.updated"]},name:"publishedsurveys",ddoc:"publishedsurveys"},date:{index:{fields:["date.updated"]},name:"date",ddoc:"date"},contact:{index:{fields:["docType","fullName","email","groups"]},name:"contact",ddoc:"contact"}}},72:function(e,t,n){"use strict";var i=n(32);e.exports=function(e){return i.all(e.map(function(e){return e.reflect()})).each(function(e){return e.isFulfilled()?e.value():e.reason()})}},742:function(e,t){},752:function(e,t){},765:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(156),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s={validEmail:function(e){if(!e)throw TypeError("Email is required.");if(!r.default.email.test(e))throw TypeError("Email is not valid.")},validFullName:function(e){if(!e)throw TypeError("Name is required.")}};t.default=s},772:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(14),r=function(e){return e&&e.__esModule?e:{default:e}}(i),s=r.default.createActions(["dataLoaded","dataStored"]),u=r.default.createActions(["loadData","storeData"]);t.default={DataStorageClientActions:s,DataStorageActions:u}},788:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(17),s=i(r),u=n(9),a=i(u),o=n(54),l=i(o),d=n(81),c=i(d),f=n(82),h=i(f),g=n(789),p=(i(g),n(790)),v=i(p),y=function(){var e=["1.0"];return e["1.0"]=function(e){var t={schema:{_id:"",survey:{},_schemaVersion:"1.0",docType:"surveyresponse",status:"pending",responses:a.default.Map(),participantDetails:{}},methods:{validateSurvey:function(e){for(var t=this.getSurvey(),n=[],i=0;i<e.length;i++)n.push(t.getPageItem(e[i]).validate(this.getResponse(e[i])));return Promise.all(n)},revivers:{surveyRunner:function(e){var t=e._id,n=e.survey,i=e.responses,r=e.status,s=e.participantDetails,u=this;return n=(0,l.default)(n._schemaVersion).fromModel(n),u.setId(t).setSurvey(n).setStatus(r).setResponses(a.default.Map(i)).setParticipantDetails(s)}},getId:function(){return this.get("_id")},setId:function(e){return this.setIn(["_id"],e)},getSurvey:function(){return this.get("survey")},setSurvey:function(e){return this.setIn(["survey"],e)},getStatus:function(){return this.get("status")},setStatus:function(e){return this.setIn(["status"],e)},getResponses:function(){return this.get("responses")},setResponses:function(e){return this.setIn(["responses"],e)},getResponse:function(e){return this.getIn(["responses",e])},setResponse:function(e,t){var n=v.default.responseObj(e,t);return this.setIn(["responses",e],n[e])},getParticipantDetails:function(){return this.get("participantDetails")},setParticipantDetails:function(e){return this.setIn(["participantDetails"],e)}}},n={SurveyRunner:(0,c.default)(t)},i=function(e){var t=new n.SurveyRunner;return(0,h.default)(t,e)};return function(e){if(e=v.default.surveyOrModel(e),!e.docType){var t=(0,l.default)(e._schemaVersion),r={_id:(0,s.default)().str,survey:t.fromModel(e)};return new n.SurveyRunner(r)}return i(e)}(e)},{getSurveyRunnerModel:function(t){var n="1.0";return t._schemaVersion&&(n=t._schemaVersion),e[n](t)},fromModel:function(t){var n="1.0";return t._schemaVersion&&(n=t.survey._schemaVersion),e[n](t)}}},m=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];return y()};t.default=m},789:function(e,t,n){"use strict"},790:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=n(25),s=function(e){return e&&e.__esModule?e:{default:e}}(r),u={responseObj:function(e,t){return"string"==typeof t?""==t&&(t=null):t&&!t.length&&(t=null),i({},e,t)},surveyOrModel:function(e){return(0,s.default)(e)?e:e.toJSON()}};t.default=u},794:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=(function(e){e&&e.__esModule}(i),{});t.default=r},8:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(105),s=i(r),u=n(300),a=i(u),o=n(302),l=i(o),d=n(32),c=i(d),f=n(587),h=i(f),g=n(6),p=i(g),v=n(28),y=window.navigator.userLanguage||window.navigator.language||"en-US";-1==(0,s.default)(v.SupportedLanguagesCollection,y)&&(y="en-US");var m={debug:!1,lng:y,load:"currentOnly",returnObjects:!1,postProcess:!1,pluralSeparator:"_",contextSeparator:"_",interpolation:{escapeValue:!0,prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")"},fallbackLng:"en-US",backend:{loadPath:"/locale/{{lng}}/translation.json"}};t.default={_i18n:null,init:function(){var e=this;return this._i18n=a.default.use(l.default).use(h.default),new c.default(function(t,n){e._i18n.init(m,function(e,i){return e?n(e):t(i)})}).then(function(t){e.t=e._i18n.t.bind(e._i18n)}).catch(function(e){throw p.default.error("Error initializing i18n..."),p.default.error(e),e})},setLanguage:function(e){return m.lng=e,this.init()},t:function(){throw'i18n not initialized yet. Please invoke "init" method first.'}}},800:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(17),a=i(u),o=n(32),l=(i(o),n(9)),d=i(l),c=n(156),f=(i(c),n(81)),h=i(f),g=n(82),p=i(g),v=n(801),y=(i(v),function(){var e=function(e){var t={schema:{_id:"",_rev:"",mimeType:"",name:"",uri:"",tags:d.default.Set(),vibrant:null,darkVibrant:null,description:"",date:new Date},methods:{revivers:{image:function(e){var t=e._id,n=e._rev,i=e.mimeType,r=e.name,s=e.uri,u=e.description,a=e.date,o=e.vibrant,l=e.darkVibrant,d=e.tags;return this.setId(t).setRev(n).setMimeType(i).setName(r).setURI(s).setTags(d).setVibrant(o).setDarkVibrant(l).setDescription(u).setDate(a)}},getId:function(){return this.get("_id")},setId:function(e){return this.set("_id",e)},getRev:function(){return this.get("_rev")},setRev:function(e){return this.set("_rev",e)},getMimeType:function(){return this.get("mimeType")},setMimeType:function(e){return this.set("mimeType",e)},getName:function(){return this.get("name")},setName:function(e){return this.set("name",e)},getVibrant:function(){return this.get("vibrant")},getVibrantColor:function(){var e=this.get("vibrant");return e&&"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},setVibrant:function(e){return this.set("vibrant",e)},getDarkVibrant:function(){return this.get("darkVibrant")},getDarkVibrantColor:function(){var e=this.get("darkVibrant");return e&&"rgb("+e[0]+", "+e[1]+", "+e[2]+")"},setDarkVibrant:function(e){return this.set("darkVibrant",e)},getURI:function(){return this.get("uri")},setURI:function(e){return this.set("uri",e)},getTags:function(){return this.get("tags").toSeq()},setTag:function(e){return this.set("tags",this.get("tags").add(e))},setTags:function(e){return e=d.default.Set(e),this.set("tags",e)},getDescription:function(){return this.get("description")},setDescription:function(e){return this.set("description",e)},getDate:function(){return this.getIn(["date"])},setDate:function(e){if(!e)return this;var t=new Date(e);return this.setIn(["date"],t)}}};t.Dimensions={schema:{dimensions:{width:"",height:""}},methods:{revivers:{dimensions:function(e){var t=e.dimensions;return this.setDimensions(t)}},getDimensions:function(){return this.get("dimensions")},setDimensions:function(e){return e?this.setIn(["dimensions","width"],e.width).setIn(["dimensions","height"],e.height):this},getWidth:function(){return this.getIn(["dimensions","width"])},setWidth:function(e){return this.setIn(["dimensions","width"],e)},getHeight:function(){return this.getIn(["dimensions","height"])},setHeight:function(e){return this.setIn(["dimensions","height"],e)}}},t.Attachments={schema:{_attachments:{image:""}},methods:{revivers:{attachments:function(e){var t=e._attachments;return this.setThumbnail(t)}},getThumbnail:function(){var e=this.getIn(["_attachments","image"]).data;return"data:"+this.getMimeType()+";base64,"+e},setThumbnail:function(e){return e?this.setIn(["_attachments","image"],e.image):this}}},t.Thumbnail={schema:{thumbnail:{height:"",width:"",orignal:""}},methods:{revivers:{thumbnail:function(e){var t=e.thumbnail;return this.setThumbnailInfo(t)}},setThumbnailInfo:function(e){return e?this.setIn(["thumbnail"],d.default.Map(e)):this},getThumbnailHeight:function(){return this.getIn(["thumbnail","height"])},setThumbnailHeight:function(e){return this.setIn(["thumbnail","height"],e)},getThumbnailWidth:function(){return this.getIn(["thumbnail","width"])},setThumbnailWidth:function(e){return this.setIn(["thumbnail","width"],e)},isThumbnailOrignal:function(){return this.getIn(["thumbnail","orignal"])}}},t.Image=(0,s.default)(t,t.Dimensions,t.Attachments,t.Thumbnail);var n={Image:(0,h.default)(t.Image)},i=function(e){var t=new n.Image;return(0,p.default)(t,e)};return function(e){if(!e._id){var e={_id:(0,a.default)().str,name:e.name,description:e.description,mimeType:e.mimeType,tags:e.tags};return new n.Image(e)}return i(e)}(e)};return{createImage:function(t){return e(t)},fromModel:function(t){return e(t)}}});t.default=y},801:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(17),r=(function(e){e&&e.__esModule}(i),{});t.default=r},81:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(409),s=i(r),u=n(652),a=i(u),o=n(12),l=i(o),d=n(25),c=i(d),f=n(9),h=i(f);t.default=function(e){var t=function e(t,n){return(0,c.default)(t)||(0,l.default)(t)?(0,c.default)(t)?(0,a.default)(t)?h.default.Map():((0,s.default)(t,function(t,n,i){i[n]=e(t,!0)}),n?new(h.default.Record(t)):h.default.Record(t)):(0,l.default)(t)?h.default.List(t):void 0:t}(e.schema);return Object.assign(t.prototype,e.methods),t}},814:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(15),s=i(r),u=n(250),a=i(u),o=n(240),l=i(o),d=n(815),c=i(d),f=n(22),h=i(f),g=n(9),p=(i(g),n(266)),v=i(p),y=n(41),m=(i(y),n(17)),S=i(m),_=n(40),b=i(_),P=n(6),I=i(P),T=n(30),w=i(T),k=n(188),M=(i(k),n(246)),D=i(M),C=n(360),R=(i(C),(0,h.default)({listenables:[v.default,w.default],_errors:[],_userProfile:{},userChanged:function(e,t){this._userProfile=t},registerError:function(e){var t=this,n=this;clearTimeout(this.callRegisterErrors),n._errors.push(e),this.callRegisterErrors=setTimeout(function(){n._errors=(0,c.default)(n._errors,l.default),t.postToServer(n._errors)},3e3)},postToServer:function(e){var t=this._getUserInfo();(0,a.default)(e,function(e){e=(0,s.default)(e,t,{docType:"client-error",_id:(0,S.default)().str})}),this._errorProvider=b.default.get("ErrorProvider"),this._errorProvider.reportErrors(e).then(function(e){I.default.log("ErrorDocs synched in localDB"),I.default.log(e)}).catch(function(e){I.default.log(e)})},_getUserInfo:function(){var e=this._userProfile;return{userInfo:{name:e.name,email:e.email,userDbUrl:e.userDbUrl,route:window.location.href,operatingSystem:D.default.os.toString(),browser:D.default.name,description:D.default.description,userAgent:D.default.ua}}}}));t.default=R},816:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},s=n(0),u=i(s),a=n(27),o=i(a),l=n(817),d=i(l),c=n(233),f=i(c),h=n(835),g=i(h),p=n(8),v=i(p),y=n(836),m=i(y),S=n(870),_=i(S),b=n(157),P=i(b),I=n(147),T=i(I),w=n(881),k=(i(w),n(154),u.default.createClass({displayName:"SiteHeader",mixins:[o.default],getInitialState:function(){return{open:!1}},handleToggle:function(){this.setState({open:!this.state.open})},closeMenu:function(){this.setState({open:!1})},gotoHome:function(){var e=this.context.router,t=e.createLocation("/");e.push(t)},getSiteHeader:function(){var e=this;if(this.props.isMobile)return u.default.createElement("div",null,u.default.createElement(f.default,{title:u.default.createElement("div",{style:{cursor:"pointer",width:"20%"},onClick:this.gotoHome},v.default.t("quizMe")),titleStyle:r({},this.context.customTheme.siteHeader),style:{position:"fixed",zIndex:1200},iconClassNameRight:"muidocs-icon-navigation-expand-more",onLeftIconButtonTouchTap:this.handleToggle},u.default.createElement(T.default,{style:{right:-12,top:13}},u.default.createElement(P.default,null))),u.default.createElement(d.default,{width:285,docked:!1,open:this.state.open,onRequestChange:function(t){return e.setState({open:t})},containerStyle:{overflow:"hidden !important"}},u.default.createElement(f.default,{title:u.default.createElement("div",{style:this.context.customTheme.smallText},v.default.t("quizMe")),iconElementLeft:u.default.createElement("img",{src:"../../images/navIcon.png",alt:"navImg",style:{height:32,padding:7}})}),u.default.createElement(_.default,{closeMenu:this.closeMenu}),u.default.createElement("footer",{className:"center-xs ft"},u.default.createElement(g.default,null))));var t=u.default.createElement(m.default,this.props);return u.default.createElement(f.default,{title:u.default.createElement("div",{style:{cursor:"pointer",width:"20%"},onClick:this.gotoHome},v.default.t("quizMe")),titleStyle:r({},this.context.customTheme.siteHeader),showMenuIconButton:!1,iconElementRight:t,iconStyleRight:{flex:1.5,marginRight:4}})},render:function(){return u.default.createElement("div",null,this.getSiteHeader())}}));k.contextTypes={customTheme:u.default.PropTypes.object,router:u.default.PropTypes.object},t.default=k},82:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(24),r=function(e){return e&&e.__esModule?e:{default:e}}(i);t.default=function(e,t){var n=e.revivers,i=Object.keys(n);return(0,r.default)(i,function(i){e=n[i].call(e,t)}),e}},835:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(27),a=i(u),o=s.default.createClass({displayName:"Footer",mixins:[a.default],render:function(){return s.default.createElement("div",{style:{padding:10}},s.default.createElement("div",null,"Copyright  Paragyte"))}});t.default=o},836:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(16),a=i(u),o=n(27),l=i(o),d=n(235),c=i(d),f=n(236),h=i(f),g=n(380),p=(i(g),n(147)),v=i(p),y=n(161),m=i(y),S=n(227),_=(i(S),n(8)),b=i(_),P=n(839),I=i(P),T=n(157),w=i(T),k=n(143),M=i(k),D=[{title:"Surveys",path:"/surveys"},{title:"Contacts",path:"/contacts"}],C=s.default.createClass({displayName:"HeaderTabs",mixins:[l.default],contextTypes:{history:s.default.PropTypes.object.isRequired,location:s.default.PropTypes.object.isRequired,customTheme:s.default.PropTypes.object},_handleActive:function(e){"/surveys"==e.props.value&&M.default.tabChanged();var t=this.props.router,n=t.createLocation(e.props.value);t.push(n)},getTabIndexFromPath:function(e){var t=D.findIndex(function(t){return t.path==e});return t<0&&(t=0),"surveys"==e.split("/")[1]&&(t=0),t},componentWillMount:function(){window.React||(window.React=s.default,window.ReactDOM=a.default)},renderTabs:function(){var e=this;return D.map(function(t,n){return s.default.createElement(h.default,{className:"tabs-Mob",style:{width:100},key:n.toString(),value:t.path,label:b.default.t(t.title),onActive:e._handleActive})})},render:function(){var e=this.getTabIndexFromPath(this.context.location.pathname),t=this.context.customTheme.isMobile;return s.default.createElement("div",null,!t&&s.default.createElement("div",null,s.default.createElement("div",{className:"row"},s.default.createElement("div",{className:"col-xs flex-xs-middle"},s.default.createElement(v.default,null,s.default.createElement(c.default,{initialSelectedIndex:e,ref:"tabs"},this.renderTabs()))),s.default.createElement("div",{className:"end-xs flex-xs-middle",style:{display:"flex"}},s.default.createElement("div",{className:"mat3"},s.default.createElement("div",{className:"col-xs-12 col-md-8"},s.default.createElement(I.default,null))),s.default.createElement("div",{className:"end-xs",style:{padding:6}},s.default.createElement(w.default,null))))))}});t.default=(0,m.default)(C)},839:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),s=i(r),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=i(a),l=n(63),d=i(l),c=n(27),f=i(c),h=n(100),g=i(h),p=n(28),v=n(48),y=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),m=n(129),S=i(m),_=n(379),b=i(_),P=n(103),I=i(P),T=o.default.createClass({displayName:"LanguageMenu",mixins:[f.default,(0,d.default)(S.default,"appCollection")],handleChange:function(e,t,n){this.setState({value:n}),g.default.changeLanguage(n),e.preventDefault()},render:function(){var e=[],t=this,n=this.state.appCollection.getIn(["language"]);(0,s.default)(p.SupportedLanguages,function(n,i){e.push(o.default.createElement(I.default,{key:n,value:n,primaryText:i,style:t.context.customTheme.menuItem}))});return o.default.createElement(b.default,{labelStyle:u({color:y.white},this.context.customTheme.DropDownMenu),menuStyle:this.context.customTheme.DropDownMenu,value:n,onChange:this.handleChange},e)}});T.contextTypes={customTheme:o.default.PropTypes.object},t.default=T},870:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(24),s=i(r),u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},a=n(0),o=i(a),l=n(63),d=i(l),c=n(390),f=n(27),h=i(f),g=n(103),p=i(g),v=n(382),y=i(v),m=n(102),S=i(m),_=n(48),b=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(_),n(235)),P=(i(b),n(236)),I=(i(P),n(161)),T=i(I),w=n(28),k=n(880),M=i(k),D=n(8),C=i(D),R=n(129),O=i(R),x=n(143),E=i(x),L=[{title:"Surveys",path:"/surveys"},{title:"Contacts",path:"/contacts"}],A={0:{class:"icon-Survey",icon:""},1:{class:"material-icons",icon:"contact_phone"},2:{class:"material-icons",icon:"help"},Language:{class:"material-icons",icon:"language"}},N=o.default.createClass({displayName:"MobileMenu",mixins:[h.default,(0,d.default)(O.default,"appCollection")],contextTypes:{history:o.default.PropTypes.object.isRequired,location:o.default.PropTypes.object.isRequired,customTheme:o.default.PropTypes.object},getInitialState:function(){return{displayLanguageMenu:!1}},_handleActive:function(e,t){"/surveys"==t&&E.default.tabChanged();var n=this.props.router,i=n.createLocation(t);n.push(i),this.props.closeMenu()},getTabIndexFromPath:function(e){var t=L.findIndex(function(t){return t.path==e});return t<0&&(t=0),"surveys"==e.split("/")[1]&&(t=0),t},renderMenu:function(e,t){var n=this;return L.map(function(i,r){return o.default.createElement(p.default,{style:n.context.customTheme.menuItem,value:i.path,primaryText:o.default.createElement("div",{key:r,style:e},C.default.t(i.title)),key:r,leftIcon:o.default.createElement(S.default,{className:A[r].class,style:t,color:_.red500},A[r].icon)})})},renderLanguages:function(){var e=this.state.appCollection.getIn(["language"]),t=[];return(0,s.default)(w.SupportedLanguages,function(n,i){n==e?t.push(o.default.createElement("div",{key:n,className:"langMenu"},o.default.createElement(M.default,{language:n,key:"link_"+n,text:i,isSelected:!0}))):t.push(o.default.createElement("div",{key:n,className:"langMenu"},o.default.createElement(M.default,{language:n,key:"link_"+n,text:i,isSelected:!1})))}),t},_handleLanguageRender:function(){var e=this.state.displayLanguageMenu;this.setState({displayLanguageMenu:!e})},render:function(){var e=u({fontFamily:"Roboto, sans-serif"},this.context.customTheme.titleText,{fontWeight:"700",textTransform:"uppercase",color:"#00BCD4"}),t={marginRight:24,marginTop:"3%",width:"232px"},n=(this.getTabIndexFromPath(location.pathname),this.state.displayLanguageMenu);return o.default.createElement("div",null,o.default.createElement(y.default,{onChange:this._handleActive,style:{width:"232px"}},this.renderMenu(e,t)),o.default.createElement(p.default,{style:u({marginBottom:10,marginTop:-10},this.context.customTheme.menuItem),key:"drawer",value:C.default.t("Language"),primaryText:o.default.createElement("div",{style:e},C.default.t("Language")),leftIcon:o.default.createElement(S.default,{className:A.Language.class,style:t,color:_.red500},A.Language.icon),rightIcon:o.default.createElement(S.default,{className:A.Language.class,style:{margin:"12px -2px"},color:_.red500},n?"keyboard_arrow_down":"keyboard_arrow_right"),onClick:this._handleLanguageRender}),o.default.createElement(c.Collapse,{isOpened:n},this.renderLanguages()))}});t.default=(0,T.default)(N)},880:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(0),s=i(r),u=n(27),a=i(u),o=n(100),l=i(o),d=s.default.createClass({displayName:"MobileLanguageLink",mixins:[a.default],_handleClick:function(e){l.default.changeLanguage(this.props.language),e.preventDefault()},render:function(){var e=this.props.isSelected;return s.default.createElement("a",{style:{color:e?"maroon":"#00BCD4"},onClick:this._handleClick,href:"#"},this.props.text)}});t.default=d},881:function(e,t,n){e.exports=n.p+"./images/navIcon.png"},882:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(223),r=n(366),s=n(883),u=function(e){return e&&e.__esModule?e:{default:e}}(s);t.default={spacing:u.default,fontFamily:"Roboto, sans-serif",palette:{primary1Color:i.cyan500,primary2Color:i.cyan700,primary3Color:i.grey400,accent1Color:i.pinkA200,accent2Color:i.grey100,accent3Color:i.grey500,textColor:i.darkBlack,secondaryTextColor:(0,r.fade)(i.darkBlack,.54),alternateTextColor:i.white,canvasColor:i.white,borderColor:i.grey300,disabledColor:(0,r.fade)(i.darkBlack,.3),pickerHeaderColor:i.cyan500,clockCircleColor:(0,r.fade)(i.darkBlack,.07),shadowColor:i.fullBlack}}},883:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={iconSize:24,desktopGutter:24,desktopGutterMore:32,desktopGutterLess:16,desktopGutterMini:8,desktopKeylineIncrement:64,desktopDropDownMenuItemHeight:32,desktopDropDownMenuFontSize:15,desktopDrawerMenuItemHeight:48,desktopSubheaderHeight:48,desktopToolbarHeight:56}},884:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={menu:1e3,appBar:1100,drawerOverlay:1200,drawer:1300,dialogOverlay:1400,dialog:1500,layer:2e3,popover:2100,snackbar:2900,tooltip:3e3}},885:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.userAgent;void 0===t&&"undefined"!=typeof navigator&&(t=navigator.userAgent),void 0!==t||o||((0,a.default)(!1,"Material-UI: userAgent should be supplied in the muiTheme context\n      for server-side rendering."),o=!0);var n="undefined"==typeof window;if(!1===t)return null;if("all"===t||void 0===t)return function(e){var t=!1;n&&(t=-1!==["flex","inline-flex"].indexOf(e.display));var i=s.default.prefixAll(e);return t&&(i.display=i.display.join("; display: ")),i};var i=new s.default({userAgent:t});return function(e){return i.prefix(e)}};var r=n(309),s=i(r),u=n(29),a=i(u),o=!1},886:function(e,t,n){"use strict";function i(){}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=n(29);!function(e){e&&e.__esModule}(r)},887:function(e,t,n){"use strict";function i(e){if(e.isRtl)return function(e){if(!0===e.directionInvariant)return e;var t={right:"left",left:"right",marginRight:"marginLeft",marginLeft:"marginRight",paddingRight:"paddingLeft",paddingLeft:"paddingRight",borderRight:"borderLeft",borderLeft:"borderRight"},n={};return Object.keys(e).forEach(function(i){var u=e[i],a=i;switch(t.hasOwnProperty(i)&&(a=t[i]),i){case"float":case"textAlign":"right"===u?u="left":"left"===u&&(u="right");break;case"direction":"ltr"===u?u="rtl":"rtl"===u&&(u="ltr");break;case"transform":if(!u)break;var o=void 0;(o=u.match(r))&&(u=u.replace(o[0],o[1]+-parseFloat(o[4]))),(o=u.match(s))&&(u=u.replace(o[0],o[1]+-parseFloat(o[4])+o[5]+o[6]?", "+(-parseFloat(o[7])+o[8]):""));break;case"transformOrigin":if(!u)break;u.indexOf("right")>-1?u=u.replace("right","left"):u.indexOf("left")>-1&&(u=u.replace("left","right"))}n[a]=u}),n}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i;var r=/((^|\s)translate(3d|X)?\()(\-?[\d]+)/,s=/((^|\s)skew(x|y)?\()\s*(\-?[\d]+)(deg|rad|grad)(,\s*(\-?[\d]+)(deg|rad|grad))?/},888:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=n(223),s=function e(){i(this,e),this.textFullBlack=r.fullBlack,this.textDarkBlack=r.darkBlack,this.textLightBlack=r.lightBlack,this.textMinBlack=r.minBlack,this.textFullWhite=r.fullWhite,this.textDarkWhite=r.darkWhite,this.textLightWhite=r.lightWhite,this.fontWeightLight=300,this.fontWeightNormal=400,this.fontWeightMedium=500,this.fontStyleButtonFontSize=14};t.default=new s},889:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(28),r=n(48),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),u={surveyHeader:{fontSize:i.fonts.x_large},sectionTitle:{fontSize:i.fonts.large},sectionDescription:{fontSize:i.fonts.small},sectionHeader:{fontSize:i.fonts.normal},textField:{fontSize:i.fonts.normal},radioButton:{fontSize:i.fonts.medium},datePicker:{fontSize:i.fonts.large},dropDownMenu:{fontSize:i.fonts.normal},titleDecorator:{fontSize:i.fonts.x_large},titleDescriptionDecorator:{fontSize:i.fonts.small},toggleLabel:{fontSize:i.fonts.medium},toggleDescription:{fontSize:i.fonts.small},menuItem:{fontSize:i.fonts.medium},validations:{success:s.green500,failed:s.red700,unchecked:s.amber500},messageText:{fontSize:i.fonts.larger},smallText:{fontSize:i.fonts.small},titleText:{fontSize:i.fonts.large},descriptionText:{fontSize:i.fonts.small},infoText:{fontSize:i.fonts.smaller},siteHeader:{fontSize:i.fonts.x_large},normalText:{fontSize:i.fonts.normal},timerText:{fontSize:i.fonts.x_small}};t.default=u},890:function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e){if(1===e.targetTouches.length)return s(e.targetTouches[0])}function s(e){return e.targetTouches?r(e):{x:e.clientX,y:e.clientY}}function u(e){var t=e.nodeType===h?e:e.parentElement;if(!t)return null;var n=t.getBoundingClientRect(),i=n.top;return{x:n.left,y:i}}function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=function(t){return new p(t,e)};return e.getMonitor?t(e):t}Object.defineProperty(t,"__esModule",{value:!0}),t.TouchBackend=void 0;var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();t.default=a;var d=n(4),c=function(e){return e&&e.__esModule?e:{default:e}}(d),f=function(){var e=!1;try{addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){e=!0}}))}catch(e){}return e}(),h=1,g={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend"},keyboard:{keydown:"keydown"}},p=t.TouchBackend=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,e),n.delayTouchStart=n.delayTouchStart||n.delay,n=o({enableTouchEvents:!0,enableMouseEvents:!1,enableKeyboardEvents:!1,delayTouchStart:0,delayMouseStart:0},n),this.actions=t.getActions(),this.monitor=t.getMonitor(),this.registry=t.getRegistry(),this.enableKeyboardEvents=n.enableKeyboardEvents,this.delayTouchStart=n.delayTouchStart,this.delayMouseStart=n.delayMouseStart,this.sourceNodes={},this.sourceNodeOptions={},this.sourcePreviewNodes={},this.sourcePreviewNodeOptions={},this.targetNodeOptions={},this.listenerTypes=[],this._mouseClientOffset={},n.enableMouseEvents&&this.listenerTypes.push("mouse"),n.enableTouchEvents&&this.listenerTypes.push("touch"),n.enableKeyboardEvents&&this.listenerTypes.push("keyboard"),this.getSourceClientOffset=this.getSourceClientOffset.bind(this),this.handleTopMoveStart=this.handleTopMoveStart.bind(this),this.handleTopMoveStartDelay=this.handleTopMoveStartDelay.bind(this),this.handleTopMoveStartCapture=this.handleTopMoveStartCapture.bind(this),this.handleTopMoveCapture=this.handleTopMoveCapture.bind(this),this.handleTopMove=this.handleTopMove.bind(this),this.handleTopMoveEndCapture=this.handleTopMoveEndCapture.bind(this),this.handleCancelOnEscape=this.handleCancelOnEscape.bind(this)}return l(e,[{key:"setup",value:function(){"undefined"!=typeof window&&((0,c.default)(!this.constructor.isSetUp,"Cannot have two Touch backends at the same time."),this.constructor.isSetUp=!0,this.addEventListener(window,"start",this.getTopMoveStartHandler()),this.addEventListener(window,"start",this.handleTopMoveStartCapture,!0),this.addEventListener(window,"move",this.handleTopMove),this.addEventListener(window,"move",this.handleTopMoveCapture,!0),this.addEventListener(window,"end",this.handleTopMoveEndCapture,!0),this.enableKeyboardEvents&&this.addEventListener(window,"keydown",this.handleCancelOnEscape,!0))}},{key:"teardown",value:function(){"undefined"!=typeof window&&(this.constructor.isSetUp=!1,this._mouseClientOffset={},this.removeEventListener(window,"start",this.handleTopMoveStartCapture,!0),this.removeEventListener(window,"start",this.handleTopMoveStart),this.removeEventListener(window,"move",this.handleTopMoveCapture,!0),this.removeEventListener(window,"move",this.handleTopMove),this.removeEventListener(window,"end",this.handleTopMoveEndCapture,!0),this.enableKeyboardEvents&&this.removeEventListener(window,"keydown",this.handleCancelOnEscape,!0),this.uninstallSourceNodeRemovalObserver())}},{key:"addEventListener",value:function(e,t,n,i){var r=f?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(i){e.addEventListener(g[i][t],n,r)})}},{key:"removeEventListener",value:function(e,t,n,i){var r=f?{capture:i,passive:!1}:i;this.listenerTypes.forEach(function(i){e.removeEventListener(g[i][t],n,r)})}},{key:"connectDragSource",value:function(e,t,n){var i=this,r=this.handleMoveStart.bind(this,e);return this.sourceNodes[e]=t,this.addEventListener(t,"start",r),function(){delete i.sourceNodes[e],i.removeEventListener(t,"start",r)}}},{key:"connectDragPreview",value:function(e,t,n){var i=this;return this.sourcePreviewNodeOptions[e]=n,this.sourcePreviewNodes[e]=t,function(){delete i.sourcePreviewNodes[e],delete i.sourcePreviewNodeOptions[e]}}},{key:"connectDropTarget",value:function(e,t){var n=this,i=function(i){var r=void 0;switch(i.type){case g.mouse.move:r={x:i.clientX,y:i.clientY};break;case g.touch.move:r={x:i.touches[0].clientX,y:i.touches[0].clientY}}var s=document.elementFromPoint(r.x,r.y),u=t.contains(s);if(s===t||u)return n.handleMove(i,e)};return this.addEventListener(document.querySelector("body"),"move",i),function(){n.removeEventListener(document.querySelector("body"),"move",i)}}},{key:"getSourceClientOffset",value:function(e){return u(this.sourceNodes[e])}},{key:"handleTopMoveStartCapture",value:function(e){this.moveStartSourceIds=[]}},{key:"handleMoveStart",value:function(e){this.moveStartSourceIds.unshift(e)}},{key:"getTopMoveStartHandler",value:function(){return this.delayTouchStart||this.delayMouseStart?this.handleTopMoveStartDelay:this.handleTopMoveStart}},{key:"handleTopMoveStart",value:function(e){var t=s(e);t&&(this._mouseClientOffset=t)}},{key:"handleTopMoveStartDelay",value:function(e){var t=e.type===g.touch.start?this.delayTouchStart:this.delayMouseStart;this.timeout=setTimeout(this.handleTopMoveStart.bind(this,e),t)}},{key:"handleTopMoveCapture",value:function(e){this.dragOverTargetIds=[]}},{key:"handleMove",value:function(e,t){this.dragOverTargetIds.unshift(t)}},{key:"handleTopMove",value:function(e){clearTimeout(this.timeout);var t=this.moveStartSourceIds,n=this.dragOverTargetIds,i=s(e);if(i&&(this.monitor.isDragging()||!this._mouseClientOffset.hasOwnProperty("x")||!t||this._mouseClientOffset.x===i.x&&this._mouseClientOffset.y===i.y||(this.moveStartSourceIds=null,this.actions.beginDrag(t,{clientOffset:this._mouseClientOffset,getSourceClientOffset:this.getSourceClientOffset,publishSource:!1})),this.monitor.isDragging())){var r=this.sourceNodes[this.monitor.getSourceId()];this.installSourceNodeRemovalObserver(r),this.actions.publishDragSource(),e.preventDefault();var u=document.querySelector("body").getBoundingClientRect(),a=document.querySelector("body").scrollHeight;if(80>=i.y){var o=-1*u.top-15;o>=0&&window.scrollTo(0,o)}if(window.outerHeight-100<=i.y){var l=-1*u.top+15;l<=a&&window.scrollTo(0,l)}this.actions.hover(n,{clientOffset:i})}}},{key:"handleTopMoveEndCapture",value:function(e){if(!this.monitor.isDragging()||this.monitor.didDrop())return void(this.moveStartSourceIds=null);e.preventDefault(),this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.drop(),this.actions.endDrag()}},{key:"handleCancelOnEscape",value:function(e){"Escape"===e.key&&(this._mouseClientOffset={},this.uninstallSourceNodeRemovalObserver(),this.actions.endDrag())}},{key:"installSourceNodeRemovalObserver",value:function(e){var t=this;this.uninstallSourceNodeRemovalObserver(),this.draggedSourceNode=e,this.draggedSourceNodeRemovalObserver=new window.MutationObserver(function(){e.parentElement||(t.resurrectSourceNode(),t.uninstallSourceNodeRemovalObserver())}),e&&e.parentElement&&this.draggedSourceNodeRemovalObserver.observe(e.parentElement,{childList:!0})}},{key:"resurrectSourceNode",value:function(){this.draggedSourceNode.style.display="none",this.draggedSourceNode.removeAttribute("data-reactid"),document.body.appendChild(this.draggedSourceNode)}},{key:"uninstallSourceNodeRemovalObserver",value:function(){this.draggedSourceNodeRemovalObserver&&this.draggedSourceNodeRemovalObserver.disconnect(),this.draggedSourceNodeRemovalObserver=null,this.draggedSourceNode=null}}]),e}()},932:function(e,t,n){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var r=n(22),s=i(r),u=n(9),a=i(u),o=n(87),l=(i(o),n(30)),d=i(l),c=n(163),f=i(c),h=n(208),g=(i(h),n(40)),p=i(g),v=n(17),y=i(v),m=n(6),S=i(m),_=(0,s.default)({listenables:[f.default,d.default],init:function(){this.state=a.default.Map({loadTimes:[]})},getInitialState:function(){return this.state},userChanged:function(e,t){t.isGuest||(this._timeTrackerProvider=p.default.get("TimeTrackerProvider"))},updateState:function(e,t){this.state=e,t||this.trigger(this.state)},recordTime:function(e){if(e){var t=this.state.get("loadTimes");if(localStorage&&localStorage.getItem("startTime")){var n=localStorage.getItem("startTime"),i=(new Date).getTime(),r=(i-n)/1e3;t.push({componentName:e,offset:r,timeStamp:new Date(i).toISOString()}),this.updateState(this.state.set("loadTimes",t),!0)}}},updateTimerInformation:function(e,t){var n=this.state.get("loadTimes");if(localStorage&&localStorage.getItem("startTime")){var i={componentName:"Survey initiated",offset:0,timeStamp:new Date(parseInt(localStorage.getItem("startTime"))).toISOString(),instanceInfo:e?"Refreshed Instance":"Fresh Instance",userName:t.name,userEmail:t.email};n.splice(0,0,i)}var r={docType:"surveytracker_info",_id:(0,y.default)().str,trackerInfo:n};this._timeTrackerProvider&&this._timeTrackerProvider.reportTrackerInfo(r).then(function(e){S.default.log("ErrorDocs synched in localDB"),S.default.log(e)}).catch(function(e){S.default.log(e)})}});t.default=_}},[445]);